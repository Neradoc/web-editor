<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>CircuitPython WebBluetooth Test</title>
  </head>
  <body>
    <h1>CircuitPython WebBluetooth Test</h1>

<p>
The first step is selecting the device you want to use.
</p>
<button id="requestBluetoothDevice">Request Bluetooth Device</button>
<p>
If you've done this before and the persistent device API works, then you can click this intead:
</p>
<button id="connectToBluetoothDevices">Connect to Bluetooth Devices</button>
<p>
Once you are connected, we need to prompt a bond. Without this CircuitPython boards with USB won't continue to advertise after a hard reset or powerloss.
</p>
<button id="promptBond">Bond</button>

<div id="editor"></div>

<script type="module">var ff="adaf0100-4669-6c65-5472-616e73666572",uf="adaf0200-4669-6c65-5472-616e73666572",ri=0,to=1,df=16,io=17,pf=18,gf=32,so=33,mf=34,en=1,Of=500,tn=class{constructor(e){this._resolve=null,this._reject=null,this._command=ri,this._offset=0,this._buffer=new Uint8Array(4096),this._transfer=null,this._device=e,e.addEventListener("gattserverdisconnected",this.onDisconnected.bind(this))}async onDisconnected(){console.log("ftc disconnected"),this._transfer=null,this._reject!=null&&(this._reject("disconnected"),this._reject=null,this._resolve=null),this._command=ri,this._offset=0}async checkConnection(){if(this._reject!=null)throw"Command in progress";if(this._transfer!=null){console.log("connection ok");return}console.log("check connection");let e=await this._device.gatt.getPrimaryService(65211),i=(await(await e.getCharacteristic(ff)).readValue()).getUint32(0,!0);if(i!=1)return console.log(i),Promise.reject("Unsupported version");console.log("version ok"),this._transfer=await e.getCharacteristic(uf),console.log(this._transfer),this._transfer.addEventListener("characteristicvaluechanged",this.onTransferNotifty.bind(this)),console.log("event listener added"),await this._transfer.startNotifications(),console.log("check connection done")}async _write(e){try{this._transfer.writeValue(e)}catch(t){console.log("caught write error"),onDisconnected()}}async bond(){await this.checkConnection(),console.log("bonded internally")}async onTransferNotifty(e){console.log(this._offset,e.target.value.buffer),this._buffer.set(new Uint8Array(e.target.value.buffer),this._offset),this._command=this._buffer[0],this._offset+=e.target.value.byteLength,console.log("notify",this._command.toString(16),this._buffer.slice(0,this._offset)),this._command==io?this._command=await this.processReadData(new DataView(this._buffer.buffer,0,this._offset)):this._command==so&&(this._command=await this.processWritePacing(new DataView(this._buffer.buffer,0,this._offset))),this._command!=to?(console.log("reset buffer"),this._offset=0):console.log("wait for more")}async readFile(e){await this.checkConnection(),this._incomingFile=null,this._incomingOffset=0,console.log("load",e);var t=new ArrayBuffer(12),i=new DataView(t);let n=new TextEncoder().encode(e);i.setUint8(0,df),i.setUint16(2,n.byteLength,!0),i.setUint32(4,0,!0),i.setUint32(8,this._buffer.byteLength-16,!0),await this._write(t),await this._write(n),console.log("wrote read");let r=new Promise((o,l)=>{console.log("start read"),this._resolve=o,this._reject=l});return console.log("read return"),r}async writeFile(e,t,i){await this.checkConnection();var n=new ArrayBuffer(12),r=new DataView(n);let o=new TextEncoder().encode(e);r.setUint8(0,gf),r.setUint16(2,o.byteLength,!0),r.setUint32(4,t,!0),r.setUint32(8,t+i.byteLength,!0),console.log("write",t,t+i.byteLength),console.log("write header",n,o),await this._write(n),await this._write(o),this._outgoingContents=i,this._outgoingOffset=t,console.log("wrote write");let l=new Promise((a,h)=>{console.log("start write"),this._resolve=a,this._reject=h});return console.log("write return"),l}sleep(e){return new Promise(t=>setTimeout(t,e))}async processWritePacing(e){console.log("processWritePacing",e);let t=e.getUint8(1),i=e.getUint32(4,!0),n=e.getUint32(8,!0);if(console.log(t,i,n),t!=en)return console.log("write failed",t),this._reject(t),this._reject=null,this._resolve=null,ri;if(n==0)return this._resolve(),this._reject=null,this._resolve=null,ri;var r=new ArrayBuffer(12),o=new DataView(r);o.setUint8(0,mf),o.setUint8(1,en),o.setUint32(4,i,!0);let l=Math.min(this._outgoingOffset+this._outgoingContents.byteLength-i,n);o.setUint32(8,l,!0),console.log("write header",i,l),await this._write(r);var a=0;let h=i-this._outgoingOffset;for(;a<l;){let c=Math.min(l-a,Of),f=this._outgoingContents.subarray(h+a,h+a+c);console.log("write subarray",h,a,f),a>0&&await this.sleep(100),await this._write(f),console.log(this._transfer.value),a+=c}return so}async processReadData(e){console.log("processReadData",e);let t=16,i=e.getUint8(1),n=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);if(console.log("read data",i,n,r,o),e.byteLength<t+o)return console.log("need more"),to;console.log("full payload"),this._incomingFile==null&&(this._incomingFile=new Uint8Array(r)),this._incomingFile.set(new Uint8Array(e.buffer.slice(t,e.byteLength)),n),this._incomingOffset+=o;let l=this._incomingFile.byteLength-this._incomingOffset;if(l==0)return console.log(this._incomingFile),this._resolve(new TextDecoder().decode(this._incomingFile)),this._resolve=null,this._reject=null,this._incomingFile=null,this._incomingOffset=0,ri;var a=new ArrayBuffer(12),h=new DataView(a);return h.setUint8(0,pf),h.setUint8(1,en),h.setUint32(4,this._incomingOffset,!0),h.setUint32(8,Math.min(this._buffer.byteLength-12,l),!0),await this._write(a),console.log(this._incomingFile),io}};var Mt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<Mt.length;s++)Mt[s]+=Mt[s-1];function $f(s){for(let e=1;e<Mt.length;e+=2)if(Mt[e]>s)return Mt[e-1]<=s;return!1}function no(s){return s>=127462&&s<=127487}var ro=8205;function ue(s,e,t=!0){return(t?oo:xf)(s,e)}function oo(s,e){if(e==s.length)return e;e&&lo(s.charCodeAt(e))&&ao(s.charCodeAt(e-1))&&e--;let t=z(s,e);for(e+=de(t);e<s.length;){let i=z(s,e);if(t==ro||i==ro||$f(i))e+=de(i),t=i;else if(no(i)){let n=0,r=e-2;for(;r>=0&&no(z(s,r));)n++,r-=2;if(n%2==0)break;e+=2}else break}return e}function xf(s,e){for(;e>0;){let t=oo(s,e-2);if(t<e)return t;e--}return 0}function lo(s){return s>=56320&&s<57344}function ao(s){return s>=55296&&s<56320}function z(s,e){let t=s.charCodeAt(e);if(!ao(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return lo(i)?(t-55296<<10)+(i-56320)+65536:t}function Gi(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function de(s){return s<65536?1:2}function gt(s,e,t){for(let i=0;i<s.length;)s.charCodeAt(i)==9?(e+=t-e%t,i++):(e++,i=ue(s,i));return e}function Ui(s,e,t,i){for(let n=0;n<s.length;){if(e>=t)return{offset:n,leftOver:0};e+=s.charCodeAt(n)==9?i-e%i:1,n=ue(s,n)}return{offset:s.length,leftOver:t-e}}var Z=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,1|2),this.decompose(t,this.length,n,1),qe.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),qe.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=new oi(this),i=new oi(e);for(;;){if(t.next(),i.next(),t.lineBreak!=i.lineBreak||t.done!=i.done||t.value!=i.value)return!1;if(t.done)return!0}}iter(e=1){return new oi(this,e)}iterRange(e,t=this.length){return new ho(this,e,t)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Z.empty:e.length<=32?new Y(e):qe.from(Y.split(e,[]))}};typeof Symbol!="undefined"&&(Z.prototype[Symbol.iterator]=function(){return this.iter()});var Y=class extends Z{constructor(e,t=wf(e)){super();this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new fo(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new Y(co(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=zi(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Y(l,o.length+r.length));else{let a=l.length>>1;i.push(new Y(l.slice(0,a)),new Y(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Y))return super.replace(e,t,i);let n=zi(this.text,zi(i.text,co(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new Y(n,r):qe.from(Y.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new Y(i,n)),i=[],n=-1);return n>-1&&t.push(new Y(i,n)),t}},qe=class extends Z{constructor(e,t){super();this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let c=this.children.slice();return c[n]=a,new qe(c,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new Y(d,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,h=-1,c=[];function f(d){let p;if(d.lines>r&&d instanceof qe)for(let m of d.children)f(m);else d.lines>o&&(a>o||!a)?(u(),l.push(d)):d instanceof Y&&a&&(p=c[c.length-1])instanceof Y&&d.lines+p.lines<=32?(a+=d.lines,h+=d.length+1,c[c.length-1]=new Y(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>n&&u(),a+=d.lines,h+=d.length+1,c.push(d))}function u(){a!=0&&(l.push(c.length==1?c[0]:qe.from(c,h)),h=-1,a=c.length=0)}for(let d of e)f(d);return u(),l.length==1?l[0]:new qe(l,t)}};Z.empty=new Y([""],0);function wf(s){let e=-1;for(let t of s)e+=t.length+1;return e}function zi(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function co(s,e,t){return zi(s,[""],e,t)}var oi=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?0:e instanceof Y?e.text.length:e.children.length]}next(e=0){for(;;){let t=this.nodes.length-1;if(t<0)return this.done=!0,this.value="",this.lineBreak=!1,this;let i=this.nodes[t],n=this.offsets[t],r=i instanceof Y?i.text.length:i.children.length;if(n==(this.dir>0?r:0))this.nodes.pop(),this.offsets.pop();else if(!this.lineBreak&&n!=(this.dir>0?0:r)){if(this.lineBreak=!0,e==0)return this.value=`
`,this;e--}else if(i instanceof Y){let o=i.text[n-(this.dir<0?1:0)];if(this.offsets[t]=n+=this.dir,this.lineBreak=!1,o.length>Math.max(0,e))return this.value=e==0?o:this.dir>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let o=i.children[this.dir>0?n:n-1];this.offsets[t]=n+this.dir,this.lineBreak=!1,e>o.length?e-=o.length:(this.nodes.push(o),this.offsets.push(this.dir>0?0:o instanceof Y?o.text.length:o.children.length))}}}},ho=class{constructor(e,t,i){this.value="",this.cursor=new oi(e,t>i?-1:1),t>i?(this.skip=e.length-t,this.limit=t-i):(this.skip=t,this.limit=i-t)}next(e=0){if(this.limit<=0)this.limit=-1;else{let{value:t,lineBreak:i,done:n}=this.cursor.next(this.skip+e);this.skip=0,this.value=t;let r=i?1:t.length;r>this.limit&&(this.value=this.cursor.dir>0?t.slice(0,this.limit):t.slice(r-this.limit)),n||this.value.length==0?this.limit=-1:this.limit-=this.value.length}return this}get lineBreak(){return this.cursor.lineBreak}get done(){return this.limit<0}},fo=class{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}},sn=/\r\n?|\n/,se=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(se||(se={})),Qe=class{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){nn(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Qe(e)}composeDesc(e){return this.empty?e:e.empty?this:uo(this,e)}mapDesc(e,t=!1){return e.empty?this:rn(this,e,t)}mapPos(e,t=-1,i=se.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return r+(e-n);r+=l}else{if(i!=se.Simple&&h>=e&&(i==se.TrackDel&&n<e&&h>e||i==se.TrackBefore&&n<e||i==se.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Qe(e)}},_=class extends Qe{constructor(e,t){super(e);this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return nn(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return rn(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Z.empty);i.push(o?e.slice(r,r+o):Z.empty)}r+=o}return new _(t,i)}compose(e){return this.empty?e:e.empty?this:uo(this,e,!0)}map(e,t=!1){return e.empty?this:rn(this,e,t,!0)}iterChanges(e,t=!1){nn(this,e,t)}get desc(){return new Qe(this.sections)}filter(e){let t=[],i=[],n=[],r=new Et(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let c=Math.min(r.len,a-l);oe(n,c,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;oe(t,c,f),f>0&&mt(i,t,r.text),r.forward(c),l+=c}let h=e[o++];for(;l<h;){if(r.done)break e;let c=Math.min(r.len,h-l);oe(t,c,-1),oe(n,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),l+=c}}return{changes:new _(t,i),filtered:new Qe(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&oe(n,t-o,-1);let f=new _(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function h(c){if(Array.isArray(c))for(let f of c)h(f);else if(c instanceof _){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:f,to:u=f,insert:d}=c;if(f>u||f<0||u>t)throw new RangeError(`Invalid change range ${f} to ${u} (in doc of length ${t})`);let p=d?typeof d=="string"?Z.of(d.split(i||sn)):d:Z.empty,m=p.length;if(f==u&&m==0)return;f<o&&a(),f>o&&oe(n,f-o,-1),oe(n,u-f,m),mt(r,n,p),o=u}}return h(e),a(!l),l}static empty(e){return new _(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(Z.empty);i[n]=Z.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new _(t,i)}};function oe(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function mt(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(Z.empty);s.push(t)}}function nn(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let h=n,c=r,f=Z.empty;for(;h+=l,c+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(n,h,r,c,f),n=h,r=c}}}function rn(s,e,t,i=!1){let n=[],r=i?[]:null,o=new Et(s),l=new Et(e);for(let a=0,h=0;;)if(o.ins==-1)a+=o.len,o.next();else if(l.ins==-1&&h<a){let c=Math.min(l.len,a-h);l.forward(c),oe(n,c,-1),h+=c}else if(l.ins>=0&&(o.done||h<a||h==a&&(l.len<o.len||l.len==o.len&&!t))){for(oe(n,l.ins,-1);a>h&&!o.done&&a+o.len<h+l.len;)a+=o.len,o.next();h+=l.len,l.next()}else if(o.ins>=0){let c=0,f=a+o.len;for(;;)if(l.ins>=0&&h>a&&h+l.len<f)c+=l.ins,h+=l.len,l.next();else if(l.ins==-1&&h<f){let u=Math.min(l.len,f-h);c+=u,l.forward(u),h+=u}else break;oe(n,c,o.ins),r&&mt(r,n,o.text),a=f,o.next()}else{if(o.done&&l.done)return r?new _(n,r):new Qe(n);throw new Error("Mismatched change set lengths")}}function uo(s,e,t=!1){let i=[],n=t?[]:null,r=new Et(s),o=new Et(e);for(let l=!1;;){if(r.done&&o.done)return n?new _(i,n):new Qe(i);if(r.ins==0)oe(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)oe(i,0,o.ins,l),n&&mt(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),h=i.length;if(r.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;oe(i,a,c,l),n&&c&&mt(n,i,o.text)}else o.ins==-1?(oe(i,r.off?0:r.len,a,l),n&&mt(n,i,r.textBit(a))):(oe(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&mt(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),r.forward2(a),o.forward(a)}}}}var Et=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Z.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Z.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},Ot=class{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i=e.mapPos(this.from,t),n=e.mapPos(this.to,t);return i==this.from&&n==this.to?this:new Ot(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return g.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return g.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return g.range(e.anchor,e.head)}},g=class{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:g.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new g([this.main])}addRange(e,t=!0){return g.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,g.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new g(e.ranges.map(t=>Ot.fromJSON(t)),e.main)}static single(e,t=e){return new g([g.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return yf(e.slice(),t);i=r.to}return new g(e,t)}static cursor(e,t=0,i,n){return new Ot(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?new Ot(t,e,16|n):new Ot(e,t,n)}};function yf(s,e=0){let t=s[e];s.sort((i,n)=>i.from-n.from),e=s.indexOf(t);for(let i=1;i<s.length;i++){let n=s[i],r=s[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let o=r.from,l=Math.max(n.to,r.to);i<=e&&e--,s.splice(--i,2,n.anchor>n.head?g.range(l,o):g.range(o,l))}}return new g(s,e)}function po(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var on=0,S=class{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=r,this.id=on++,this.default=e([])}static define(e={}){return new S(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Sf),!!e.static,e.enables)}of(e){return new li([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new li(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new li(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}};function Sf(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}var li=class{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=on++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=e[this.id]>>1,o=this.type==2,l=!1,a=!1,h=[];for(let c of this.dependencies)c=="doc"?l=!0:c=="selection"?a=!0:(((t=e[c.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[c.id]);return(c,f)=>{if(!f||f.reconfigured)return c.values[r]=i(c),1;{if(!(l&&f.docChanged||a&&(f.docChanged||f.selection)||h.some(m=>(ai(c,m)&1)>0)))return 0;let d=i(c),p=f.startState.values[r];return(o?bf(d,p,n):n(d,p))?0:(c.values[r]=d,1)}}}};function bf(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function Pf(s,e,t){let i=t.map(l=>s[l.id]),n=t.map(l=>l.type),r=i.filter(l=>!(l&1)),o=s[e.id]>>1;return(l,a)=>{let h=a?a.reconfigured?a.startState.config.address[e.id]:o<<1:null,c=h==null;for(let d of r)ai(l,d)&1&&(c=!0);if(!c)return 0;let f=[];for(let d=0;d<i.length;d++){let p=Dt(l,i[d]);if(n[d]==2)for(let m of p)f.push(m);else f.push(p)}let u=e.combine(f);return h!=null&&e.compare(u,Dt(a.startState,h))?0:(l.values[o]=u,1)}}function go(s,e){let t=s.config.address[e];return t==null?null:t>>1}var mo=S.define({static:!0}),K=class{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new K(on++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(mo).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return(i,n)=>{if(!n||n.reconfigured&&go(n.startState,this.id)==null)return i.values[t]=this.create(i),1;let r,o=0;n.reconfigured?(r=n.startState.values[go(n.startState,this.id)],o=1):r=n.startState.values[t];let l=this.updateF(r,n);return!o&&!this.compareF(r,l)&&(o=1),o&&(i.values[t]=l),o}}init(e){return[this,mo.of({field:this,create:e})]}get extension(){return this}},hi={fallback:3,default:2,extend:1,override:0};function Fi(s){return e=>new ln(e,s)}var jt={fallback:Fi(hi.fallback),default:Fi(hi.default),extend:Fi(hi.extend),override:Fi(hi.override)},ln=class{constructor(e,t){this.inner=e,this.prec=t}},ci=class{of(e){return new Hi(this,e)}reconfigure(e){return ci.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Hi=class{constructor(e,t){this.compartment=e,this.inner=t}},fi=class{constructor(e,t,i,n,r){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let c of kf(e,t,o))c instanceof K?n.push(c):(r[c.facet.id]||(r[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(f=>c.slot(f));for(let c in r){let f=r[c],u=f[0].facet;if(f.every(d=>d.type==0)){l[u.id]=a.length<<1|1;let d=u.combine(f.map(m=>m.value)),p=i?i.config.address[u.id]:null;if(p!=null){let m=Dt(i,p);u.compare(d,m)&&(d=m)}a.push(d)}else{for(let d of f)d.type==0?(l[d.id]=a.length<<1|1,a.push(d.value)):(l[d.id]=h.length<<1,h.push(p=>d.dynamicSlot(p)));l[u.id]=h.length<<1,h.push(d=>Pf(d,u,f))}}return new fi(e,o,h.map(c=>c(l)),l,a)}};function kf(s,e,t){let i=[[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a>=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof Hi&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)r(h,l);else if(o instanceof Hi){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),r(h,l)}else if(o instanceof ln)r(o.inner,o.prec);else if(o instanceof K)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof li)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(h,l)}}return r(s,hi.default),i.reduce((o,l)=>o.concat(l))}function ai(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.config.dynamicSlots[t](s,s.applying);return s.status[t]=2|n}function Dt(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}var Oo=S.define(),$o=S.define({combine:s=>s.some(e=>e),static:!0}),xo=S.define({combine:s=>s.length?s[0]:void 0,static:!0}),wo=S.define(),yo=S.define(),So=S.define(),Le=class{constructor(e,t){this.type=e,this.value=t}static define(){return new bo}},bo=class{of(e){return new Le(this,e)}},Po=class{constructor(e){this.map=e}of(e){return new W(this,e)}},W=class{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new W(this.type,t)}is(e){return this.type==e}static define(e={}){return new Po(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}};W.reconfigure=W.define();W.appendConfig=W.define();var T=class{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&po(i,t.newLength),r.some(l=>l.type==T.time)||(this.annotations=r.concat(T.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}};T.time=Le.define();T.userEvent=Le.define();T.addToHistory=Le.define();T.remote=Le.define();function vf(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function ko(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=_.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:W.mapEffects(s.effects,n).concat(W.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function an(s,e,t){let i=e.selection;return{changes:e.changes instanceof _?e.changes:_.of(e.changes||[],t,s.facet(xo)),selection:i&&(i instanceof g?i:g.single(i.anchor,i.head)),effects:Bt(e.effects),annotations:Bt(e.annotations),scrollIntoView:!!e.scrollIntoView}}function vo(s,e,t){let i=an(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=ko(i,an(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=new T(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Wf(t?Qf(n):n)}function Qf(s){let e=s.startState,t=!0;for(let n of e.facet(wo)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:vf(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=_.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.invertedDesc}s=new T(e,n,s.selection&&s.selection.map(r),W.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(yo);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof T?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof T?s=r[0]:s=vo(e,Bt(r),!1)}return s}function Wf(s){let e=s.startState,t=e.facet(So),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=ko(s,an(e,r,s.changes.newLength),!0))}return i==s?s:new T(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}var Tf=[];function Bt(s){return s==null?Tf:Array.isArray(s)?s:[s]}var pe=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(pe||(pe={})),If=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,hn;try{hn=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(s){}function Rf(s){if(hn)return hn.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||If.test(t)))return!0}return!1}function Cf(s){return e=>{if(!/\S/.test(e))return pe.Space;if(Rf(e))return pe.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return pe.Word;return pe.Other}}var I=class{constructor(e,t,i,n=null){if(this.config=e,this.doc=t,this.selection=i,this.applying=null,this.status=e.statusTemplate.slice(),n&&n.startState.config==e)this.values=n.startState.values.slice();else if(this.values=e.dynamicSlots.map(r=>null),n)for(let r in e.address){let o=e.address[r],l=n.startState.config.address[r];l!=null&&(o&1)==0&&(this.values[o>>1]=Dt(n.startState,l))}this.applying=n,n&&(n._state=this);for(let r=0;r<this.config.dynamicSlots.length;r++)ai(this,r<<1);this.applying=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ai(this,i),Dt(this,i)}update(...e){return vo(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let r of e.effects)r.is(ci.reconfigure)?(t&&(n=new Map,t.compartments.forEach((o,l)=>n.set(l,o)),t=null),n.set(r.value.compartment,r.value.extension)):r.is(W.reconfigure)?(t=null,i=r.value):r.is(W.appendConfig)&&(t=null,i=Bt(i).concat(r.value));new I(t||fi.resolve(i,n,this),e.newDoc,e.newSelection,e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:g.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=Bt(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(n);for(let u=0;u<l;u++)r[u]=r[u].map(c);let f=n.mapDesc(h,!0);r.push(a.range.map(f)),n=n.compose(c),o=W.mapEffects(o,c).concat(W.mapEffects(Bt(a.effects),f))}return{changes:n,selection:g.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof _?e:_.of(e,this.doc.length,this.facet(I.lineSeparator))}toText(e){return Z.of(e.split(this.facet(I.lineSeparator)||sn))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ai(this,t),Dt(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof K&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let r in i){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}return I.create({doc:e.doc,selection:g.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=fi.resolve(e.extensions||[],new Map),i=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(t.staticFacet(I.lineSeparator)||sn)),n=e.selection?e.selection instanceof g?e.selection:g.single(e.selection.anchor,e.selection.head):g.single(0);return po(n,i.length),t.staticFacet($o)||(n=n.asSingle()),new I(t,i,n)}get tabSize(){return this.facet(I.tabSize)}get lineBreak(){return this.facet(I.lineSeparator)||`
`}phrase(e){for(let t of this.facet(I.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t){let i=[];for(let n of this.facet(Oo))for(let r of n(this,t))Object.prototype.hasOwnProperty.call(r,e)&&i.push(r[e]);return i}charCategorizer(e){return Cf(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=ue(t,o,!1);if(r(t.slice(a,o))!=pe.Word)break;o=a}for(;l<n;){let a=ue(t,l);if(r(t.slice(l,a))!=pe.Word)break;l=a}return o==l?g.range(o+i,l+i):null}};I.allowMultipleSelections=$o;I.tabSize=S.define({combine:s=>s.length?s[0]:4});I.lineSeparator=xo;I.phrases=S.define();I.languageData=Oo;I.changeFilter=wo;I.transactionFilter=yo;I.transactionExtender=So;ci.reconfigure=W.define();function Ve(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}var cn="ͼ",Qo=typeof Symbol=="undefined"?"__"+cn:Symbol.for(cn),fn=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Wo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},Ne=class{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,h){let c=[],f=/^@(\w+)\b/.exec(o[0]),u=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))r(d.split(/,\s*/).map(m=>o.map(O=>m.replace(/&/,O))).reduce((m,O)=>m.concat(O)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(n(d),p,c,u)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||u)&&a.push((i&&!f&&!h?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Wo[Qo]||1;return Wo[Qo]=e+1,cn+e.toString(36)}static mount(e,t){(e[fn]||new To(e)).mount(Array.isArray(t)?t:[t])}},Ji=null,To=class{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(Ji)return e.adoptedStyleSheets=[Ji.sheet].concat(e.adoptedStyleSheets),e[fn]=Ji;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Ji=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[fn]=this}mount(e){let t=this.sheet,i=0,n=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],i++)}else{for(;n<l;)i+=this.modules[n++].rules.length;i+=o.rules.length,n++}}if(!t){let r="";for(let o=0;o<this.modules.length;o++)r+=this.modules[o].getRules()+`
`;this.styleTag.textContent=r}}},Ge=class{eq(e){return this==e}range(e,t=e){return new Ki(e,t,this)}};Ge.prototype.startSide=Ge.prototype.endSide=0;Ge.prototype.point=!1;Ge.prototype.mapMode=se.TrackDel;var Ki=class{constructor(e,t,i){this.from=e,this.to=t,this.value=i}};function un(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}var es=class{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,h=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,f=this.to[a]+e,u,d;if(c==f){let p=t.mapPos(c,h.startSide,h.mapMode);if(p==null)continue;u=d=p}else if(u=t.mapPos(c,h.startSide),d=t.mapPos(f,h.endSide),u>d||u==d&&h.startSide>0&&h.endSide<=0)continue;(d-u||h.endSide-h.startSide)<0||(o<0&&(o=u),h.point&&(l=Math.max(l,d-u)),i.push(h),n.push(u-o),r.push(d-o))}return{mapped:i.length?new es(n,r,i,l):null,pos:o}}},q=class{constructor(e,t,i=q.empty,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&t.slice().sort(un),this.isEmpty)return t.length?q.of(t):this;let l=new dn(this,null,-1).goto(0),a=0,h=[],c=new Ae;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];c.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(new Ki(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?q.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.length==0||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:f}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(f))}}let r=this.nextLayer.map(e);return t.length==0?r:new q(i,t,r,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Yt.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Yt.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(f=>f.maxPoint>=500||!f.isEmpty&&t.indexOf(f)<0&&f.maxPoint>=r),l=t.filter(f=>f.maxPoint>=500||!f.isEmpty&&e.indexOf(f)<0&&f.maxPoint>=r),a=Io(o,l),h=new Xt(o,a,r),c=new Xt(l,a,r);i.iterGaps((f,u,d)=>Ro(h,f,c,u,d,n)),i.empty&&i.length==0&&Ro(h,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let r=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Io(r,o),a=new Xt(r,l,0).goto(i),h=new Xt(o,l,0).goto(i);for(;;){if(a.to!=h.to||!Co(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>=n)return!0;a.next(),h.next()}}static spans(e,t,i,n,r=-1){let o=new Xt(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new Ae;for(let n of e instanceof Ki?[e]:t?qf(e):e)i.add(n.from,n.to,n.value);return i.finish()}};q.empty=new q([],[],null,-1);function qf(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(un(e,i)>0)return s.slice().sort(un);e=i}return s}q.empty.nextLayer=q.empty;var Ae=class{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new es(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ae)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(q.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=new q(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function Io(s,e){let t=new Map;for(let n of s)for(let r=0;r<n.chunk.length;r++)n.chunk[r].maxPoint<500&&t.set(n.chunk[r],n.chunkPos[r]);let i=new Set;for(let n of e)for(let r=0;r<n.chunk.length;r++)t.get(n.chunk[r])==n.chunkPos[r]&&i.add(n.chunk[r]);return i}var dn=class{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}let n=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&(this.rangeIndex=n),this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],++this.rangeIndex==t.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.to-e.to||this.endSide-e.endSide}},Yt=class{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new dn(o,t,i,r));return n.length==1?n[0]:new Yt(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)pn(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)pn(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),pn(this.heap,0)}}};function pn(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}var Xt=class{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Yt.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ts(this.active,e),ts(this.activeTo,e),ts(this.activeRank,e),this.minActive=qo(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;is(this.active,t,i),is(this.activeTo,t,n),is(this.activeRank,t,r),e&&is(e,t,this.cursor.from),this.minActive=qo(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&ts(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to&&o.endSide==this.endSide)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.to>e&&this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let r=0;for(;r<i.length&&i[r]<e;)r++;this.openStart=r+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}};function Ro(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=s.to+a-t.to||s.endSide-t.endSide,c=h<0?s.to+a:t.to,f=Math.min(c,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))||r.comparePoint(l,f,s.point,t.point):f>l&&!Co(s.active,t.active)&&r.compareRange(l,f,s.active,t.active),c>o)break;l=c,h<=0&&s.next(),h>=0&&t.next()}}function Co(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function ts(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function is(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function qo(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}var st={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ss={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Ao=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Af=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),Zf=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Zo=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Mf=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ef=Ao&&(Zo||+Ao[1]<57)||Zf&&Zo;for(var ee=0;ee<10;ee++)st[48+ee]=st[96+ee]=String(ee);for(var ee=1;ee<=24;ee++)st[ee+111]="F"+ee;for(var ee=65;ee<=90;ee++)st[ee]=String.fromCharCode(ee+32),ss[ee]=String.fromCharCode(ee);for(var gn in st)ss.hasOwnProperty(gn)||(ss[gn]=st[gn]);function Df(s){var e=Ef&&(s.ctrlKey||s.altKey||s.metaKey)||(Af||Mf)&&s.shiftKey&&s.key&&s.key.length==1,t=!e&&s.key||(s.shiftKey?ss:st)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ns(s){return s.getSelection?s.getSelection():document.getSelection()}function mn(s,e){return e?s.contains(e.nodeType!=1?e.parentNode:e):!1}function jf(){let s=document.activeElement;for(;s&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function On(s,e){if(!e.anchorNode)return!1;try{return mn(s,e.anchorNode)}catch(t){return!1}}function rs(s){return s.nodeType==3?ui(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function os(s,e,t,i){return t?Mo(s,e,t,i,-1)||Mo(s,e,t,i,1):!1}function $n(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Mo(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:ls(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=$n(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?ls(s):0}else return!1}}function ls(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}var Eo={left:0,right:0,top:0,bottom:0};function xn(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function Bf(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}var as=5;function Yf(s,e){let t=s.ownerDocument,i=t.defaultView;for(let n=s.parentNode;n;)if(n.nodeType==1){let r,o=n==document.body;if(o)r=Bf(i);else{if(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth){n=n.parentNode;continue}let h=n.getBoundingClientRect();r={left:h.left,right:h.left+n.clientWidth,top:h.top,bottom:h.top+n.clientHeight}}let l=0,a=0;if(e.top<r.top?a=-(r.top-e.top+as):e.bottom>r.bottom&&(a=e.bottom-r.bottom+as),e.left<r.left?l=-(r.left-e.left+as):e.right>r.right&&(l=e.right-r.right+as),l||a)if(o)i.scrollBy(l,a);else{if(a){let h=n.scrollTop;n.scrollTop+=a,a=n.scrollTop-h}if(l){let h=n.scrollLeft;n.scrollLeft+=l,l=n.scrollLeft-h}e={left:e.left-l,top:e.top-a,right:e.right-l,bottom:e.bottom-a}}if(o)break;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break}var Do=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},_t=null;function jo(s){if(s.setActive)return s.setActive();if(_t)return s.focus(_t);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(_t==null?{get preventScroll(){return _t={preventScroll:!0},!0}}:void 0),!_t){_t=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}var Bo;function ui(s,e,t=e){let i=Bo||(Bo=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function di(s,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,s.dispatchEvent(n);let r=new KeyboardEvent("keyup",i);return r.synthetic=!0,s.dispatchEvent(r),n.defaultPrevented||r.defaultPrevented}var ne=class{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ne(e.parentNode,$n(e),t)}static after(e,t){return new ne(e.parentNode,$n(e)+1,t)}},Xf=[],N=class{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){var t;if(this.dirty&2){let i=this.dom,n=null;for(let o of this.children){if(o.dirty){let l=n?n.nextSibling:i.firstChild;!o.dom&&l&&!((t=N.get(l))===null||t===void 0?void 0:t.parent)&&o.reuseDOM(l),o.sync(e),o.dirty=0}e&&e.node==i&&n!=o.dom&&(e.written=!0),_f(i,n,o.dom),n=o.dom}let r=n?n.nextSibling:i.firstChild;for(r&&e&&e.node==i&&(e.written=!0);r;)r=Yo(r)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(e),i.dirty=0)}reuseDOM(e){return!1}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=ls(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!N.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,h=i,c=i;a<this.children.length;a++){let f=this.children[a],u=h+f.length;if(h<e&&u>t)return f.domBoundsAround(e,t,h);if(u>=e&&n==-1&&(n=a,r=h),h>t&&f.dom.parentNode==this.dom){o=a,l=c;break}c=u,h=u+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty&2||(this.dirty|=2,this.markParentsDirty(e))}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Xf){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&(r.parent=null)}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new wn(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}};N.prototype.breakAfter=0;function Yo(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}function _f(s,e,t){let i=e?e.nextSibling:s.firstChild;if(t.parentNode==s)for(;i!=t;)i=Yo(i);else s.insertBefore(t,i)}var wn=class{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}},[We,yn]=typeof navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],Sn=/Edge\/(\d+)/.exec(We.userAgent),Xo=/MSIE \d/.test(We.userAgent),bn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(We.userAgent),hs=!!(Xo||bn||Sn),_o=!hs&&/gecko\/(\d+)/i.test(We.userAgent),Pn=!hs&&/Chrome\/(\d+)/.exec(We.userAgent),Lo="webkitFontSmoothing"in yn.documentElement.style,Vo=!hs&&/Apple Computer/.test(We.vendor),Q={mac:/Mac/.test(We.platform),ie:hs,ie_version:Xo?yn.documentMode||6:bn?+bn[1]:Sn?+Sn[1]:0,gecko:_o,gecko_version:_o?+(/Firefox\/(\d+)/.exec(We.userAgent)||[0,0])[1]:0,chrome:!!Pn,chrome_version:Pn?+Pn[1]:0,ios:Vo&&(/Mobile\/\w+/.test(We.userAgent)||We.maxTouchPoints>2),android:/Android\b/.test(We.userAgent),webkit:Lo,safari:Vo,webkit_version:Lo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:yn.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},No=[],$t=class extends N{become(e){return!1}getSide(){return 0}};$t.prototype.children=No;var Lf=256,xt=class extends $t{constructor(e){super();this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){return e.nodeType!=3?!1:(this.createDOM(e),!0)}merge(e,t,i){return i&&(!(i instanceof xt)||this.length-(t-e)+i.length>Lf)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}slice(e){return new xt(this.text.slice(e))}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ne(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Go(this.dom,e,t)}},wt=class extends $t{constructor(e,t=[],i=0){super();this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}createDOM(){let e=document.createElement(this.mark.tagName);if(this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);this.setDOM(e)}sync(e){this.dom||this.createDOM(),super.sync(e)}merge(e,t,i,n,r){return i&&(!(i instanceof wt&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&r<=0)?!1:(Uo(this,e,t,i?i.children:No,n-1,r-1),this.markDirty(),!0)}slice(e){return new wt(this.mark,Vf(this.children,e),this.length-e)}domAtPos(e){return zo(this.dom,this.children,e)}coordsAt(e,t){return Fo(this,e,t)}};function Go(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?Q.chrome||Q.gecko||(e?(n--,o=1):(r++,o=-1)):t<0?n--:r++;let l=ui(s,n,r).getClientRects();if(!l.length)return Eo;let a=l[(o?o<0:t>=0)?0:l.length-1];return Q.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?xn(a,o<0):a}var Ze=class extends $t{constructor(e,t,i){super();this.widget=e,this.length=t,this.side=i}static create(e,t,i){return new(e.customView||Ze)(e,t,i)}slice(e){return Ze.create(this.widget,this.length-e,this.side)}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,r){return i&&(!(i instanceof Ze)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Ze&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Z.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Z.empty}domAtPos(e){return e==0?ne.before(this.dom):ne.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return Eo;for(let r=e>0?i.length-1:0;n=i[r],!(e>0?r==0:r==i.length-1||n.top<n.bottom);r+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:xn(n,e==0)}},Ho=class extends Ze{domAtPos(e){return new ne(this.widget.text,e)}sync(){this.dom||this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){return t?e.nodeType==3?Math.min(t,this.length):this.length:0}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){return Go(this.widget.text,e,t)}};function Uo(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),f=e-t;for(let d of i)f+=d.length;s.length+=f;let{children:u}=s;if(h==l&&c){let d=u[h];if(i.length==1&&d.merge(c,a,i[0],n,r))return;if(i.length==0){d.merge(c,a,null,n,r);return}let p=d.slice(a);p.merge(0,0,i[i.length-1],0,r)?i[i.length-1]=p:i.push(p),l++,r=a=0}if(a){let d=u[l];i.length&&d.merge(0,a,i[i.length-1],0,r)?(i.pop(),r=i.length?0:n):d.merge(0,a,null,0,0)}else l<u.length&&i.length&&u[l].merge(0,0,i[i.length-1],0,r)&&(i.pop(),r=i.length?0:n);if(c){let d=u[h];i.length&&d.merge(c,d.length,i[0],n,0)?(i.shift(),n=i.length?0:r):d.merge(c,d.length,null,0,0),h++}else if(h&&i.length){let d=u[h-1];d.merge(d.length,d.length,i[0],n,0)&&(i.shift(),n=i.length?0:r)}for(;h<l&&i.length&&u[l-1].become(i[i.length-1]);)i.pop(),l--,r=i.length?0:n;for(;h<l&&i.length&&u[h].become(i[0]);)i.shift(),h++,n=i.length?0:r;!i.length&&h&&l<u.length&&n&&r&&u[l].merge(0,0,u[h-1],n,r)&&h--,(i.length||h!=l)&&s.replaceChildren(h,l,i)}function Vf(s,e){let t=[],i=0;for(let n of s){let r=i+n.length;r>e&&t.push(i<e?n.slice(e-i):n),i=r}return t}function zo(s,e,t){let i=0;for(let n=0;i<e.length;i++){let r=e[i],o=n+r.length;if(!(o==n&&r.getSide()<=0)){if(t>n&&t<o&&r.dom.parentNode==s)return r.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==s)return ne.after(n)}return new ne(s,0)}function Jo(s,e,t){let i,{children:n}=s;t>0&&e instanceof wt&&n.length&&(i=n[n.length-1])instanceof wt&&i.mark.eq(e.mark)?Jo(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function Fo(s,e,t){for(let r=0,o=0;o<s.children.length;o++){let l=s.children[o],a=r+l.length;if(!(a==r&&l.getSide()<=0)){if(t<=0||a==s.length?a>=e:a>e)return l.coordsAt(e-r,t);r=a}}let i=s.dom.lastChild;if(!i)return s.dom.getBoundingClientRect();let n=rs(i);return n[n.length-1]}function pi(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}function kn(s,e){if(s==e)return!0;if(!s||!e)return!1;let t=Object.keys(s),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||s[n]!==e[n])return!1;return!0}function vn(s,e,t){if(e)for(let i in e)t&&i in t||s.removeAttribute(i);if(t)for(let i in t)e&&e[i]==t[i]||s.setAttribute(i,t[i])}var Me=class{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}},E=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(E||(E={})),b=class extends Ge{constructor(e,t,i,n){super();this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new gi(e)}static widget(e){let t=e.side||0;return e.block&&(t+=(2e8+1)*(t>0?1:-1)),new yt(e,t,t,!!e.block,e.widget||null,!1)}static replace(e){let t=!!e.block,{start:i,end:n}=Ko(e),r=t?-2e8*(i?2:1):1e8*(i?-1:1),o=t?2e8*(n?2:1):1e8*(n?1:-1);return new yt(e,r,o,t,e.widget||null,!0)}static line(e){return new Lt(e)}static set(e,t=!1){return q.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};b.none=q.empty;var gi=class extends b{constructor(e){let{start:t,end:i}=Ko(e);super(1e8*(t?-1:1),1e8*(i?1:-1),null,e);this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof gi&&this.tagName==e.tagName&&this.class==e.class&&kn(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};gi.prototype.point=!1;var Lt=class extends b{constructor(e){super(-1e8,-1e8,null,e)}eq(e){return e instanceof Lt&&kn(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};Lt.prototype.mapMode=se.TrackBefore;Lt.prototype.point=!0;var yt=class extends b{constructor(e,t,i,n,r,o){super(t,i,r,e);this.block=n,this.isReplace=o,this.mapMode=n?t<0?se.TrackBefore:se.TrackAfter:se.TrackDel}get type(){return this.startSide<this.endSide?E.WidgetRange:this.startSide<0?E.WidgetBefore:E.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof yt&&Nf(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};yt.prototype.point=!0;function Ko(s){let{inclusiveStart:e,inclusiveEnd:t}=s;return e==null&&(e=s.inclusive),t==null&&(t=s.inclusive),{start:e||!1,end:t||!1}}function Nf(s,e){return s==e||!!(s&&e&&s.compare(e))}function Qn(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>s?t[n]=Math.max(t[n],e):t.push(s,e)}var le=class extends N{constructor(){super(...arguments);this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof le))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Uo(this,e,t,i?i.children:el,r,o),!0}split(e){let t=new le;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].slice(n),0),this.children[i].merge(n,this.children[i].length,null,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[i-1].parent=null,i--;return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){kn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Jo(this,e,t)}addLineDeco(e){let t=e.spec.attributes;t&&(this.attrs=pi(t,this.attrs||{}))}domAtPos(e){return zo(this.dom,this.children,e)}sync(e){this.dom||(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(vn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let t=this.dom.lastChild;if(!t||t.nodeName!="BR"&&N.get(t)instanceof Ze&&(!Q.ios||!this.children.some(i=>i instanceof xt))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof xt))return null;let i=rs(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return Fo(this,e,t)}match(e){return!1}get type(){return E.Text}static find(e,t){for(let i=0,n=0;;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof le)return r;if(r.length)return null}n=o+r.breakAfter}}},el=[],St=class extends N{constructor(e,t,i){super();this.widget=e,this.length=t,this.type=i,this.breakAfter=0}merge(e,t,i,n,r,o){return i&&(!(i instanceof St)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ne.before(this.dom):ne.after(this.dom,e==this.length)}split(e){let t=this.length-e;return this.length=e,new St(this.widget,t,this.type)}get children(){return el}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Z.empty}domBoundsAround(){return null}match(e){return e instanceof St&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}},cs=class{constructor(e,t,i){this.doc=e,this.pos=t,this.end=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof St&&e.type==E.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new le),this.curLine}addWidget(e){this.curLine=null,this.content.push(e)}finish(){this.posCovered()||this.getLine()}wrapMarks(e,t){for(let i of t)e=new wt(i,[e],e.length);return e}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.getLine().append(this.wrapMarks(new xt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r){let o=t-e;if(i instanceof yt)if(i.block){let{type:l}=i;l==E.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addWidget(new St(i.widget||new Wn("div"),o,l))}else{let l=this.wrapMarks(Ze.create(i.widget||new Wn("span"),o,i.startSide),n);this.getLine().append(l,r)}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n){let r=new cs(e,t,i);return r.openEnd=q.spans(n,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(),r}},Wn=class extends Me{constructor(e){super();this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}},Gf=[],tl=S.define(),il=S.define(),sl=S.define(),nl=S.define(),Tn=S.define(),rl=S.define();function Se(s,e,t){let i=s.facet(nl);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var nt=S.define({combine:s=>s.length?s[0]:!0}),ol=class{constructor(e,t){this.field=e,this.get=t}},te=class{from(e){return new ol(this,e)}static define(){return new te}};te.decorations=te.define();te.atomicRanges=te.define();te.scrollMargins=te.define();var Uf=0,mi=S.define(),L=class{constructor(e,t,i){this.id=e,this.create=t,this.fields=i,this.extension=mi.of(this)}static define(e,t){let{eventHandlers:i,provide:n,decorations:r}=t||{},o=[];if(n)for(let l of Array.isArray(n)?n:[n])o.push(l);return i&&o.push(ll.from(l=>({plugin:l,handlers:i}))),r&&o.push(te.decorations.from(r)),new L(Uf++,e,o)}static fromClass(e,t){return L.define(i=>new e(i),t)}},ll=te.define(),Ue=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){for(let{field:i,get:n}of this.spec.fields)i==e&&t.push(n(this.value))}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,!this.value.update)return this;try{this.value.update(t)}catch(i){if(Se(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(n){}return Ue.dummy}}}else try{this.value=this.spec.create(e)}catch(t){return Se(e.state,t,"CodeMirror plugin crashed"),Ue.dummy}return this}destroy(e){var t;if((t=this.value)===null||t===void 0?void 0:t.destroy)try{this.value.destroy()}catch(i){Se(e.state,i,"CodeMirror plugin crashed")}}};Ue.dummy=new Ue(L.define(()=>({})));var al=S.define({combine:s=>s.reduce((e,t)=>pi(t,e),{})}),hl=S.define({combine:s=>s.reduce((e,t)=>pi(t,e),{})}),bt=S.define(),Oi=S.define(),Ee=class{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Ee(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let f=t[r],u=t[r+1],d=Math.max(l,f),p=Math.min(c,u);if(d<=p&&new Ee(d+h,p+h,d,p).addToSet(i),u>c)break;r+=2}if(!a)return i;new Ee(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}},In=class{constructor(e,t,i=Gf){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=_.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new Ee(o,l,a,h))),this.changedRanges=n;let r=e.hasFocus;r!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=r,this.flags|=1),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&(16|2))>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return this.transactions.some(e=>e.docChanged)}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},Rn=class extends N{constructor(e){super();this.view=e,this.compositionDeco=b.none,this.decorations=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(e.contentDOM),this.children=[new le],this.children[0].setParent(this),this.updateInner([new Ee(0,0,0,e.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:h})=>h<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),this.view.inputState.composing<0?this.compositionDeco=b.none:e.transactions.length&&(this.compositionDeco=Ff(this.view,e.changes));let i=(Q.ie||Q.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines,n=this.decorations,r=this.updateDeco(),o=Jf(n,r,e.changes);t=Ee.extendWithRanges(t,o);let l=e.transactions.some(a=>a.annotation(T.userEvent)=="pointerselection");return this.dirty==0&&t.length==0&&!(e.flags&(4|8))&&e.state.selection.main.from>=this.view.viewport.from&&e.state.selection.main.to<=this.view.viewport.to?(this.updateSelection(i,l),!1):(this.updateInner(t,r,e.startState.doc.length,i,l),!0)}updateInner(e,t,i,n=!1,r=!1){this.updateChildren(e,t,i);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.domHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let l=Q.chrome||Q.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(l),this.dirty=0,l&&(l.written||o.selectionRange.focusNode!=l.node)&&(n=!0),this.updateSelection(n,r),this.dom.style.height=""})}updateChildren(e,t,i){let n=this.childCursor(i);for(let r=e.length-1;;r--){let o=r>=0?e[r]:null;if(!o)break;let{fromA:l,toA:a,fromB:h,toB:c}=o,{content:f,breakAtStart:u,openStart:d,openEnd:p}=cs.build(this.view.state.doc,h,c,t),{i:m,off:O}=n.findPos(a,1),{i:y,off:C}=n.findPos(l,-1);this.replaceRange(y,C,m,O,f,u,d,p)}}replaceRange(e,t,i,n,r,o,l,a){let h=this.children[e],c=r.length?r[r.length-1]:null,f=c?c.breakAfter:o;if(e==i&&!o&&!f&&r.length<2&&h.merge(t,n,r.length?c:null,t==0,l,a))return;let u=this.children[i];for(n<u.length||u.children.length&&u.children[u.children.length-1].length==0?(e==i&&(u=u.split(n),n=0),!f&&c&&u.merge(0,n,c,!0,0,a)?r[r.length-1]=u:((n||u.children.length&&u.children[0].length==0)&&u.merge(0,n,null,!1,0,a),r.push(u))):u.breakAfter&&(c?c.breakAfter=1:o=1),i++,h.breakAfter=o,t>0&&(!o&&r.length&&h.merge(t,h.length,r[0],!1,l,0)?h.breakAfter=r.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++);e<i&&r.length;)if(this.children[i-1].match(r[r.length-1]))i--,r.pop();else if(this.children[e].match(r[0]))e++,r.shift();else break;(e<i||r.length)&&this.replaceChildren(e,i,r)}updateSelection(e=!1,t=!1){if(!(t||this.mayControlSelection())||Q.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.view.state.selection.main,n=this.domAtPos(i.anchor),r=i.empty?n:this.domAtPos(i.head);if(Q.gecko&&i.empty&&zf(n)){let l=document.createTextNode("");this.view.observer.ignore(()=>n.node.insertBefore(l,n.node.childNodes[n.offset]||null)),n=r=new ne(l,0),e=!0}let o=this.view.observer.selectionRange;(e||!o.focusNode||!os(n.node,n.offset,o.anchorNode,o.anchorOffset)||!os(r.node,r.offset,o.focusNode,o.focusOffset))&&(this.view.observer.ignore(()=>{let l=ns(this.root);if(i.empty){if(Q.gecko){let a=Hf(n.node,n.offset);if(a&&a!=(1|2)){let h=fl(n.node,n.offset,a==1?1:-1);h&&(n=new ne(h,a==1?0:h.nodeValue.length))}}l.collapse(n.node,n.offset),i.bidiLevel!=null&&o.cursorBidiLevel!=null&&(o.cursorBidiLevel=i.bidiLevel)}else if(l.extend)l.collapse(n.node,n.offset),l.extend(r.node,r.offset);else{let a=document.createRange();i.anchor>i.head&&([n,r]=[r,n]),a.setEnd(r.node,r.offset),a.setStart(n.node,n.offset),l.removeAllRanges(),l.addRange(a)}}),this.view.observer.setSelectionRange(n,r)),this.impreciseAnchor=n.precise?null:new ne(o.anchorNode,o.anchorOffset),this.impreciseHead=r.precise?null:new ne(o.focusNode,o.focusOffset)}enforceCursorAssoc(){if(this.view.composing)return;let e=this.view.state.selection.main,t=ns(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=le.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let r=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!r||!o||r.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(nt)?this.root.activeElement==this.dom:On(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=N.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof le)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let r=this.children[n],o=i-r.breakAfter-r.length;if(e>o||e==o&&r.type!=E.WidgetBefore&&r.type!=E.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==E.WidgetBefore&&t>-2))return r.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(){let e=[],{from:t,to:i}=this.view.viewState.viewport,n=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let r=0,o=0;o<this.children.length;o++){let l=this.children[o],a=r+l.length;if(a>i)break;if(r>=t){e.push(l.dom.getBoundingClientRect().height);let h=l.dom.scrollWidth;h>n&&(this.minWidth=n=h,this.minWidthFrom=r,this.minWidthTo=a)}r=a+l.breakAfter}return e}measureTextSize(){for(let n of this.children)if(n instanceof le){let r=n.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=rs(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new wn(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=t.lineAt(o,0).bottom-t.lineAt(i,0).top;e.push(b.replace({widget:new cl(l),block:!0,inclusive:!0}).range(i,o))}if(!r)break;i=r.to+1}return b.set(e)}updateDeco(){return this.decorations=[...this.view.pluginField(te.decorations),...this.view.state.facet(bt),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollPosIntoView(e,t){let i=this.coordsAt(e,t);if(!i)return;let n=0,r=0,o=0,l=0;for(let a of this.view.pluginField(te.scrollMargins))if(a){let{left:h,right:c,top:f,bottom:u}=a;h!=null&&(n=Math.max(n,h)),c!=null&&(r=Math.max(r,c)),f!=null&&(o=Math.max(o,f)),u!=null&&(l=Math.max(l,u))}Yf(this.dom,{left:i.left-n,top:i.top-o,right:i.right+r,bottom:i.bottom+l})}};function zf(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}var cl=class extends Me{constructor(e){super();this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function Ff(s,e){let t=s.observer.selectionRange,i=t.focusNode&&fl(t.focusNode,t.focusOffset,0);if(!i)return b.none;let n=s.docView.nearest(i),r,o,l=i;if(n instanceof $t){for(;n.parent instanceof $t;)n=n.parent;r=n.posAtStart,o=r+n.length,l=n.dom}else if(n instanceof le){for(;l.parentNode!=n.dom;)l=l.parentNode;let u=l.previousSibling;for(;u&&!N.get(u);)u=u.previousSibling;r=o=u?N.get(u).posAtEnd:n.posAtStart}else return b.none;let a=e.mapPos(r,1),h=Math.max(a,e.mapPos(o,-1)),c=i.nodeValue,{state:f}=s;if(h-a<c.length)if(f.sliceDoc(a,Math.min(f.doc.length,a+c.length))==c)h=a+c.length;else if(f.sliceDoc(Math.max(0,h-c.length),h)==c)a=h-c.length;else return b.none;else if(f.sliceDoc(a,h)!=c)return b.none;return b.set(b.replace({widget:new ul(l,i)}).range(a,h))}var ul=class extends Me{constructor(e,t){super();this.top=e,this.text=t}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Ho}};function fl(s,e,t){for(;;){if(s.nodeType==3)return s;if(s.nodeType==1&&e>0&&t<=0)s=s.childNodes[e-1],e=ls(s);else if(s.nodeType==1&&e<s.childNodes.length&&t>=0)s=s.childNodes[e],e=0;else return null}}function Hf(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}var dl=class{constructor(){this.changes=[]}compareRange(e,t){Qn(e,t,this.changes)}comparePoint(e,t){Qn(e,t,this.changes)}};function Jf(s,e,t){let i=new dl;return q.compare(s,e,t,i),i.changes}var R=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(R||(R={})),Cn=R.LTR,Kf=R.RTL;function pl(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}var eu=pl("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tu=pl("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),qn=Object.create(null),De=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);qn[e]=t,qn[t]=-e}function iu(s){return s<=247?eu[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?tu[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203||s==8204?256:1}var su=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Pt=class{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Kf:Cn}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}},B=[];function nu(s,e){let t=s.length,i=e==Cn?1:2,n=e==Cn?2:1;if(!s||i==1&&!su.test(s))return gl(t);for(let o=0,l=i,a=i;o<t;o++){let h=iu(s.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),B[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=B[o];if(h==128)o<t-1&&l==B[o+1]&&l&24?h=B[o]=l:B[o]=256;else if(h==64){let c=o+1;for(;c<t&&B[c]==64;)c++;let f=o&&l==8||c<t&&B[c]==8?a==1?1:8:256;for(let u=o;u<c;u++)B[u]=f;o=c-1}else h==8&&a==1&&(B[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,c,f;o<t;o++)if(c=qn[h=s.charCodeAt(o)])if(c<0){for(let u=l-3;u>=0;u-=3)if(De[u+1]==-c){let d=De[u+2],p=d&2?i:d&4?d&1?n:i:0;p&&(B[o]=B[De[u]]=p),l=u;break}}else{if(De.length==189)break;De[l++]=o,De[l++]=h,De[l++]=a}else if((f=B[o])==2||f==1){let u=f==i;a=u?0:1;for(let d=l-3;d>=0;d-=3){let p=De[d+2];if(p&2)break;if(u)De[d+2]|=2;else{if(p&4)break;De[d+2]|=4}}}for(let o=0;o<t;o++)if(B[o]==256){let l=o+1;for(;l<t&&B[l]==256;)l++;let a=(o?B[o-1]:i)==1,h=(l<t?B[l]:i)==1,c=a==h?a?1:2:i;for(let f=o;f<l;f++)B[f]=c;o=l-1}let r=[];if(i==1)for(let o=0;o<t;){let l=o,a=B[o++]!=1;for(;o<t&&a==(B[o]!=1);)o++;if(a)for(let h=o;h>l;){let c=h,f=B[--h]!=2;for(;h>l&&f==(B[h-1]!=2);)h--;r.push(new Pt(h,c,f?2:1))}else r.push(new Pt(l,o,0))}else for(let o=0;o<t;){let l=o,a=B[o++]==2;for(;o<t&&a==(B[o]==2);)o++;r.push(new Pt(l,o,a?1:2))}return r}function gl(s){return[new Pt(0,s,0)]}var ml="";function ru(s,e,t,i,n){var r;let o=i.head-s.from,l=-1;if(o==0){if(!n||!s.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==s.length){if(n)return null;let u=e[e.length-1];u.level!=t&&(o=u.side(!0,t),l=e.length-1)}l<0&&(l=Pt.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),c=ue(s.text,o,h);if(ml=s.text.slice(Math.min(o,c),Math.max(o,c)),c!=a.side(n,t))return g.cursor(c+s.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?g.cursor(n?s.to:s.from,n?-1:1,t):f&&f.level<a.level?g.cursor(f.side(!n,t)+s.from,n?1:-1,f.level):g.cursor(c+s.from,n?-1:1,a.level)}function ou(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return g.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=ue(n.text,r,!1):l=ue(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let h=ue(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=ue(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return g.range(o+n.from,l+n.from)}function lu(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function au(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function An(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Ol(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function $l(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Zn(s,e,t){let i,n,r,o,l,a,h,c;for(let d=s.firstChild;d;d=d.nextSibling){let p=rs(d);for(let m=0;m<p.length;m++){let O=p[m];n&&An(n,O)&&(O=Ol($l(O,n.bottom),n.top));let y=lu(e,O),C=au(t,O);if(y==0&&C==0)return d.nodeType==3?xl(d,e,t):Zn(d,e,t);(!i||o>C||o==C&&r>y)&&(i=d,n=O,r=y,o=C),y==0?t>O.bottom&&(!h||h.bottom<O.bottom)?(l=d,h=O):t<O.top&&(!c||c.top>O.top)&&(a=d,c=O):h&&An(h,O)?h=$l(h,O.bottom):c&&An(c,O)&&(c=Ol(c,O.top))}}if(h&&h.bottom>=t?(i=l,n=h):c&&c.top<=t&&(i=a,n=c),!i)return{node:s,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return xl(i,f,t);if(!r&&i.contentEditable=="true")return Zn(i,f,t);let u=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:u}}function xl(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=ui(s,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<r){let u=e>=(c.left+c.right)/2,d=u;if((Q.chrome||Q.gecko)&&ui(s,l).getBoundingClientRect().left==c.right&&(d=!u),f<=0)return{node:s,offset:l+(d?1:0)};n=l+(d?1:0),r=f}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function wl(s,{x:e,y:t},i=-1){let n=s.contentDOM.getBoundingClientRect(),r,o=s.defaultLineHeight/2;for(let u=!1;;){if(r=s.blockAtHeight(t,n.top),r.top>t||r.bottom<t){if(i=r.top>t?-1:1,t=Math.min(r.bottom-o,Math.max(r.top+o,t)),u)return null;u=!0}if(r.type==E.Text)break;t=i>0?r.bottom+o:r.top-o}let l=r.from;if(l<s.viewport.from)return s.viewport.from==0?0:null;if(l>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:null;e=Math.max(n.left+1,Math.min(n.right-1,e));let a=s.root,h=a.elementFromPoint(e,t),c,f=-1;if(h&&s.contentDOM.contains(h)&&!(s.docView.nearest(h)instanceof Ze)){if(a.caretPositionFromPoint){let u=a.caretPositionFromPoint(e,t);u&&({offsetNode:c,offset:f}=u)}else if(a.caretRangeFromPoint){let u=a.caretRangeFromPoint(e,t);u&&({startContainer:c,startOffset:f}=u,Q.safari&&hu(c,f,e)&&(c=void 0))}}if(!c||!s.docView.dom.contains(c)){let u=le.find(s.docView,l);({node:c,offset:f}=Zn(u.dom,e,t))}return s.docView.posFromDOM(c,f)}function hu(s,e,t){let i;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(let n=s.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return ui(s,i-1,i).getBoundingClientRect().left>t}function cu(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=!i||!s.lineWrapping?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let a=s.dom.getBoundingClientRect(),h=s.posAtCoords({x:t==(s.textDirection==R.LTR)?a.right-1:a.left+1,y:(r.top+r.bottom)/2});if(h!=null)return g.cursor(h,t?-1:1)}let o=le.find(s.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return g.cursor(l,t?-1:1)}function yl(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n);for(let o=e,l=null;;){let a=ru(n,r,s.textDirection,o,t),h=ml;if(!a){if(n.number==(t?s.state.doc.lines:1))return o;h=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),a=g.cursor(t?n.from:n.to)}if(l){if(!l(h))return o}else{if(!i)return a;l=i(h)}o=a}}function fu(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==pe.Space&&(n=o),n==o}}function uu(s,e,t,i){var n;let r=e.head,o=t?1:-1;if(r==(t?s.state.doc.length:0))return g.cursor(r);let l=s.coordsAtPos(r);if(l){let O=s.dom.getBoundingClientRect(),y=(n=e.goalColumn)!==null&&n!==void 0?n:l.left-O.left,C=O.left+y,w=i!=null?i:s.defaultLineHeight>>1;for(let P=o<0?l.top:l.bottom,v=0;v<50;v+=10){let A=wl(s,{x:C,y:P+(w+v)*o},o);if(A==null)break;if(A!=r)return g.cursor(A,void 0,void 0,y)}}let{doc:a}=s.state,h=a.lineAt(r),c=s.state.tabSize,f=e.goalColumn,u=0;if(f==null){for(let O=a.iterRange(h.from,r);!O.next().done;)u=gt(O.value,u,c);f=u*s.defaultCharacterWidth}else u=Math.round(f/s.defaultCharacterWidth);if(o<0&&h.from==0)return g.cursor(0);if(o>0&&h.to==a.length)return g.cursor(h.to);let d=a.line(h.number+o),p=d.from,m=0;for(let O=a.iterRange(d.from,d.to);m>=u&&!O.next().done;){let{offset:y,leftOver:C}=Ui(O.value,m,u,c);m=u-C,p+=y}return g.cursor(p,void 0,void 0,f)}function Mn(s,e,t){let i=s.pluginField(te.atomicRanges);for(;;){let n=!1;for(let r of i)r.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?g.cursor(o,1):g.cursor(l,-1),n=!0)});if(!n)return t}}var Sl=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=null,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in F){let i=F[t];e.contentDOM.addEventListener(t,n=>{t=="keydown"&&this.keydown(e,n)||!kl(e,n)||this.ignoreDuringComposition(n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),Q.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(ll);for(let i of t)for(let n in i.handlers)this.registeredEvents.indexOf(n)<0&&n!="scroll"&&(this.registeredEvents.push(n),e.contentDOM.addEventListener(n,r=>{!kl(e,r)||this.runCustomHandlers(n,e,r)&&r.preventDefault()}))}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let r=n.handlers[e],o=!1;if(r){try{o=r.call(n.plugin,i,t)}catch(l){Se(t.state,l)}if(o||i.defaultPrevented)return Q.android&&e=="keydown"&&i.keyCode==13&&t.observer.flushSoon(),!0}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(r){Se(e.state,r)}}}keydown(e,t){return this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),this.screenKeyEvent(e,t)?!0:Q.ios&&(t.keyCode==13||t.keyCode==8)&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=t.keyCode==13?"enter":"backspace",setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){if(!this.pendingIOSKey)return!1;let t=e.contentDOM,i=this.pendingIOSKey;return this.pendingIOSKey=null,i=="enter"?di(t,"Enter",13):di(t,"Backspace",8)}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Q.safari&&Date.now()-this.compositionEndedAt<500?(this.compositionEndedAt=0,!0):!1:!1}screenKeyEvent(e,t){let i=t.keyCode==9&&Date.now()<this.lastEscPress+2e3;return t.keyCode==27?this.lastEscPress=Date.now():bl.indexOf(t.keyCode)<0&&(this.lastEscPress=0),i}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!Q.ios}startMouseSelection(e,t,i){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new Pl(this,e,t,i)}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},bl=[16,17,18,20,91,92,224,225],Pl=class{constructor(e,t,i,n){this.inputState=e,this.view=t,this.style=n,this.lastEvent=i;let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=t.state.facet(I.allowMultipleSelections)&&du(t,i),this.dragMove=pu(t,i),this.dragging=gu(t,i)?null:!1,this.dragging===!1&&(i.preventDefault(),this.select(i))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,annotations:T.userEvent.of("pointerselection"),scrollIntoView:!0})}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function du(s,e){let t=s.state.facet(tl);return t.length?t[0](e):Q.mac?e.metaKey:e.ctrlKey}function pu(s,e){let t=s.state.facet(il);return t.length?t[0](e):Q.mac?!e.altKey:!e.ctrlKey}function gu(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=ns(s.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function kl(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=N.get(t))&&i.ignoreEvent(e))return!1;return!0}var F=Object.create(null),vl=Q.ie&&Q.ie_version<15||Q.ios&&Q.webkit_version<604;function mu(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Ql(s,t.value)},50)}function Ql(s,e){let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(En&&t.selection.ranges.every(a=>a.empty)&&En==r.toString()){let a=-1;i=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let f=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:g.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=r.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:g.cursor(a.from+h.length)}}):i=t.replaceSelection(r);s.dispatch(i,{annotations:T.userEvent.of("paste"),scrollIntoView:!0})}F.keydown=(s,e)=>{s.inputState.setSelectionOrigin("keyboardselection")};var Wl=0;F.touchstart=(s,e)=>{Wl=Date.now(),s.inputState.setSelectionOrigin("pointerselection")};F.touchmove=s=>{s.inputState.setSelectionOrigin("pointerselection")};F.mousedown=(s,e)=>{if(s.observer.flush(),Wl>Date.now()-2e3)return;let t=null;for(let i of s.state.facet(sl))if(t=i(s,e),t)break;!t&&e.button==0&&(t=Ou(s,e)),t&&(s.root.activeElement!=s.contentDOM&&s.observer.ignore(()=>jo(s.contentDOM)),s.inputState.startMouseSelection(s,e,t))};function Tl(s,e,t,i){if(i==1)return g.cursor(e,t);if(i==2)return ou(s.state,e,t);{let n=le.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,g.range(o,l)}}var Il=(s,e)=>s>=e.top&&s<=e.bottom,Rl=(s,e,t)=>Il(e,t)&&s>=t.left&&s<=t.right;function $u(s,e,t,i){let n=le.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Rl(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&Rl(t,i,l)?1:o&&Il(i,o)?-1:1}function Cl(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY});return t==null?null:{pos:t,bias:$u(s,t,e.clientX,e.clientY)}}var xu=Q.ie&&Q.ie_version<=11,ql=null,Al=0,Zl=0;function wu(s){if(!xu)return s.detail;let e=ql,t=Zl;return ql=s,Zl=Date.now(),Al=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Al+1)%3:1}function Ou(s,e){let t=Cl(s,e),i=wu(e),n=s.state.selection,r=t,o=e;return{update(l){l.changes&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let c;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?c=r:(c=r=Cl(s,l),o=l),!c||!t)return n;let f=Tl(s,c.pos,c.bias,i);if(t.pos!=c.pos&&!a){let u=Tl(s,t.pos,t.bias,i),d=Math.min(u.from,f.from),p=Math.max(u.to,f.to);f=d<f.from?g.range(d,p):g.range(p,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):g.create([f])}}}F.dragstart=(s,e)=>{let{selection:{main:t}}=s.state,{mouseSelection:i}=s.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Ml(s,e,t,i){let n=s.posAtCoords({x:e.clientX,y:e.clientY});if(n==null||!t)return;e.preventDefault();let{mouseSelection:r}=s.inputState,o=i&&r&&r.dragging&&r.dragMove?{from:r.dragging.from,to:r.dragging.to}:null,l={from:n,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},annotations:T.userEvent.of("drop")})}F.drop=(s,e)=>{if(!e.dataTransfer||!s.state.facet(nt))return;let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,r=()=>{++n==t.length&&Ml(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}}else Ml(s,e,e.dataTransfer.getData("Text"),!0)};F.paste=(s,e)=>{if(!s.state.facet(nt))return;s.observer.flush();let t=vl?null:e.clipboardData,i=t&&t.getData("text/plain");i?(Ql(s,i),e.preventDefault()):mu(s)};function yu(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function Su(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(s.lineBreak),ranges:t,linewise:i}}var En=null;F.copy=F.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=Su(s.state);if(!t)return;En=n?t:null;let r=vl?null:e.clipboardData;r?(e.preventDefault(),r.clearData(),r.setData("text/plain",t)):yu(s,t),e.type=="cut"&&s.state.facet(nt)&&s.dispatch({changes:i,scrollIntoView:!0,annotations:T.userEvent.of("cut")})};F.focus=F.blur=s=>{setTimeout(()=>{s.hasFocus!=s.inputState.notifiedFocused&&s.update([])},10)};F.beforeprint=s=>{s.viewState.printing=!0,s.requestMeasure(),setTimeout(()=>{s.viewState.printing=!1,s.requestMeasure()},2e3)};function El(s,e){if(s.docView.compositionDeco.size){s.inputState.rapidCompositionStart=e;try{s.update([])}finally{s.inputState.rapidCompositionStart=!1}}}F.compositionstart=F.compositionupdate=s=>{s.inputState.composing<0&&(s.docView.compositionDeco.size&&(s.observer.flush(),El(s,!0)),s.inputState.composing=0)};F.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),setTimeout(()=>{s.inputState.composing<0&&El(s,!1)},50)};F.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};var Dl=["pre-wrap","normal","pre-line"],jl=class{constructor(){this.doc=Z.empty,this.lineWrapping=!1,this.direction=R.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefresh(e,t,i){let n=!1;for(let r=0;r<e.length;r++){let o=e[r];o<0?r++:this.heightSamples[Math.floor(o*10)]||(n=!0,this.heightSamples[Math.floor(o*10)]=!0)}return n||Dl.indexOf(t)>-1!=this.lineWrapping||this.direction!=i}refresh(e,t,i,n,r,o){let l=Dl.indexOf(e)>-1,a=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l||this.direction!=t;if(this.lineWrapping=l,this.direction=t,this.lineHeight=i,this.charWidth=n,this.lineLength=r,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}},Bl=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},ze=class{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ze(this.from,this.length+e.length,this.top,this.height+e.height,t)}},M=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(M||(M={})),bu=1e-4,ae=class{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&~2}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>bu&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return ae.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:c}=n[o],f=r.lineAt(l,M.ByPosNoHeight,t,0,0),u=f.to>=a?f:r.lineAt(a,M.ByPosNoHeight,t,0,0);for(c+=u.to-a,a=u.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=r.lineAt(l,M.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=fs.build(i,e,h,c);r=r.replace(l,a,d)}return r.updateHeight(i,0)}static empty(){return new ge(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new Yl(ae.of(e.slice(0,t)),o,ae.of(e.slice(i)))}};ae.prototype.size=1;var Dn=class extends ae{constructor(e,t,i){super(e,t);this.type=i}blockAt(e,t,i,n){return new ze(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},ge=class extends Dn{constructor(e,t){super(e,t,E.Text);this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof ge||n instanceof H&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof H?n=new ge(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):ae.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},H=class extends ae{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:h,length:c}=t.line(r+a);return new ze(h,c,i+l*a,l,E.Text)}lineAt(e,t,i,n,r){if(t==M.ByHeight)return this.blockAt(e,i,n,r);if(t==M.ByPosNoHeight){let{from:f,to:u}=i.lineAt(e);return new ze(f,u-f,0,0,E.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,r),{from:a,length:h,number:c}=i.lineAt(e);return new ze(a,h,n+l*(c-o),l,E.Text)}forEachLine(e,t,i,n,r,o){let{firstLine:l,lineHeight:a}=this.lines(i,r);for(let h=Math.max(e,r),c=Math.min(r+this.length,t);h<=c;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new ze(f.from,f.length,n,a,E.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof H?i[i.length-1]=new H(r.length+n):i.push(null,new H(n-1))}if(e>0){let r=i[0];r instanceof H?i[0]=new H(e+r.length):i.unshift(new H(e-1),null)}return ae.of(i)}decomposeLeft(e,t){t.push(new H(e-1),null)}decomposeRight(e,t){t.push(null,new H(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from);for(n.from>t&&o.push(new H(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let a=e.doc.lineAt(l).length;o.length&&o.push(null);let h=new ge(a,n.heights[n.index++]);h.outdated=!1,o.push(h),l+=a+1}return l<=r&&o.push(null,new H(r-l).updateHeight(e,l)),e.heightChanged=!0,ae.of(o)}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},Yl=class extends ae{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0));this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r||this.right.height==0?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=t==M.ByHeight?e<o||this.right.height==0:e<l,h=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==M.ByPosNoHeight?M.ByPosNoHeight:M.ByPos;return a?h.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,n,r).join(h)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,M.ByPos,i,n,r);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,r,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&Xl(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),Xl(r,l)}return ae.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ae.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Xl(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof H&&(i=s[e+1])instanceof H&&s.splice(e-1,3,new H(t.length+1+i.length))}var Pu=5,fs=class{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ge?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ge(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?Math.max(0,i.widget.estimatedHeight):0,r=t-e;i.block?this.addBlock(new Dn(r,n,i.type)):(r||n>=Pu)&&this.addLineDeco(n,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ge(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new H(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ge)return e;let t=new ge(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==E.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=E.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ge)&&!this.isCovered?this.nodes.push(new ge(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof ge&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new fs(i,e);return q.spans(t,i,n,r,0),r.finish(i)}};function ku(s,e,t){let i=new _l;return q.compare(s,e,t,i,0),i.changes}var _l=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Qn(e,t,this.changes,5)}};function vu(s,e){let t=s.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),r=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom);for(let l=s.parentNode;l;)if(l.nodeType==1){let a=window.getComputedStyle(l);if((l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)&&a.overflow!="visible"){let h=l.getBoundingClientRect();i=Math.max(i,h.left),n=Math.min(n,h.right),r=Math.max(r,h.top),o=Math.min(o,h.bottom)}l=a.position=="absolute"||a.position=="fixed"?l.offsetParent:l.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:i-t.left,right:n-t.left,top:r-(t.top+e),bottom:o-(t.top+e)}}var $i=class{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e){return b.replace({widget:new Ll(this.size,e)}).range(this.from,this.to)}},Ll=class extends Me{constructor(e,t){super();this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},jn=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentWidth=0,this.heightOracle=new jl,this.scaler=Gl,this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=ae.empty().applyChanges(e.facet(bt),Z.empty,this.heightOracle.setDoc(e.doc),[new Ee(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=b.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineAt(n,0);e.push(new Vt(r,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?Gl:new Ul(this.heightOracle.doc,this.heightMap,this.viewports)}update(e,t=null){let i=this.state;this.state=e.state;let n=this.state.facet(bt),r=e.changedRanges,o=Ee.extendWithRanges(r,ku(e.startState.facet(bt),n,e?e.changes:_.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(n,i.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=l&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.head<a.from||t.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t)),a.eq(this.viewport)||(this.viewport=a,e.flags|=4),this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(e.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes)))),this.computeVisibleRanges(),t&&(this.scrollTo=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e,t){let i=e.dom,n="",r=R.LTR;if(!t){let p=window.getComputedStyle(i);n=p.whiteSpace,r=p.direction=="rtl"?R.RTL:R.LTR,this.paddingTop=parseInt(p.paddingTop)||0,this.paddingBottom=parseInt(p.paddingBottom)||0}let o=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:vu(i,this.paddingTop),l=o.top-this.pixelViewport.top,a=o.bottom-this.pixelViewport.bottom;if(this.pixelViewport=o,this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left,!this.inView)return 0;let h=e.measureVisibleLineHeights(),c=!1,f=0,u=0,d=this.heightOracle;if(!t){let p=e.dom.clientWidth;if(d.mustRefresh(h,n,r)||d.lineWrapping&&Math.abs(p-this.contentWidth)>d.charWidth){let{lineHeight:m,charWidth:O}=e.measureTextSize();c=d.refresh(n,r,m,O,p/O,h),c&&(e.minWidth=0,u|=16)}this.contentWidth!=p&&(this.contentWidth=p,u|=16),l>0&&a>0?f=Math.max(l,a):l<0&&a<0&&(f=Math.min(l,a))}if(d.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(d,0,c,new Bl(this.viewport.from,h)),d.heightChanged&&(u|=2),!this.viewportIsAppropriate(this.viewport,f)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to)){let p=this.getViewport(f,this.scrollTo);(p.from!=this.viewport.from||p.to!=this.viewport.to)&&(this.viewport=p,u|=4)}return this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(u|=this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top,0)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom,0)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new Vt(n.lineAt(o-i*1e3,M.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,M.ByHeight,r,0,0).to);if(t){if(t.head<a.from){let{top:h}=n.lineAt(t.head,M.ByPos,r,0,0);a=new Vt(n.lineAt(h-1e3/2,M.ByHeight,r,0,0).from,n.lineAt(h+(l-o)+1e3/2,M.ByHeight,r,0,0).to)}else if(t.head>a.to){let{bottom:h}=n.lineAt(t.head,M.ByPos,r,0,0);a=new Vt(n.lineAt(h-(l-o)-1e3/2,M.ByHeight,r,0,0).from,n.lineAt(h+1e3/2,M.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Vt(this.heightMap.lineAt(i,M.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,M.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){let{top:n}=this.heightMap.lineAt(e,M.ByPos,this.state.doc,0,0),{bottom:r}=this.heightMap.lineAt(t,M.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new $i(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];return this.heightOracle.direction!=R.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,i=>{if(i.length<1e4)return;let n=Qu(i.from,i.to,this.state);if(n.total<1e4)return;let r,o;if(this.heightOracle.lineWrapping)i.from!=this.viewport.from?r=i.from:r=us(n,(this.visibleTop-i.top)/i.height),i.to!=this.viewport.to?o=i.to:o=us(n,(this.visibleBottom-i.top)/i.height);else{let c=n.total*this.heightOracle.charWidth;r=us(n,this.pixelViewport.left/c),o=us(n,this.pixelViewport.right/c)}let l=this.state.selection.main;l.from<=r&&l.to>=i.from&&(r=l.from),l.from<=i.to&&l.to>=o&&(o=l.to);let a=r-1e4,h=o+1e4;a>i.from+5e3&&t.push(Nl(e,c=>c.from==i.from&&c.to>a-5e3&&c.to<a+5e3)||new $i(i.from,a,this.gapSize(i,a,!0,n))),h<i.to-5e3&&t.push(Nl(e,c=>c.to==i.to&&c.from>h-5e3&&c.from<h+5e3)||new $i(h,i.to,this.gapSize(i,h,!1,n)))}),t}gapSize(e,t,i,n){if(this.heightOracle.lineWrapping){let r=e.height*Vl(n,t);return i?r:e.height-r}else{let r=Vl(n,t);return n.total*this.heightOracle.charWidth*(i?r:1-r)}}updateLineGaps(e){return $i.same(e,this.lineGaps)?0:(this.lineGaps=e,this.lineGapDeco=b.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))),8)}computeVisibleRanges(){let e=this.state.facet(bt);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];q.spans(e,this.viewport.from,this.viewport.to,{span(i,n){t.push({from:i,to:n})},point(){}},20),this.visibleRanges=t}lineAt(e,t){return t+=this.paddingTop,xi(this.heightMap.lineAt(e,M.ByPos,this.state.doc,t,0),this.scaler,t)}lineAtHeight(e,t){return t+=this.paddingTop,xi(this.heightMap.lineAt(this.scaler.fromDOM(e,t),M.ByHeight,this.state.doc,t,0),this.scaler,t)}blockAtHeight(e,t){return t+=this.paddingTop,xi(this.heightMap.blockAt(this.scaler.fromDOM(e,t),this.state.doc,t,0),this.scaler,t)}forEachLine(e,t,i,n){return n+=this.paddingTop,this.heightMap.forEachLine(e,t,this.state.doc,n,0,this.scaler.scale==1?i:r=>i(xi(r,this.scaler,n)))}get contentHeight(){return this.domHeight+this.paddingTop+this.paddingBottom}get domHeight(){return this.scaler.toDOM(this.heightMap.height,this.paddingTop)}},Vt=class{constructor(e,t){this.from=e,this.to=t}eq(e){return this.from==e.from&&this.to==e.to}};function Qu(s,e,t){let i=[],n=s,r=0;return q.spans(t.facet(bt),s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function us({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function Vl(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function Nl(s,e){for(let t of s)if(e(t))return t}var Gl={toDOM(s){return s},fromDOM(s){return s},scale:1},Ul=class{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,M.ByPos,e,0,0).top,c=t.lineAt(a,M.ByPos,e,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e,t){e-=t;for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.top)return r+(e-n)*this.scale+t;if(e<=o.bottom)return o.domTop+(e-o.top)+t;n=o.bottom,r=o.domBottom}}fromDOM(e,t){e-=t;for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale+t;if(e<=o.domBottom)return o.top+(e-o.domTop)+t;n=o.bottom,r=o.domBottom}}};function xi(s,e,t){if(e.scale==1)return s;let i=e.toDOM(s.top,t),n=e.toDOM(s.bottom,t);return new ze(s.from,s.length,i,n-i,Array.isArray(s.type)?s.type.map(r=>xi(r,e,t)):s.type)}var zl=S.define({combine:s=>s.join(" ")}),Fl=S.define({combine:s=>s.indexOf(!0)>-1}),Bn=Ne.newName(),Hl=Ne.newName(),Jl=Ne.newName(),Kl={"&light":"."+Hl,"&dark":"."+Jl};function Yn(s,e,t){return new Ne(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}var Wu=Yn("."+Bn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none"},".cm-lineWrapping":{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none",display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kl),Tu={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Xn=Q.ie&&Q.ie_version<=11,ea=class{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.ignoreSelection=new Do,this.delayedFlush=-1,this.queue=[],this.lastFlush=0,this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this._selectionRange=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);this._selectionRange=null,(Q.ie&&Q.ie_version<=11||Q.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Xn&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(e){this.intersecting&&this.flush(),this.onScrollChanged(e)}onSelectionChange(e){this.lastFlush<Date.now()-50&&(this._selectionRange=null);let{view:t}=this,i=this.selectionRange;if(t.state.facet(nt)?t.root.activeElement!=this.dom:!On(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||(Q.ie&&Q.ie_version<=11&&!t.state.selection.main.empty&&i.focusNode&&os(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush())}get selectionRange(){if(!this._selectionRange){let{root:e}=this.view,t=ns(e);Q.safari&&e.nodeType==11&&jf()==this.view.contentDOM&&(t=Iu(this.view)||t),this._selectionRange=t}return this._selectionRange}setSelectionRange(e,t){var i;((i=this._selectionRange)===null||i===void 0?void 0:i.type)||(this._selectionRange={anchorNode:e.node,anchorOffset:e.offset,focusNode:t.node,focusOffset:t.offset})}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Tu),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),Xn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),Xn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clearSelection(){this.ignoreSelection.set(this.selectionRange)}clear(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}flush(){if(this.delayedFlush>=0)return;this.lastFlush=Date.now();let e=this.queue;for(let a of this.observer.takeRecords())e.push(a);e.length&&(this.queue=[]);let t=this.selectionRange,i=!this.ignoreSelection.eq(t)&&On(this.dom,t);if(e.length==0&&!i)return;let n=-1,r=-1,o=!1;for(let a of e){let h=this.readMutation(a);!h||(h.typeOver&&(o=!0),n==-1?{from:n,to:r}=h:(n=Math.min(h.from,n),r=Math.max(h.to,r)))}let l=this.view.state;(n>-1||i)&&this.onChange(n,r,o),this.view.state==l&&(this.view.docView.dirty&&(this.ignore(()=>this.view.docView.sync()),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(),e.type=="childList"){let i=ta(t,e.previousSibling||e.target.previousSibling,-1),n=ta(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}};function ta(s,e,t){for(;e;){let i=N.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Iu(s){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,l=s.docView.domAtPos(s.state.selection.main.anchor);return os(l.node,l.offset,r,o)&&([i,n,r,o]=[r,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:o}}function Au(s,e,t,i){let n,r,o=s.state.selection.main,l;if(e>-1&&(l=s.docView.domBoundsAround(e,t,0))){let{from:a,to:h}=l,c=s.docView.impreciseHead||s.docView.impreciseAnchor?[]:Cu(s),f=new ia(c,s);f.readRange(l.startDOM,l.endDOM),r=qu(c,a);let u=o.from,d=null;(s.inputState.lastKeyCode===8&&s.inputState.lastKeyTime>Date.now()-100||Q.android&&f.text.length<h-a)&&(u=o.to,d="end");let p=Ru(s.state.sliceDoc(a,h),f.text,u-a,d);p&&(n={from:a+p.from,to:a+p.toA,insert:s.state.toText(f.text.slice(p.from,p.toB))})}else if(s.hasFocus||!s.state.facet(nt)){let a=s.observer.selectionRange,{impreciseHead:h,impreciseAnchor:c}=s.docView,f=h&&h.node==a.focusNode&&h.offset==a.focusOffset||!mn(s.contentDOM,a.focusNode)?s.state.selection.main.head:s.docView.posFromDOM(a.focusNode,a.focusOffset),u=c&&c.node==a.anchorNode&&c.offset==a.anchorOffset||!mn(s.contentDOM,a.anchorNode)?s.state.selection.main.anchor:s.docView.posFromDOM(a.anchorNode,a.anchorOffset);(f!=o.head||u!=o.anchor)&&(r=g.single(u,f))}if(!(!n&&!r)){if(!n&&i&&!o.empty&&r&&r.main.empty?n={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4&&(n={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,n.from).append(n.insert).append(s.state.doc.slice(n.to,o.to))}),n){let a=s.state;if(Q.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&di(s.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&di(s.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&di(s.contentDOM,"Delete",46))||Q.ios&&s.inputState.flushIOSKey(s))return;let h=n.insert.toString();if(s.state.facet(rl).some(f=>f(s,n.from,n.to,h)))return;s.inputState.composing>=0&&s.inputState.composing++;let c;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)){let f=o.from<n.from?a.sliceDoc(o.from,n.from):"",u=o.to>n.to?a.sliceDoc(n.to,o.to):"";c=a.replaceSelection(s.state.toText(f+n.insert.sliceString(0,void 0,s.state.lineBreak)+u))}else{let f=a.changes(n);c={changes:f,selection:r&&!a.selection.main.eq(r.main)&&r.main.to<=f.newLength?a.selection.replaceRange(r.main):void 0}}s.dispatch(c,{scrollIntoView:!0,annotations:T.userEvent.of("input")})}else if(r&&!r.main.eq(o)){let a=!1,h;s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="keyboardselection"?a=!0:h=T.userEvent.of(s.inputState.lastSelectionOrigin)),s.dispatch({selection:r,scrollIntoView:a,annotations:h})}}}function Ru(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}return o<r&&s.length<e.length?(r-=t<=r&&t>=o?r-t:0,l=r+(l-o),o=r):l<r&&(r-=t<=r&&t>=l?r-t:0,o=r+(o-l),l=r),{from:r,toA:o,toB:l}}var ia=class{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineBreak=t.state.lineBreak}readRange(e,t){if(!e)return;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let r=n.nextSibling;if(r==t)break;let o=N.get(n),l=N.get(r);((o?o.breakAfter:sa(n))||(l?l.breakAfter:sa(r))&&!(n.nodeName=="BR"&&!n.cmIgnore))&&(this.text+=this.lineBreak),n=r}this.findPointBefore(i,t)}readNode(e){if(e.cmIgnore)return;let t=N.get(e),i=t&&t.overrideDOMText,n;i!=null?n=i.sliceString(0,void 0,this.lineBreak):e.nodeType==3?n=e.nodeValue:e.nodeName=="BR"?n=e.nextSibling?this.lineBreak:"":e.nodeType==1&&this.readRange(e.firstChild,null),n!=null&&(this.findPointIn(e,n.length),this.text+=n,Q.chrome&&this.view.inputState.lastKeyCode==13&&!e.nextSibling&&/\n\n$/.test(this.text)&&(this.text=this.text.slice(0,-1)))}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointIn(e,t){for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t))}};function sa(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}var _n=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}};function Cu(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new _n(t,i)),(n!=t||r!=i)&&e.push(new _n(n,r))),e}function qu(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?g.single(t+e,i+e):null}var k=class{constructor(e={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||document,this.viewState=new jn(e.state||I.create()),this.plugins=this.state.facet(mi).map(t=>new Ue(t).update(this)),this.observer=new ea(this,(t,i,n)=>{Au(this,t,i,n)},t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new Sl(this),this.docView=new Rn(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,Mu(),this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof T?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i,n=this.state;for(let o of e){if(o.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=o.state}if(n.facet(I.phrases)!=this.state.facet(I.phrases))return this.setState(n);i=new In(this,n,e);let r;try{this.updateState=2,r=e.some(o=>o.scrollIntoView)?n.selection.main:null,this.viewState.update(i,r),this.bidiCache=wi.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Oi)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e)}finally{this.updateState=0}if((t||r||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure(),!i.empty)for(let o of this.state.facet(Tn))o(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;try{for(let t of this.plugins)t.destroy(this);this.viewState=new jn(e),this.plugins=e.facet(mi).map(t=>new Ue(t).update(this)),this.docView=new Rn(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(mi),i=e.state.facet(mi);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new Ue(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.inputState.ensureHandlers(this)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n]=this.plugins[n].update(this)}measure(){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=-1;let e=null;try{for(let t=0;;t++){this.updateState=1;let i=this.viewState.measure(this.docView,t>0),n=this.measureRequests;if(!i&&!n.length&&this.viewState.scrollTo==null)break;if(this.measureRequests=[],t>5){console.warn("Viewport failed to stabilize");break}let r=n.map(l=>{try{return l.read(this)}catch(a){return Se(this.state,a),na}}),o=new In(this,this.state);o.flags|=i,e?e.flags|=i:e=o,this.updateState=2,o.empty||(this.updatePlugins(o),this.inputState.update(o)),this.updateAttrs(),i&&this.docView.update(o);for(let l=0;l<n.length;l++)if(r[l]!=na)try{n[l].write(r[l],this)}catch(a){Se(this.state,a)}if(this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null),!(i&4)&&this.measureRequests.length==0)break}}finally{this.updateState=0}if(this.measureScheduled=-1,e&&!e.empty)for(let t of this.state.facet(Tn))t(e)}get themeClasses(){return Bn+" "+(this.state.facet(Fl)?Jl:Hl)+" "+this.state.facet(zl)}updateAttrs(){let e=pi(this.state.facet(al),{class:"cm-editor cm-wrap"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});vn(this.dom,this.editorAttrs,e),this.editorAttrs=e;let t=pi(this.state.facet(hl),{spellcheck:"false",autocorrect:"off",autocapitalize:"off",contenteditable:String(this.state.facet(nt)),class:"cm-content",style:`${Q.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"});vn(this.contentDOM,this.contentAttrs,t),this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(k.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Oi),Ne.mount(this.root,this.styleModules.concat(Wu).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure()}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}pluginField(e){let t=[];for(let i of this.plugins)i.update(this).takeField(e,t);return t}plugin(e){for(let t of this.plugins)if(t.spec==e)return t.update(this).value;return null}blockAtHeight(e,t){return this.readMeasured(),this.viewState.blockAtHeight(e,Ln(t,this.contentDOM))}visualLineAtHeight(e,t){return this.readMeasured(),this.viewState.lineAtHeight(e,Ln(t,this.contentDOM))}viewportLines(e,t){let{from:i,to:n}=this.viewport;this.viewState.forEachLine(i,n,e,Ln(t,this.contentDOM))}visualLineAt(e,t=0){return this.viewState.lineAt(e,t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Mn(this,e,yl(this,e,t,i))}moveByGroup(e,t){return Mn(this,e,yl(this,e,t,i=>fu(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return cu(this,e,t,i)}moveVertically(e,t,i){return Mn(this,e,uu(this,e,t,i))}scrollPosIntoView(e){this.viewState.scrollTo=g.cursor(e),this.requestMeasure()}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e){return this.readMeasured(),wl(this,e)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Pt.find(r,e-n.from,-1,t)];return xn(i,o.dir==R.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zu)return gl(e.length);let t=this.textDirection;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=nu(e.text,this.textDirection);return this.bidiCache.push(new wi(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||Q.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{jo(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static domEventHandlers(e){return L.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ne.newName(),n=[zl.of(i),Oi.of(Yn(`.${i}`,e))];return t&&t.dark&&n.push(Fl.of(!0)),n}static baseTheme(e){return jt.fallback(Oi.of(Yn("."+Bn,e,Kl)))}};k.styleModule=Oi;k.inputHandler=rl;k.exceptionSink=nl;k.updateListener=Tn;k.editable=nt;k.mouseSelectionStyle=sl;k.dragMovesSelection=il;k.clickAddsSelectionRange=tl;k.decorations=bt;k.contentAttributes=hl;k.editorAttributes=al;k.lineWrapping=k.contentAttributes.of({class:"cm-lineWrapping"});k.announce=W.define();var Zu=4096;function Ln(s,e){return s==null?e.getBoundingClientRect().top:s}var Vn=-1;function Mu(){window.addEventListener("resize",()=>{Vn==-1&&(Vn=setTimeout(Eu,50))})}function Eu(){Vn=-1;let s=document.querySelectorAll(".cm-content");for(let e=0;e<s.length;e++){let t=N.get(s[e]);t&&t.editorView.requestMeasure()}}var na={},wi=class{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:R.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new wi(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}},Du=typeof navigator=="undefined"?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function ju(s,e){let t=s.split(/-(?!$)/),i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<t.length-1;++a){let h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))r=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Nn(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}var Bu=k.domEventHandlers({keydown(s,e){return oa(ra(e.state),s,e,"editor")}}),ds=S.define({enables:Bu}),la=new WeakMap;function ra(s){let e=s.facet(ds),t=la.get(e);return t||la.set(e,t=Yu(e.reduce((i,n)=>i.concat(n),[]))),t}function aa(s,e,t){return oa(ra(s.state),e,s,t)}var rt=null,Xu=4e3;function Yu(s,e=Du){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,h)=>{let c=t[o]||(t[o]=Object.create(null)),f=l.split(/ (?!$)/).map(p=>ju(p,e));for(let p=1;p<f.length;p++){let m=f.slice(0,p).join(" ");n(m,!0),c[m]||(c[m]={preventDefault:!0,commands:[O=>{let y=rt={view:O,prefix:m,scope:o};return setTimeout(()=>{rt==y&&(rt=null)},Xu),!0}]})}let u=f.join(" ");n(u,!1);let d=c[u]||(c[u]={preventDefault:!1,commands:[]});d.commands.push(a),h&&(d.preventDefault=!0)};for(let o of s){let l=o[e]||o.key;if(!!l)for(let a of o.scope?o.scope.split(" "):["editor"])r(a,l,o.run,o.preventDefault),o.shift&&r(a,"Shift-"+l,o.shift,o.preventDefault)}return t}function oa(s,e,t,i){let n=Df(e),r=n.length==1&&n!=" ",o="",l=!1;rt&&rt.view==t&&rt.scope==i&&(o=rt.prefix+" ",(l=bl.indexOf(e.keyCode)<0)&&(rt=null));let a=f=>{if(f){for(let u of f.commands)if(u(t))return!0;f.preventDefault&&(l=!0)}return!1},h=s[i],c;if(h){if(a(h[o+Nn(n,e,!r)]))return!0;if(r&&(e.shiftKey||e.altKey||e.metaKey)&&(c=st[e.keyCode])&&c!=n){if(a(h[o+Nn(c,e,!0)]))return!0}else if(r&&e.shiftKey&&a(h[o+Nn(n,e,!0)]))return!0}return l}var ha=!Q.ios,yi=S.define({combine(s){return Ve(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function ca(s={}){return[yi.of(s),_u,Lu]}var Gn=class{constructor(e,t,i,n,r){this.left=e,this.top=t,this.width=i,this.height=n,this.className=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}},_u=L.fromClass(class{constructor(s){this.view=s,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=s.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=s.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),s.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(yi).cursorBlinkRate+"ms"}update(s){let e=s.startState.facet(yi)!=s.state.facet(yi);(e||s.selectionSet||s.geometryChanged||s.viewportChanged)&&this.view.requestMeasure(this.measureReq),s.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:s}=this.view,e=s.facet(yi),t=s.selection.ranges.map(n=>n.empty?[]:Vu(this.view,n)).reduce((n,r)=>n.concat(r)),i=[];for(let n of s.selection.ranges){let r=n==s.selection.main;if(n.empty?!r||ha:e.drawRangeCursor){let o=Nu(this.view,n,r);o&&i.push(o)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:s,cursors:e}){if(s.length!=this.rangePieces.length||s.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of s)this.selectionLayer.appendChild(t.draw());this.rangePieces=s}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),fa={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};ha&&(fa[".cm-line"].caretColor="transparent !important");var Lu=jt.override(k.theme(fa));function ua(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==R.LTR?e.left:e.right-s.scrollDOM.clientWidth)-s.scrollDOM.scrollLeft,top:e.top-s.scrollDOM.scrollTop}}function da(s,e,t){let i=g.cursor(e);return{from:Math.max(t.from,s.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,s.moveToLineBoundary(i,!0,!0).from),type:E.Text}}function Un(s,e){let t=s.visualLineAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==E.Text))return i}return t}function Vu(s,e){if(e.to<=s.viewport.from||e.from>=s.viewport.to)return[];let t=Math.max(e.from,s.viewport.from),i=Math.min(e.to,s.viewport.to),n=s.textDirection==R.LTR,r=s.contentDOM,o=r.getBoundingClientRect(),l=ua(s),a=window.getComputedStyle(r.firstChild),h=o.left+parseInt(a.paddingLeft),c=o.right-parseInt(a.paddingRight),f=Un(s,t),u=Un(s,i),d=f.type==E.Text?f:null,p=u.type==E.Text?u:null;if(s.lineWrapping&&(d&&(d=da(s,t,d)),p&&(p=da(s,i,p))),d&&p&&d.from==p.from)return O(y(e.from,e.to,d));{let w=d?y(e.from,null,d):C(f,!1),P=p?y(null,e.to,p):C(u,!0),v=[];return(d||f).to<(p||u).from-1?v.push(m(h,w.bottom,c,P.top)):w.bottom<P.top&&Un(s,(w.bottom+P.top)/2).type==E.Text&&(w.bottom=P.top=(w.bottom+P.top)/2),O(w).concat(v).concat(O(P))}function m(w,P,v,A){return new Gn(w-l.left,P-l.top,v-w,A-P,"cm-selectionBackground")}function O({top:w,bottom:P,horizontal:v}){let A=[];for(let G=0;G<v.length;G+=2)A.push(m(v[G],w,v[G+1],P));return A}function y(w,P,v){let A=1e9,G=-1e9,X=[];function ke(re,U,$e,ie,xe){let ye=s.coordsAtPos(re,re==v.to?-2:2),it=s.coordsAtPos($e,$e==v.from?2:-2);A=Math.min(ye.top,it.top,A),G=Math.max(ye.bottom,it.bottom,G),xe==R.LTR?X.push(n&&U?h:ye.left,n&&ie?c:it.right):X.push(!n&&ie?h:it.left,!n&&U?c:ye.right)}let fe=w!=null?w:v.from,ve=P!=null?P:v.to;for(let re of s.visibleRanges)if(re.to>fe&&re.from<ve)for(let U=Math.max(re.from,fe),$e=Math.min(re.to,ve);;){let ie=s.state.doc.lineAt(U);for(let xe of s.bidiSpans(ie)){let ye=xe.from+ie.from,it=xe.to+ie.from;if(ye>=$e)break;it>U&&ke(Math.max(ye,U),w==null&&ye<=fe,Math.min(it,$e),P==null&&it>=ve,xe.dir)}if(U=ie.to+1,U>=$e)break}return X.length==0&&ke(fe,w==null,ve,P==null,s.textDirection),{top:A,bottom:G,horizontal:X}}function C(w,P){let v=o.top+(P?w.top:w.bottom);return{top:v,bottom:v,horizontal:[]}}}function Nu(s,e,t){let i=s.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=ua(s);return new Gn(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function pa(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,o+l.index+l[0].length,l)}var ga=class{constructor(e){let{regexp:t,decoration:i,boundary:n}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=n}createDeco(e){let t=new Ae;for(let{from:i,to:n}of e.visibleRanges)pa(e.state.doc,this.regexp,i,n,(r,o,l)=>t.add(r,o,this.getDeco(l,e,r)));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(r.from,a.from),f=Math.min(r.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){f=l;break}}let u=[],d;if(a==h)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;){let p=d.index+a.from;u.push(this.getDeco(d,e,p).range(p,p+d[0].length))}else pa(e.state.doc,this.regexp,c,f,(p,m,O)=>u.push(this.getDeco(O,e,p).range(p,m)));t=t.update({filterFrom:c,filterTo:f,filter:()=>!1,add:u})}}return t}},zn=/x/.unicode!=null?"gu":"g",Gu=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029\uFEFF￹-￼]`,zn),Uu={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Fn=null;function zu(){var s;if(Fn==null&&typeof document!="undefined"&&document.body){let e=document.body.style;Fn=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Fn||!1}var ps=S.define({combine(s){let e=Ve(s,{render:null,specialChars:Gu,addSpecialChars:null});return(e.replaceTabs=!zu())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zn)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zn)),e}});function ma(s={}){return[ps.of(s),Fu()]}var Oa=null;function Fu(){return Oa||(Oa=L.fromClass(class{constructor(s){this.view=s,this.decorations=b.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(ps)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new ga({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=z(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,a=gt(n.sliceString(o.from,i),0,l);return b.replace({widget:new xa((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[r]||(this.decorationCache[r]=b.replace({widget:new $a(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(ps);s.startState.facet(ps)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}var Hu="•";function Ju(s){return s>=32?Hu:s==10?"␤":String.fromCharCode(9216+s)}var $a=class extends Me{constructor(e,t){super();this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Ju(this.code),i=e.state.phrase("Control character")+" "+(Uu[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}},xa=class extends Me{constructor(e){super();this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function wa(){return Ku}var ed=b.line({attributes:{class:"cm-activeLine"}}),Ku=L.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){if(!i.empty)return b.none;let n=s.visualLineAt(i.head);n.from>e&&(t.push(ed.range(n.from)),e=n.from)}return b.set(t)}},{decorations:s=>s.decorations}),gs=1024,td=0,ya=new WeakMap,D=class{constructor({deserialize:e}={}){this.id=td++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new D({deserialize:e=>e})}static number(){return new D({deserialize:Number})}static flag(){return new D({deserialize:()=>!0})}set(e,t){return e[this.id]=t,e}add(e){return typeof e!="function"&&(e=J.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}};D.closedBy=new D({deserialize:s=>s.split(" ")});D.openedBy=new D({deserialize:s=>s.split(" ")});D.group=new D({deserialize:s=>s.split(" ")});var id=Object.create(null),J=class{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):id,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new J(e.name||"",t,e.id,i);if(e.props)for(let r of e.props)Array.isArray(r)||(r=r(n)),r&&r[0].set(t,r[1]);return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(D.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(D.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}};J.none=new J("",Object.create(null),0,8);var Si=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);o&&(n||(n=Object.assign({},i.props)),o[0].set(n,o[1]))}t.push(n?new J(i.name,n,i.id,i.flags):i)}return new Si(t)}},V=class{constructor(e,t,i,n){this.type=e,this.children=t,this.positions=i,this.length=n}toString(){let e=this.children.map(t=>t.toString()).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(e,t=0){let i=e!=null&&ya.get(this)||this.topNode,n=new bi(i);return e!=null&&(n.moveTo(e,t),ya.set(this,n._tree)),n}fullCursor(){return new bi(this.topNode,!0)}get topNode(){return new Nt(this,0,0,null)}resolve(e,t=0){return this.cursor(e,t).node}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e;for(let o=this.cursor();;){let l=!1;if(o.from<=r&&o.to>=n&&(o.type.isAnonymous||t(o.type,o.from,o.to)!==!1)){if(o.firstChild())continue;o.type.isAnonymous||(l=!0)}for(;l&&i&&i(o.type,o.from,o.to),l=o.type.isAnonymous,!o.nextSibling();){if(!o.parent())return;l=!0}}}balance(e=gs){return this.children.length<=Hn?this:Jn(this.type,J.none,this.children,this.positions,0,this.children.length,0,e,this.length,0)}static build(e){return sd(e)}};V.empty=new V(J.none,[],[],0);function Kn(s,e){return e&&(s.contextHash=e),s}var kt=class{constructor(e,t,i,n=J.none){this.buffer=e,this.length=t,this.set=i,this.type=n}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n){let{buffer:r}=this,o=-1;for(let l=e;l!=t;l=r[l+3])if(n!=-1e8){let a=r[l+1],h=r[l+2];if(i>0){if(h>n&&(o=l),h>n)break}else if(a<n&&(o=l),h>=n)break}else if(o=l,i>0)break;return o}},Nt=class{constructor(e,t,i,n){this.node=e,this.from=t,this.index=i,this._parent=n}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(e,t,i,n=!1){for(let r=this;;){for(let{children:o,positions:l}=r.node,a=t>0?o.length:-1;e!=a;e+=t){let h=o[e],c=l[e]+r.from;if(!(i!=-1e8&&(t<0?c>=i:c+h.length<=i))){if(h instanceof kt){let f=h.findChild(0,h.buffer.length,t,i==-1e8?-1e8:i-c);if(f>-1)return new ot(new Sa(r,h,e,c),null,f)}else if(n||!h.type.isAnonymous||er(h)){let f=new Nt(h,c,e,r);return n||!f.type.isAnonymous?f:f.nextChild(t<0?h.children.length-1:0,t,i)}}}if(n||!r.type.isAnonymous||(e=r.index+t,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(e){return this.nextChild(0,1,e)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new bi(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}getChild(e,t=null,i=null){let n=ms(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ms(this,e,t,i)}toString(){return this.node.toString()}};function ms(s,e,t,i){let n=s.cursor,r=[];if(!n.firstChild())return r;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}var Sa=class{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}},ot=class{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t==-1e8?-1e8:t-this.context.start);return n<0?null:new ot(this.context,this,n)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(e){return this.child(1,e)}childBefore(e){return this.child(-1,e)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,-1)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ot(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ot(this.context,this._parent,e.findChild(t,this.index,-1,-1e8))}get cursor(){return new bi(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=ms(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ms(this,e,t,i)}},bi=class{constructor(e,t=!1){if(this.full=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Nt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Nt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(e,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,this.full));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t==-1e8?-1e8:t-this.buffer.start);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(e){return this.enter(1,e)}childBefore(e){return this.enter(-1,e)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree._parent.nextChild(this._tree.index+e,e,-1e8,this.full)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,-1e8))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,-1e8,this.full)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)for(let r=t+e,o=e<0?-1:i.node.children.length;r!=o;r+=e){let l=i.node.children[r];if(this.full||!l.type.isAnonymous||l instanceof kt||er(l))return!1}return!0}move(e){if(this.enter(e,-1e8))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;!(t<0?!this.childBefore(e):!this.childAfter(e));)if(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}}for(let n=i;n<this.stack.length;n++)t=new ot(this.buffer,t,this.stack[n]);return this.bufferNode=new ot(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}};function er(s){return s.children.some(e=>!e.type.isAnonymous||e instanceof kt||er(e))}var Os=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Os(this.buffer,this.index)}},Hn=8;function sd(s){var e;let{buffer:t,nodeSet:i,topID:n=0,maxBufferLength:r=gs,reused:o=[],minRepeatType:l=i.types.length}=s,a=Array.isArray(t)?new Os(t,t.length):t,h=i.types,c=0;function f(y,C,w,P,v){let{id:A,start:G,end:X,size:ke}=a,fe=G-y;if(ke<0){ke==-1?(w.push(o[A]),P.push(fe)):c=A,a.next();return}let ve=h[A],re,U;if(X-G<=r&&(U=u(a.pos-C,v))){let $e=new Uint16Array(U.size-U.skip),ie=a.pos-U.size,xe=$e.length;for(;a.pos>ie;)xe=d(U.start,$e,xe,v);re=new kt($e,X-U.start,i,v<0?J.none:h[v]),fe=U.start-y}else{let $e=a.pos-ke;a.next();let ie=[],xe=[],ye=A>=l?A:-1;for(;a.pos>$e;)a.id==ye?a.next():f(G,$e,ie,xe,ye);ie.reverse(),xe.reverse(),ye>-1&&ie.length>Hn?re=Jn(ve,ve,ie,xe,0,ie.length,0,r,X-G,c):re=Kn(new V(ve,ie,xe,X-G),c)}w.push(re),P.push(fe)}function u(y,C){let w=a.fork(),P=0,v=0,A=0,G=w.end-r,X={size:0,start:0,skip:0};e:for(let ke=w.pos-y;w.pos>ke;){if(w.id==C){X.size=P,X.start=v,X.skip=A,A+=4,P+=4,w.next();continue}let fe=w.size,ve=w.pos-fe;if(fe<0||ve<ke||w.start<G)break;let re=w.id>=l?4:0,U=w.start;for(w.next();w.pos>ve;){if(w.size<0)break e;w.id>=l&&(re+=4),w.next()}v=U,P+=fe,A+=re}return(C<0||P==y)&&(X.size=P,X.start=v,X.skip=A),X.size>4?X:void 0}function d(y,C,w,P){let{id:v,start:A,end:G,size:X}=a;if(a.next(),v==P)return w;let ke=w;if(X>4){let fe=a.pos-(X-4);for(;a.pos>fe;)w=d(y,C,w,P)}return v<l&&(C[--w]=ke,C[--w]=G-y,C[--w]=A-y,C[--w]=v),w}let p=[],m=[];for(;a.pos>0;)f(s.start||0,0,p,m,-1);let O=(e=s.length)!==null&&e!==void 0?e:p.length?m[0]+p[0].length:0;return new V(h[n],p.reverse(),m.reverse(),O)}function Jn(s,e,t,i,n,r,o,l,a,h){let c=[],f=[];if(a<=l)for(let u=n;u<r;u++)c.push(t[u]),f.push(i[u]-o);else{let u=Math.max(l,Math.ceil(a*1.5/Hn));for(let d=n;d<r;){let p=d,m=i[d];for(d++;d<r&&!(i[d]+t[d].length-m>u);d++);if(d==p+1){let O=t[p];if(O instanceof V&&O.type==e&&O.length>u<<1){for(let y=0;y<O.children.length;y++)c.push(O.children[y]),f.push(O.positions[y]+m-o);continue}c.push(O)}else if(d==p+1)c.push(t[p]);else{let O=Jn(e,e,t,i,p,d,m,l,i[d-1]+t[d-1].length-m,h);e!=J.none&&!nd(O.children,e)&&(O=Kn(new V(J.none,O.children,O.positions,O.length),h)),c.push(O)}f.push(m-o)}}return Kn(new V(s,c,f,a),h)}function nd(s,e){for(let t of s)if(t.type==e)return!0;return!1}var lt=class{constructor(e,t,i,n,r){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=r}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null,l=0,a=0,h=0;for(;;){let c=l<t.length?t[l++]:null,f=c?c.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let u=o;if(a>=u.from||f<=u.to||h){let d=Math.max(u.from,a)-h,p=Math.min(u.to,f)-h;u=d>=p?null:new lt(d,p,u.tree,u.offset+h,(l>0?1:0)|(c?2:0))}if(u&&n.push(u),o.to>f)break;o=r<e.length?e[r++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return n}static addTree(e,t=[],i=!1){let n=[new lt(0,e.length,e,0,i?2:0)];for(let r of t)r.to>e.length&&n.push(r);return n}};function tr(s){return new $s(s)}var $s=class{constructor(e,t=e.length){this.string=e,this.length=t}get(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)}lineAfter(e){if(e<0)return"";let t=this.string.indexOf(`
`,e);return this.string.slice(e,t<0?this.length:Math.min(t,this.length))}read(e,t){return this.string.slice(e,Math.min(this.length,t))}clip(e){return new $s(this.string,e)}},ir=new D;function rd(s){return S.define({combine:s?e=>e.concat(s):void 0})}var Te=class{constructor(e,t,i,n=[]){this.data=e,this.topNode=i,I.prototype.hasOwnProperty("tree")||Object.defineProperty(I.prototype,"tree",{get(){return me(this)}}),this.parser=t,this.extension=[Fe.of(this),I.languageData.of((r,o)=>r.facet(ba(r,o)))].concat(n)}isActiveAt(e,t){return ba(e,t)==this.data}findRegions(e){let t=e.facet(Fe);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[];return me(e).iterate({enter:(n,r,o)=>{if(n.isTop&&n.prop(ir)==this.data)return i.push({from:r,to:o}),!1}}),i}get allowsNesting(){return!0}parseString(e){let t=Z.of(e.split(`
`)),i=this.parser.startParse(new Pi(t),0,new vt(this.parser,I.create({doc:t}),[],V.empty,{from:0,to:e.length},[],null)),n;for(;!(n=i.advance()););return n}};Te.setState=W.define();function ba(s,e){let t=s.facet(Fe);if(!t)return null;if(!t.allowsNesting)return t.data;let n=me(s).resolve(e,-1);for(;n;){let r=n.type.prop(ir);if(r)return r;n=n.parent}return t.data}var Gt=class extends Te{constructor(e,t){super(e,t,t.topNode);this.parser=t}static define(e){let t=rd(e.languageData);return new Gt(t,e.parser.configure({props:[ir.add(i=>i.isTop?t:void 0)]}))}configure(e){return new Gt(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasNested}};function me(s){let e=s.field(Te.state,!1);return e?e.tree:V.empty}var Pi=class{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.prevString="",this.cursor=e.iter()}syncTo(e){return e<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.prevString=e==this.cursorPos?this.string:"",this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}get(e){if(e>=this.length)return-1;let t=this.cursorPos-this.string.length;if(e<t||e>=this.cursorPos){if(e<t&&e>=t-this.prevString.length)return this.prevString.charCodeAt(e-(t-this.prevString.length));t=this.syncTo(e)}return this.string.charCodeAt(e-t)}lineAfter(e){if(e>=this.length||e<0)return"";let t=this.cursorPos-this.string.length;return(e<t||e>=this.cursorPos)&&(t=this.syncTo(e)),this.cursor.lineBreak?"":this.string.slice(e-t,Math.min(this.length-t,this.string.length))}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}clip(e){return new Pi(this.doc,e)}},vt=class{constructor(e,t,i=[],n,r,o,l){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.viewport=r,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}work(e,t){if(this.tree!=V.empty&&(t==null?this.tree.length==this.state.doc.length:this.tree.length>=t))return this.takeTree(),!0;this.parse||(this.parse=this.parser.startParse(new Pi(this.state.doc),0,this));let i=Date.now()+e;for(;;){let n=this.parse.advance();if(n)return this.fragments=this.withoutTempSkipped(lt.addTree(n)),this.parse=null,this.tree=n,!0;if(t!=null&&this.parse.pos>=t)return this.takeTree(),!0;if(Date.now()>i)return!1}}takeTree(){this.parse&&this.parse.pos>this.tree.length&&(this.tree=this.parse.forceFinish(),this.fragments=this.withoutTempSkipped(lt.addTree(this.tree,this.fragments,!0)))}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Pa(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,viewport:r,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((a,h,c,f)=>l.push({fromA:a,toA:h,fromB:c,toB:f})),i=lt.applyChanges(i,l),n=V.empty,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){o=[];for(let a of this.skipped){let h=e.mapPos(a.from,1),c=e.mapPos(a.to,-1);h<c&&o.push({from:h,to:c})}}}return new vt(this.parser,t,i,n,r,o,this.scheduleOn)}updateViewport(e){this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=Pa(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length<t}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return{startParse(t,i,n){return{pos:i,advance(){let r=n;return r.tempSkipped.push({from:i,to:t.length}),e&&(r.scheduleOn=r.scheduleOn?Promise.all([r.scheduleOn,e]):e),this.pos=t.length,new V(J.none,[],[],t.length-i)},forceFinish(){return this.advance()}}}}}movedPast(e){return this.tree.length<e&&this.parse&&this.parse.pos>=e}};vt.skippingParser=vt.getSkippingParser();function Pa(s,e,t){return lt.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}var Qt=class{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged)return this;let t=this.context.changes(e.changes,e.state),i=this.context.tree.length==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.tree.length),t.viewport.to);return t.work(25,i)||t.takeTree(),new Qt(t)}static init(e){let t=new vt(e.facet(Fe).parser,e,[],V.empty,{from:0,to:e.doc.length},[],null);return t.work(25)||t.takeTree(),new Qt(t)}};Te.state=K.define({create:Qt.init,update(s,e){for(let t of e.effects)if(t.is(Te.setState))return t.value;return e.startState.facet(Fe)!=e.state.facet(Fe)?Qt.init(e.state):s.apply(e)}});var od=typeof window!="undefined"&&window.requestIdleCallback||((s,{timeout:e})=>setTimeout(s,e)),ld=typeof window!="undefined"&&window.cancelIdleCallback||clearTimeout,ad=L.fromClass(class{constructor(e){this.view=e,this.working=-1,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Te.state).context;e.viewportChanged&&(t.updateViewport(e.view.viewport)&&t.reset(),this.view.viewport.to>t.tree.length&&this.scheduleWork()),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working>-1)return;let{state:e}=this.view,t=e.field(Te.state),i=t.context.fragments;t.tree.length>=e.doc.length&&i.length&&i[0].from==0&&i[0].to>=e.doc.length||(this.working=od(this.work,{timeout:500}))}work(e){this.working=-1;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Te.state);if(r.tree.length>=n+1e6)return;let o=Math.min(this.chunkBudget,e?Math.max(25,e.timeRemaining()):100),l=r.context.work(o,n+1e6);this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0||r.context.movedPast(n))&&(r.context.takeTree(),this.view.dispatch({effects:Te.setState.of(new Qt(r.context))})),!l&&this.chunkBudget>0&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(e.scheduleOn.then(()=>this.scheduleWork()),e.scheduleOn=null)}destroy(){this.working>=0&&ld(this.working)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fe=S.define({combine(s){return s.length?s[0]:null},enables:[Te.state,ad]}),sr=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}},hd=S.define(),xs=S.define({combine:s=>{if(!s.length)return"  ";if(!/^(?: +|\t+)$/.test(s[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return s[0]}});function ki(s){let e=s.facet(xs);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Ut(s,e){let t="",i=s.tabSize;if(s.facet(xs).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function ws(s,e){s instanceof I&&(s=new zt(s));for(let i of s.state.facet(hd)){let n=i(s,e);if(n!=null)return n}let t=me(s.state);return t?cd(s,t,e):null}var zt=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=ki(e)}textAfterPos(e){var t,i;let n=(t=this.options)===null||t===void 0?void 0:t.simulateBreak;return e==n&&((i=this.options)===null||i===void 0?void 0:i.simulateDoubleBreak)?"":this.state.sliceDoc(e,Math.min(e+100,n!=null&&n>e?n:1e9,this.state.doc.lineAt(e).to))}column(e){var t;let i=this.state.doc.lineAt(e),n=i.text.slice(0,e-i.from),r=this.countColumn(n,e-i.from),o=((t=this.options)===null||t===void 0?void 0:t.overrideIndentation)?this.options.overrideIndentation(i.from):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S/))),r}countColumn(e,t){return gt(t<0?e:e.slice(0,t),0,this.state.tabSize)}lineIndent(e){var t;let i=(t=this.options)===null||t===void 0?void 0:t.overrideIndentation;if(i){let n=i(e.from);if(n>-1)return n}return this.countColumn(e.text,e.text.search(/\S/))}},nr=new D;function cd(s,e,t){let i=e.resolve(t);for(let n=i,r=t;;){let o=n.childBefore(r);if(!o)break;o.type.isError&&o.from==o.to?(i=n,r=o.from):(n=o,r=n.to+1)}return ka(i,t,s)}function fd(s){var e,t;return s.pos==((e=s.options)===null||e===void 0?void 0:e.simulateBreak)&&((t=s.options)===null||t===void 0?void 0:t.simulateDoubleBreak)}function pd(s){let e=s.type.prop(nr);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(D.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>dd(o,!0,1,void 0,r&&!fd(o)?n.from:void 0)}return s.parent==null?ud:null}function ka(s,e,t){for(;s;s=s.parent){let i=pd(s);if(i)return i(new va(t,e,s))}return null}function ud(){return 0}var va=class extends zt{constructor(e,t,i){super(e.state,e.options);this.base=e,this.pos=t,this.node=i}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(gd(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e)}continue(){let e=this.node.parent;return e?ka(e,this.pos,this.base):0}};function gd(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function md(s){var e;let t=s.node,i=t.childAfter(t.from),n=t.lastChild;if(!i)return null;let r=(e=s.options)===null||e===void 0?void 0:e.simulateBreak,o=s.state.doc.lineAt(i.from),l=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=i.to;;){let h=t.childAfter(a);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<l?i:null;a=h.to}}function dd(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=e?md(s):null;return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}function Qa({except:s,units:e=1}={}){return t=>{let i=s&&s.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}var Od=200;function Wa(){return I.transactionFilter.of(s=>{if(!s.docChanged||s.annotation(T.userEvent)!="input")return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+Od)return s;let r=t.sliceString(n.from,i);if(!e.some(h=>h.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let f=ws(o,c.from);if(f==null)continue;let u=/^\s*/.exec(c.text)[0],d=Ut(o,f);u!=d&&a.push({from:c.from,to:c.from+u.length,insert:d})}return a.length?[s,{changes:a}]:s})}var $d=S.define(),rr=new D;function Ta(s){let e=s.firstChild,t=s.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?s.to:t.from}:null}function xd(s,e,t){let i=me(s);if(i.length==0)return null;let n=i.resolve(t),r=null;for(let o=n;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(r&&o.from<e)break;let l=o.type.prop(rr);if(l){let a=l(o,s);a&&a.from<=t&&a.from>=e&&a.to>t&&(r=a)}}return r}function vi(s,e,t){for(let i of s.facet($d)){let n=i(s,e,t);if(n)return n}return xd(s,e,t)}var wd=0,Ie=class{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=wd++}static define(e){if(e==null?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Ie([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Qi;return t=>t.modified.indexOf(e)>-1?t:Qi.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}},yd=0,Qi=class{constructor(){this.instances=[],this.id=yd++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Sd(t,l.modified));if(i)return i;let n=[],r=new Ie(n,e,t);for(let l of t)l.instances.push(r);let o=Ia(t);for(let l of e.set)for(let a of o)n.push(Qi.get(l,a));return r}};function Sd(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function Ia(s){let e=[s];for(let t=0;t<s.length;t++)for(let i of Ia(s.slice(0,t).concat(s.slice(t+1))))e.push(i);return e}function qa(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!u)throw new RangeError("Invalid path: "+n);if(r.push(u[0]=="*"?null:u[0][0]=='"'?JSON.parse(u[0]):u[0]),f+=u[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,h=r[a];if(!h)throw new RangeError("Invalid path: "+n);let c=new Ca(i,o,a>0?r.slice(0,a):null);e[h]=c.sort(e[h])}}return Ra.add(e)}var Ra=new D,or=S.define({combine(s){return s.length?Wi.combinedMatch(s):null}}),Aa=S.define({combine(s){return s.length?s[0].match:null}});function lr(s){return s.facet(or)||s.facet(Aa)}var Ca=class{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}},Wi=class{constructor(e,t){this.map=Object.create(null);let i;function n(o){let l=Ne.newName();return(i||(i=Object.create(null)))["."+l]=o,l}this.all=typeof t.all=="string"?t.all:t.all?n(t.all):null;for(let o of e){let l=(o.class||n(Object.assign({},o,{tag:null})))+(this.all?" "+this.all:""),a=o.tag;if(!Array.isArray(a))this.map[a.id]=l;else for(let h of a)this.map[h.id]=l}this.module=i?new Ne(i):null,this.scope=t.scope||null,this.match=this.match.bind(this);let r=[bd];this.module&&r.push(k.styleModule.of(this.module)),this.extension=r.concat(or.of(this)),this.fallback=r.concat(Aa.of(this))}match(e,t){if(this.scope&&t!=this.scope)return null;for(let i of e.set){let n=this.map[i.id];if(n!==void 0)return i!=e&&(this.map[e.id]=n),n}return this.map[e.id]=this.all}static combinedMatch(e){if(e.length==1)return e[0].match;let t=e.some(i=>i.scope)?void 0:Object.create(null);return(i,n)=>{let r=t&&t[i.id];if(r!==void 0)return r;let o=null;for(let l of e){let a=l.match(i,n);a&&(o=o?o+" "+a:a)}return t&&(t[i.id]=o),o}}static define(e,t){return new Wi(e,t||{})}static get(e,t,i){let n=lr(e);return n&&n(t,i||J.none)}},Za=class{constructor(e){this.markCache=Object.create(null),this.tree=me(e.state),this.decorations=this.buildDeco(e,lr(e.state))}update(e){let t=me(e.state),i=lr(e.state),n=i!=e.startState.facet(or);t.length<e.view.viewport.to&&!n?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return b.none;let i=new Ae;for(let{from:n,to:r}of e.visibleRanges)Pd(this.tree,n,r,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=b.mark({class:a})))});return i.finish()}},bd=jt.fallback(L.fromClass(Za,{decorations:s=>s.decorations})),Ma=[""];function Pd(s,e,t,i,n){let r=e,o="",l=s.topNode.cursor;function a(c,f){o&&n(r,c,o),r=c,o=f}function h(c,f,u){let{type:d,from:p,to:m}=l;if(p>=t||m<=e)return;Ma[f]=d.name,d.isTop&&(u=d);let O=c,y=d.prop(Ra),C=!1;for(;y;){if(!y.context||kd(y.context,Ma,f)){for(let P of y.tags){let v=i(P,u);v&&(O&&(O+=" "),O+=v,y.mode==1?c+=(c?" ":"")+v:y.mode==0&&(C=!0))}break}y=y.next}let w=p;if(!C&&l.firstChild()){do l.from>w&&o!=O&&a(w,O),w=l.to,h(c,f+1,u);while(l.nextSibling());l.parent()}m>w&&o!=O&&a(w,O)}h("",0,s.type),a(t,"")}function kd(s,e,t){if(s.length>t-1)return!1;for(let i=t-1,n=s.length-1;n>=0;n--,i--){let r=s[n];if(r&&r!=e[i])return!1}return!0}var $=Ie.define,ys=$(),at=$(),Ea=$(at),ht=$(),ar=$(ht),hr=$(ht),je=$(),Wt=$(je),He=$(),Be=$(),cr=$(),Ti=$(cr),Ss=$(),x={comment:ys,lineComment:$(ys),blockComment:$(ys),docComment:$(ys),name:at,variableName:$(at),typeName:Ea,tagName:$(Ea),propertyName:$(at),className:$(at),labelName:$(at),namespace:$(at),macroName:$(at),literal:ht,string:ar,docString:$(ar),character:$(ar),number:hr,integer:$(hr),float:$(hr),bool:$(ht),regexp:$(ht),escape:$(ht),color:$(ht),url:$(ht),keyword:He,self:$(He),null:$(He),atom:$(He),unit:$(He),modifier:$(He),operatorKeyword:$(He),controlKeyword:$(He),definitionKeyword:$(He),operator:Be,derefOperator:$(Be),arithmeticOperator:$(Be),logicOperator:$(Be),bitwiseOperator:$(Be),compareOperator:$(Be),updateOperator:$(Be),definitionOperator:$(Be),typeOperator:$(Be),controlOperator:$(Be),punctuation:cr,separator:$(cr),bracket:Ti,angleBracket:$(Ti),squareBracket:$(Ti),paren:$(Ti),brace:$(Ti),content:je,heading:Wt,heading1:$(Wt),heading2:$(Wt),heading3:$(Wt),heading4:$(Wt),heading5:$(Wt),heading6:$(Wt),contentSeparator:$(je),list:$(je),quote:$(je),emphasis:$(je),strong:$(je),link:$(je),monospace:$(je),strikethrough:$(je),inserted:$(),deleted:$(),changed:$(),invalid:$(),meta:Ss,documentMeta:$(Ss),annotation:$(Ss),processingInstruction:$(Ss),definition:Ie.defineModifier(),constant:Ie.defineModifier(),function:Ie.defineModifier(),standard:Ie.defineModifier(),local:Ie.defineModifier(),special:Ie.defineModifier()},Da=Wi.define([{tag:x.link,textDecoration:"underline"},{tag:x.heading,textDecoration:"underline",fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strong,fontWeight:"bold"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.keyword,color:"#708"},{tag:[x.atom,x.bool,x.url,x.contentSeparator,x.labelName],color:"#219"},{tag:[x.literal,x.inserted],color:"#164"},{tag:[x.string,x.deleted],color:"#a11"},{tag:[x.regexp,x.escape,x.special(x.string)],color:"#e40"},{tag:x.definition(x.variableName),color:"#00f"},{tag:x.local(x.variableName),color:"#30a"},{tag:[x.typeName,x.namespace],color:"#085"},{tag:x.className,color:"#167"},{tag:[x.special(x.variableName),x.macroName],color:"#256"},{tag:x.definition(x.propertyName),color:"#00c"},{tag:x.comment,color:"#940"},{tag:x.meta,color:"#7a757a"},{tag:x.invalid,color:"#f00"}]);var fr=Le.define(),vd=Le.define(),Qd=S.define(),ja=S.define({combine(s){return Ve(s,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}}),Ya=K.define({create(){return Re.empty},update(s,e){let t=e.state.facet(ja),i=e.annotation(fr);if(i){let a=he.fromTransaction(e),h=i.side,c=h==0?s.undone:s.done;return a?c=bs(c,c.length,t.minDepth,a):c=Ba(c,e.startState.selection),new Re(h==0?i.rest:c,h==0?c:i.rest)}let n=e.annotation(vd);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(T.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=he.fromTransaction(e),o=e.annotation(T.time),l=e.annotation(T.userEvent);return r?s=s.addChanges(r,o,l,t.newGroupDelay,t.minDepth):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Re(s.done.map(he.fromJSON),s.undone.map(he.fromJSON))}});function Wd(s={}){return[Ya,ja.of(s),k.domEventHandlers({beforeinput(e,t){return e.inputType=="historyUndo"?Xa(t):e.inputType=="historyRedo"?_a(t):!1}})]}function Ps(s,e){return function({state:t,dispatch:i}){let n=t.field(Ya,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}var Xa=Ps(0,!1),_a=Ps(1,!1),Td=Ps(0,!0),Id=Ps(1,!0),he=class{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new he(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new he(e.changes&&_.fromJSON(e.changes),[],e.mapped&&Qe.fromJSON(e.mapped),e.startSelection&&g.fromJSON(e.startSelection),e.selectionsAfter.map(g.fromJSON))}static fromTransaction(e){let t=be;for(let i of e.startState.facet(Qd)){let n=i(e);n.length&&(t=t.concat(n))}return!t.length&&e.changes.empty?null:new he(e.changes.invert(e.startState.doc),t,void 0,e.startState.selection,be)}static selection(e){return new he(void 0,be,void 0,void 0,e)}};function bs(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function Rd(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(i=!0)}}),i}function Cd(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function La(s,e){return s.length?e.length?s.concat(e):s:e}var be=[],qd=200;function Ba(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-qd));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),bs(s,s.length-1,1e9,t.setSelAfter(i)))}else return[he.selection([e])]}function Ad(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ur(s,e){if(!s.length)return s;let t=s.length,i=be;for(;t;){let n=Zd(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[he.selection(i)]:be}function Zd(s,e,t){let i=La(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):be,t);if(!s.changes)return he.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new he(n,W.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}var Re=class{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new Re(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&t-this.prevTime<n&&!l.selectionsAfter.length&&!l.changes.empty&&e.changes&&Rd(l.changes,e.changes)?o=bs(o,o.length-1,r,new he(e.changes.compose(l.changes),La(e.effects,l.effects),l.mapped,l.startSelection,be)):o=bs(o,o.length,r,e),new Re(o,be,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:be;return r.length>0&&t-this.prevTime<n&&i=="keyboardselection"&&this.prevUserEvent==i&&Cd(r[r.length-1],e)?this:new Re(Ba(this.done,e),this.undone,t,i)}addMapping(e){return new Re(ur(this.done,e),ur(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:fr.of({side:e,rest:Ad(n)})});if(r.changes){let o=n.length==1?be:n.slice(0,n.length-1);return r.mapped&&(o=ur(o,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:fr.of({side:e,rest:o}),filter:!1})}else return null}};Re.empty=new Re(be,be);var Md=[{key:"Mod-z",run:Xa,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_a,preventDefault:!0},{key:"Mod-u",run:Td,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Id,preventDefault:!0}],ct=class extends Ge{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}at(e){return this.range(e)}};ct.prototype.elementClass="";ct.prototype.toDOM=void 0;ct.prototype.mapMode=se.TrackBefore;ct.prototype.point=!0;var ks=S.define(),Ed={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>q.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},vs=S.define();function Va(s){return[Dd(),vs.of(Object.assign(Object.assign({},Ed),s))]}var jd=k.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),dr=S.define({combine:s=>s.some(e=>e)});function Dd(s){let e=[Bd,jd];return s&&s.fixed===!1&&e.push(dr.of(!0)),e}var Bd=L.fromClass(class{constructor(s){this.view=s,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.gutters=s.state.facet(vs).map(e=>new pr(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(dr),this.fixed&&(this.dom.style.position="sticky"),s.scrollDOM.insertBefore(this.dom,s.contentDOM),this.syncGutters()}update(s){this.updateGutters(s)&&this.syncGutters()}syncGutters(){let s=q.iter(this.view.state.facet(ks),this.view.viewport.from),e=[],t=this.gutters.map(i=>new Ga(i,this.view.viewport));this.view.viewportLines(i=>{let n;if(Array.isArray(i.type)){for(let r of i.type)if(r.type==E.Text){n=r;break}}else n=i.type==E.Text?i:void 0;if(!!n){e.length&&(e=[]),Na(s,e,i.from);for(let r of t)r.line(this.view,n,e)}},0);for(let i of t)i.finish();this.dom.style.minHeight=this.view.contentHeight+"px",this.view.state.facet(dr)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(s){let e=s.startState.facet(vs),t=s.state.facet(vs),i=s.docChanged||s.heightChanged||s.viewportChanged||!q.eq(s.startState.facet(ks),s.state.facet(ks),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new pr(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove();for(let r of n)this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){this.dom.remove()}},{provide:te.scrollMargins.from(s=>s.gutters.length==0||!s.fixed?null:s.view.textDirection==R.LTR?{left:s.dom.offsetWidth}:{right:s.dom.offsetWidth})});function Ua(s){return Array.isArray(s)?s:[s]}function Na(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}var Ga=class{constructor(e,t){this.gutter=e,this.localMarkers=[],this.i=0,this.height=0,this.cursor=q.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),Na(this.cursor,this.localMarkers,t.from);let n=i.length?this.localMarkers.concat(i):this.localMarkers,r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;if(n.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new gr(e,t.height,l,n);o.elements.push(a),o.dom.appendChild(a.dom)}else{let a=o.elements[this.i];Yd(n,a.markers)&&(n=a.markers),a.update(e,t.height,l,n)}this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}},pr=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=e.visualLineAtHeight(n.clientY,e.contentDOM.getBoundingClientRect().top);t.domEventHandlers[i](e,r,n)&&n.preventDefault()});this.markers=Ua(t.markers(e)),t.initialSpacer&&(this.spacer=new gr(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Ua(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!q.eq(this.markers,t,i.from,i.to)}},gr=class{constructor(e,t,i,n){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(e,t,i,n)}update(e,t,i,n){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),this.markers!=n){this.markers=n;for(let o;o=this.dom.lastChild;)o.remove();let r="cm-gutterElement";for(let o of n){o.toDOM&&this.dom.appendChild(o.toDOM(e));let l=o.elementClass;l&&(r+=" "+l)}this.dom.className=r}}};function Yd(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}var Xd=S.define(),za=S.define({combine(s){return Ve(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,a,h)=>r(l,a,h)||o(l,a,h):o}return i}})}}),Qs=class extends ct{constructor(e){super();this.number=e}eq(e){return this.number==e.number}toDOM(e){return document.createTextNode(this.number)}};function mr(s,e){return s.state.facet(za).formatNumber(e,s.state)}var _d=Va({class:"cm-lineNumbers",markers(s){return s.state.facet(Xd)},lineMarker(s,e,t){return t.some(i=>i.toDOM)?null:new Qs(mr(s,s.state.doc.lineAt(e.from).number))},initialSpacer(s){return new Qs(mr(s,Fa(s.state.doc.lines)))},updateSpacer(s,e){let t=mr(e.view,Fa(e.view.state.doc.lines));return t==s.number?s:new Qs(t)}});function Ld(s={}){return[za.of(s),_d]}function Fa(s){let e=9;for(;e<s;)e=e*10+9;return e}var Vd=new class extends ct{constructor(){super(...arguments);this.elementClass="cm-activeLineGutter"}eq(){return!0}},Nd=ks.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges)if(i.empty){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(Vd.range(n)))}return q.of(e)});function Gd(){return Nd}function Ha(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}var Ws=W.define({map:Ha}),Ii=W.define({map:Ha});function Ja(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.visualLineAt(t));return e}var Tt=K.define({create(){return b.none},update(s,e){s=s.map(e.changes);for(let t of e.effects)t.is(Ws)&&!Ud(s,t.value.from,t.value.to)?s=s.update({add:[zd.range(t.value.from,t.value.to)]}):t.is(Ii)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;s.between(i,i,(n,r)=>{n<i&&r>i&&(t=!0)}),t&&(s=s.update({filterFrom:i,filterTo:i,filter:(n,r)=>r<=i||n>=i}))}return s},provide:s=>k.decorations.compute([s],e=>e.field(s))});function Ts(s,e,t){var i;let n=null;return(i=s.field(Tt,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function Ud(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function eh(s,e){return s.field(Tt,!1)?e:e.concat(W.appendConfig.of(Ka()))}var Fd=s=>{for(let e of Ja(s)){let t=vi(s.state,e.from,e.to);if(t)return s.dispatch({effects:eh(s.state,[Ws.of(t),th(s,t)])}),!0}return!1},Hd=s=>{if(!s.state.field(Tt,!1))return!1;let e=[];for(let t of Ja(s)){let i=Ts(s.state,t.from,t.to);i&&e.push(Ii.of(i),th(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function th(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return k.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}var Jd=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.visualLineAt(i),r=vi(e,n.from,n.to);r&&t.push(Ws.of(r)),i=(r?s.visualLineAt(r.to):n).to+1}return t.length&&s.dispatch({effects:eh(s.state,t)}),!!t.length},Kd=s=>{let e=s.state.field(Tt,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(Ii.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},ep=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Fd},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Hd},{key:"Ctrl-Alt-[",run:Jd},{key:"Ctrl-Alt-]",run:Kd}],tp={placeholderDOM:null,placeholderText:"…"},ih=S.define({combine(s){return Ve(s,tp)}});function Ka(s){let e=[Tt,ip];return s&&e.push(ih.of(s)),e}var zd=b.replace({widget:new class extends Me{ignoreEvents(){return!1}toDOM(s){let{state:e}=s,t=e.facet(ih);if(t.placeholderDOM)return t.placeholderDOM();let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=n=>{let r=s.visualLineAt(s.posAtDOM(n.target)),o=Ts(s.state,r.from,r.to);o&&s.dispatch({effects:Ii.of(o)}),n.preventDefault()},i}}}),sp={openText:"⌄",closedText:"›"},Is=class extends ct{constructor(e,t){super();this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}};function np(s={}){let e=Object.assign(Object.assign({},sp),s),t=new Is(e,!0),i=new Is(e,!1),n=L.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(Fe)!=r.state.facet(Fe)||r.startState.field(Tt,!1)!=r.state.field(Tt,!1))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let o=new Ae;return r.viewportLines(l=>{let a=Ts(r.state,l.from,l.to)?i:vi(r.state,l.from,l.to)?t:null;a&&o.add(l.from,l.from,a)}),o.finish()}});return[n,Va({class:"cm-foldGutter",markers(r){var o;return((o=r.plugin(n))===null||o===void 0?void 0:o.markers)||q.empty},initialSpacer(){return new Is(e,!1)},domEventHandlers:{click:(r,o)=>{let l=Ts(r.state,o.from,o.to);if(l)return r.dispatch({effects:Ii.of(l)}),!0;let a=vi(r.state,o.from,o.to);return a?(r.dispatch({effects:Ws.of(a)}),!0):!1}}}),Ka()]}var ip=k.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter .cm-gutterElement":{padding:"0 1px",cursor:"pointer"}}),rp=k.baseTheme({".cm-matchingBracket":{color:"#0b0"},".cm-nonmatchingBracket":{color:"#a22"}}),sh=1e4,nh="()[]{}",rh=S.define({combine(s){return Ve(s,{afterCursor:!0,brackets:nh,maxScanDistance:sh})}}),op=b.mark({class:"cm-matchingBracket"}),lp=b.mark({class:"cm-nonmatchingBracket"}),ap=K.define({create(){return b.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(rh);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=Ye(e.state,n.head,-1,i)||n.head>0&&Ye(e.state,n.head-1,1,i)||i.afterCursor&&(Ye(e.state,n.head,1,i)||n.head<e.state.doc.length&&Ye(e.state,n.head+1,-1,i));if(!r)continue;let o=r.matched?op:lp;t.push(o.range(r.start.from,r.start.to)),r.end&&t.push(o.range(r.end.from,r.end.to))}return b.set(t,!0)},provide:s=>k.decorations.from(s)}),hp=[ap,rp];function cp(s={}){return[rh.of(s),hp]}function Or(s,e,t){let i=s.prop(e<0?D.openedBy:D.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Ye(s,e,t,i={}){let n=i.maxScanDistance||sh,r=i.brackets||nh,o=me(s),l=o.resolve(e,t),a;return(a=Or(l.type,t,r))?fp(s,e,t,l,a,r):up(s,e,t,o,l.type,n,r)}function fp(s,e,t,i,n,r){let o=i.parent,l={from:i.from,to:i.to},a=0,h=o==null?void 0:o.cursor;if(h&&(t<0?h.childBefore(i.from):h.childAfter(i.to)))do if(t<0?h.to<=i.from:h.from>=i.to){if(a==0&&n.indexOf(h.type.name)>-1)return{start:l,end:{from:h.from,to:h.to},matched:!0};if(Or(h.type,t,r))a++;else if(Or(h.type,-t,r)&&(a--,a==0))return{start:l,end:{from:h.from,to:h.to},matched:!1}}while(t<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function up(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=s.doc.iterRange(e,t>0?s.doc.length:0),f=0;for(let u=0;!c.next().done&&u<=r;){let d=c.value;t<0&&(u+=d.length);let p=e+u*t;for(let m=t>0?0:d.length-1,O=t>0?d.length:-1;m!=O;m+=t){let y=o.indexOf(d[m]);if(!(y<0||i.resolve(p+m,1).type!=n))if(y%2==0==t>0)f++;else{if(f==1)return{start:h,end:{from:p+m,to:p+m+1},matched:y>>1==a>>1};f--}}t>0&&(u+=d.length)}return c.done?{start:h,matched:!1}:null}function Ri(s,e){return g.create(s.ranges.map(e),s.mainIndex)}function Je(s,e){return s.update({selection:e,scrollIntoView:!0,annotations:T.userEvent.of("keyboardselection")})}function Xe({state:s,dispatch:e},t){let i=Ri(s.selection,t);return i.eq(s.selection)?!1:(e(Je(s,i)),!0)}function Rs(s,e){return g.cursor(e?s.to:s.from)}function oh(s,e){return Xe(s,t=>t.empty?s.moveByChar(t,e):Rs(t,e))}var lh=s=>oh(s,s.textDirection!=R.LTR),ah=s=>oh(s,s.textDirection==R.LTR);function Cs(s,e){return Xe(s,t=>t.empty?s.moveByGroup(t,e):Rs(t,e))}var dp=s=>Cs(s,s.textDirection!=R.LTR),pp=s=>Cs(s,s.textDirection==R.LTR),gp=s=>Cs(s,!0),mp=s=>Cs(s,!1);function Op(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function qs(s,e,t){let i=me(s).resolve(e.head),n=t?D.closedBy:D.openedBy;for(let a=e.head;;){let h=t?i.childAfter(a):i.childBefore(a);if(!h)break;Op(s,h,n)?i=h:a=t?h.to:h.from}let r=i.type.prop(n),o,l;return r&&(o=t?Ye(s,i.from,1):Ye(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,g.cursor(l,t?-1:1)}var $p=s=>Xe(s,e=>qs(s.state,e,s.textDirection!=R.LTR)),xp=s=>Xe(s,e=>qs(s.state,e,s.textDirection==R.LTR));function hh(s,e){return Xe(s,t=>t.empty?s.moveVertically(t,e):Rs(t,e))}var ch=s=>hh(s,!1),fh=s=>hh(s,!0);function uh(s,e){return Xe(s,t=>t.empty?s.moveVertically(t,e,s.dom.clientHeight):Rs(t,e))}var $r=s=>uh(s,!1),xr=s=>uh(s,!0);function As(s,e,t){let i=s.visualLineAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=g.cursor(i.from+r))}return n}var dh=s=>Xe(s,e=>As(s,e,!0)),ph=s=>Xe(s,e=>As(s,e,!1)),wp=s=>Xe(s,e=>g.cursor(s.visualLineAt(e.head).from,1)),yp=s=>Xe(s,e=>g.cursor(s.visualLineAt(e.head).to,-1));function Sp(s,e,t){let i=!1,n=Ri(s.selection,r=>{let o=Ye(s,r.head,-1)||Ye(s,r.head,1)||r.head>0&&Ye(s,r.head-1,1)||r.head<s.doc.length&&Ye(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return t?g.range(r.anchor,l):g.cursor(l)});return i?(e(Je(s,n)),!0):!1}var bp=({state:s,dispatch:e})=>Sp(s,e,!1);function _e(s,e){let t=Ri(s.state.selection,i=>{let n=e(i);return g.range(i.anchor,n.head,n.goalColumn)});return t.eq(s.state.selection)?!1:(s.dispatch(Je(s.state,t)),!0)}function gh(s,e){return _e(s,t=>s.moveByChar(t,e))}var mh=s=>gh(s,s.textDirection!=R.LTR),Oh=s=>gh(s,s.textDirection==R.LTR);function Zs(s,e){return _e(s,t=>s.moveByGroup(t,e))}var Pp=s=>Zs(s,s.textDirection!=R.LTR),kp=s=>Zs(s,s.textDirection==R.LTR),vp=s=>Zs(s,!0),Qp=s=>Zs(s,!1),Wp=s=>_e(s,e=>qs(s.state,e,s.textDirection!=R.LTR)),Tp=s=>_e(s,e=>qs(s.state,e,s.textDirection==R.LTR));function $h(s,e){return _e(s,t=>s.moveVertically(t,e))}var xh=s=>$h(s,!1),wh=s=>$h(s,!0);function yh(s,e){return _e(s,t=>s.moveVertically(t,e,s.dom.clientHeight))}var Sh=s=>yh(s,!1),bh=s=>yh(s,!0),Ph=s=>_e(s,e=>As(s,e,!0)),kh=s=>_e(s,e=>As(s,e,!1)),Ip=s=>_e(s,e=>g.cursor(s.visualLineAt(e.head).from)),Rp=s=>_e(s,e=>g.cursor(s.visualLineAt(e.head).to)),wr=({state:s,dispatch:e})=>(e(Je(s,{anchor:0})),!0),yr=({state:s,dispatch:e})=>(e(Je(s,{anchor:s.doc.length})),!0),vh=({state:s,dispatch:e})=>(e(Je(s,{anchor:s.selection.main.anchor,head:0})),!0),Qh=({state:s,dispatch:e})=>(e(Je(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),Cp=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},annotations:T.userEvent.of("keyboardselection")})),!0),qp=({state:s,dispatch:e})=>{let t=Ms(s).map(({from:i,to:n})=>g.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:g.create(t),annotations:T.userEvent.of("keyboardselection")})),!0},Ap=({state:s,dispatch:e})=>{let t=Ri(s.selection,i=>{var n;let r=me(s).resolve(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!((n=r.parent)===null||n===void 0?void 0:n.parent));)r=r.parent;return g.range(r.to,r.from)});return e(Je(s,t)),!0},Zp=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=g.create([t.main]):t.main.empty||(i=g.create([g.cursor(t.main.head)])),i?(e(Je(s,i)),!0):!1};function Es({state:s,dispatch:e},t){let i=s.changeByRange(n=>{let{from:r,to:o}=n;if(r==o){let l=t(r);r=Math.min(r,l),o=Math.max(o,l)}return r==o?{range:n}:{changes:{from:r,to:o},range:g.cursor(r)}});return i.changes.empty?!1:(e(s.update(i,{scrollIntoView:!0,annotations:T.userEvent.of("delete")})),!0)}var Sr=(s,e,t)=>Es(s,i=>{let{state:n}=s,r=n.doc.lineAt(i),o;if(!e&&i>r.from&&i<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,i-r.from))){if(o[o.length-1]=="	")return i-1;let a=gt(o,0,n.tabSize),h=a%ki(n)||ki(n);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;return i}let l;if(t){let a=r.text.slice(i-r.from+(e?0:-2),i-r.from+(e?2:0)),h=a?de(z(a,0)):1;l=e?Math.min(n.doc.length,i+h):Math.max(0,i-h)}else l=ue(r.text,i-r.from,e)+r.from;return l==i&&r.number!=(e?n.doc.lines:1)&&(l+=e?1:-1),l}),Wh=s=>Sr(s,!1,!0),Mp=s=>Sr(s,!1,!1),br=s=>Sr(s,!0,!1),Th=(s,e)=>Es(s,t=>{let i=t,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=ue(r.text,i-r.from,e)+r.from,h=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||i!=t)&&(l=c),i=a}return i}),Ih=s=>Th(s,!1),Rh=s=>Th(s,!0),Ch=s=>Es(s,e=>{let t=s.visualLineAt(e).to;return e<t?t:Math.min(s.state.doc.length,e+1)}),Ep=s=>Es(s,e=>{let t=s.visualLineAt(e).from;return e>t?t:Math.max(0,e-1)}),Dp=({state:s,dispatch:e})=>{let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Z.of(["",""])},range:g.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,annotations:T.userEvent.of("input")})),!0},jp=({state:s,dispatch:e})=>{let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:ue(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:ue(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:g.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0})),!0)};function Ms(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function qh(s,e,t){let i=[],n=[];for(let r of Ms(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(g.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(g.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:g.create(n,s.selection.mainIndex)})),!0):!1}var Bp=({state:s,dispatch:e})=>qh(s,e,!1),Yp=({state:s,dispatch:e})=>qh(s,e,!0);function Ah(s,e,t){let i=[];for(let n of Ms(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0})),!0}var Xp=({state:s,dispatch:e})=>Ah(s,e,!1),_p=({state:s,dispatch:e})=>Ah(s,e,!0),Lp=s=>{let{state:e}=s,t=e.changes(Ms(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Ri(e.selection,n=>s.moveVertically(n,!0)).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0}),!0};function Vp(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=me(s).resolve(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(D.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from?{from:i.to,to:n.from}:null}var Np=({state:s,dispatch:e})=>{let t=s.changeByRange(({from:i,to:n})=>{let r=i==n&&Vp(s,i),o=new zt(s,{simulateBreak:i,simulateDoubleBreak:!!r}),l=ws(o,i);l==null&&(l=/^\s*/.exec(s.doc.lineAt(i).text)[0].length);let a=s.doc.lineAt(i);for(;n<a.to&&/\s/.test(a.text.slice(n-a.from,n+1-a.from));)n++;r?{from:i,to:n}=r:i>a.from&&i<a.from+100&&!/\S/.test(a.text.slice(0,i))&&(i=a.from);let h=["",Ut(s,l)];return r&&h.push(Ut(s,o.lineIndent(a))),{changes:{from:i,to:n,insert:Z.of(h)},range:g.cursor(i+1+h[1].length)}});return e(s.update(t,{scrollIntoView:!0})),!0};function Pr(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:g.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}var Gp=({state:s,dispatch:e})=>{let t=Object.create(null),i=new zt(s,{overrideIndentation:r=>{let o=t[r];return o==null?-1:o}}),n=Pr(s,(r,o,l)=>{let a=ws(i,r.from);if(a==null)return;let h=/^\s*/.exec(r.text)[0],c=Ut(s,a);(h!=c||l.from<r.from+h.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+h.length,insert:c}))});return n.changes.empty||e(s.update(n)),!0},Up=({state:s,dispatch:e})=>(e(s.update(Pr(s,(t,i)=>{i.push({from:t.from,insert:s.facet(xs)})}))),!0),zp=({state:s,dispatch:e})=>(e(s.update(Pr(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=gt(n,0,s.tabSize),o=0,l=Ut(s,Math.max(0,r-ki(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}))),!0),Fp=[{key:"Ctrl-b",run:lh,shift:mh,preventDefault:!0},{key:"Ctrl-f",run:ah,shift:Oh},{key:"Ctrl-p",run:ch,shift:xh},{key:"Ctrl-n",run:fh,shift:wh},{key:"Ctrl-a",run:wp,shift:Ip},{key:"Ctrl-e",run:yp,shift:Rp},{key:"Ctrl-d",run:br},{key:"Ctrl-h",run:Mp},{key:"Ctrl-k",run:Ch},{key:"Alt-d",run:Rh},{key:"Ctrl-Alt-h",run:Ih},{key:"Ctrl-o",run:Dp},{key:"Ctrl-t",run:jp},{key:"Alt-f",run:gp,shift:vp},{key:"Alt-b",run:mp,shift:Qp},{key:"Alt-<",run:wr},{key:"Alt->",run:yr},{key:"Ctrl-v",run:xr},{key:"Alt-v",run:$r}],Hp=[{key:"ArrowLeft",run:lh,shift:mh,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:dp,shift:Pp},{mac:"Cmd-ArrowLeft",run:ph,shift:kh},{key:"ArrowRight",run:ah,shift:Oh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:pp,shift:kp},{mac:"Cmd-ArrowRight",run:dh,shift:Ph},{key:"ArrowUp",run:ch,shift:xh,preventDefault:!0},{mac:"Cmd-ArrowUp",run:wr,shift:vh},{mac:"Ctrl-ArrowUp",run:$r,shift:Sh},{key:"ArrowDown",run:fh,shift:wh,preventDefault:!0},{mac:"Cmd-ArrowDown",run:yr,shift:Qh},{mac:"Ctrl-ArrowDown",run:xr,shift:bh},{key:"PageUp",run:$r,shift:Sh},{key:"PageDown",run:xr,shift:bh},{key:"Home",run:ph,shift:kh},{key:"Mod-Home",run:wr,shift:vh},{key:"End",run:dh,shift:Ph},{key:"Mod-End",run:yr,shift:Qh},{key:"Enter",run:Np},{key:"Mod-a",run:Cp},{key:"Backspace",run:Wh,shift:Wh},{key:"Delete",run:br,shift:br},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ih},{key:"Mod-Delete",mac:"Alt-Delete",run:Rh},{mac:"Mod-Backspace",run:Ep},{mac:"Mod-Delete",run:Ch}].concat(Fp.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),Jp=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:$p,shift:Wp},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:xp,shift:Tp},{key:"Alt-ArrowUp",run:Bp},{key:"Shift-Alt-ArrowUp",run:Xp},{key:"Alt-ArrowDown",run:Yp},{key:"Shift-Alt-ArrowDown",run:_p},{key:"Escape",run:Zp},{key:"Alt-l",mac:"Ctrl-l",run:qp},{key:"Mod-i",run:Ap,preventDefault:!0},{key:"Mod-[",run:zp},{key:"Mod-]",run:Up},{key:"Mod-Alt-\\",run:Gp},{key:"Shift-Mod-k",run:Lp},{key:"Shift-Mod-\\",run:bp}].concat(Hp),Ds={brackets:["(","[","{","'",'"'],before:`)]}'":;>`},It=W.define({map(s,e){let t=e.mapPos(s,-1,se.TrackAfter);return t==null?void 0:t}}),kr=W.define({map(s,e){return e.mapPos(s)}}),vr=new class extends Ge{};vr.startSide=1;vr.endSide=-1;var Zh=K.define({create(){return q.empty},update(s,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(s=q.empty)}s=s.map(e.changes);for(let t of e.effects)t.is(It)?s=s.update({add:[vr.range(t.value,t.value+1)]}):t.is(kr)&&(s=s.update({filter:i=>i!=t.value}));return s}});function eg(){return[k.inputHandler.of(Kp),Zh]}var Qr="()[]{}<>";function Mh(s){for(let e=0;e<Qr.length;e+=2)if(Qr.charCodeAt(e)==s)return Qr.charAt(e+1);return Gi(s<128?s:s+1)}function Eh(s,e){return s.languageDataAt("closeBrackets",e)[0]||Ds}function Kp(s,e,t,i){if(s.composing)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&de(z(i,0))==1||e!=n.from||t!=n.to)return!1;let r=tg(s.state,i);return r?(s.dispatch(r),!0):!1}var sg=({state:s,dispatch:e})=>{let i=Eh(s,s.selection.main.head).brackets||Ds.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=ig(s.doc,o.head);for(let a of i)if(a==l&&js(s.doc,o.head)==Mh(z(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:g.cursor(o.head-a.length),annotations:T.userEvent.of("delete")}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0})),!n},ng=[{key:"Backspace",run:sg}];function tg(s,e){let t=Eh(s,s.selection.main.head),i=t.brackets||Ds.brackets;for(let n of i){let r=Mh(z(n,0));if(e==n)return r==n?lg(s,n,i.indexOf(n+n+n)>-1):rg(s,n,r,t.before||Ds.before);if(e==r&&Dh(s,s.selection.main.from))return og(s,n,r)}return null}function Dh(s,e){let t=!1;return s.field(Zh).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function js(s,e){let t=s.sliceString(e,e+2);return t.slice(0,de(z(t,0)))}function ig(s,e){let t=s.sliceString(e-2,e);return de(z(t,0))==t.length?t:t.slice(1)}function rg(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:It.of(o.to+e.length),range:g.range(o.anchor+e.length,o.head+e.length)};let l=js(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:It.of(o.head+e.length),range:g.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,annotations:T.userEvent.of("input")})}function og(s,e,t){let i=null,n=s.selection.ranges.map(r=>r.empty&&js(s.doc,r.head)==t?g.cursor(r.head+t.length):i=r);return i?null:s.update({selection:g.create(n,s.selection.mainIndex),scrollIntoView:!0,effects:s.selection.ranges.map(({from:r})=>kr.of(r))})}function lg(s,e,t){let i=null,n=s.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:It.of(r.to+e.length),range:g.range(r.anchor+e.length,r.head+e.length)};let o=r.head,l=js(s.doc,o);if(l==e){if(jh(s,o))return{changes:{insert:e+e,from:o},effects:It.of(o+e.length),range:g.cursor(o+e.length)};if(Dh(s,o)){let a=t&&s.sliceDoc(o,o+e.length*3)==e+e+e;return{range:g.cursor(o+e.length*(a?3:1)),effects:kr.of(o)}}}else{if(t&&s.sliceDoc(o-2*e.length,o)==e+e&&jh(s,o-2*e.length))return{changes:{insert:e+e+e+e,from:o},effects:It.of(o+e.length),range:g.cursor(o+e.length)};if(s.charCategorizer(o)(l)!=pe.Word){let a=s.sliceDoc(o-1,o);if(a!=e&&s.charCategorizer(o)(a)!=pe.Word)return{changes:{insert:e+e,from:o},effects:It.of(o+e.length),range:g.cursor(o+e.length)}}}return{range:i=r}});return i?null:s.update(n,{scrollIntoView:!0,annotations:T.userEvent.of("input")})}function jh(s,e){let t=me(s).resolve(e+1);return t.parent&&t.from==e}var Bh=S.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ci(s,e){let t=s.plugin(Yh),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}var Yh=L.fromClass(class{constructor(s){this.input=s.state.facet(Ai),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Bh);this.top=new qi(s,!0,e.topContainer),this.bottom=new qi(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.class&&t.dom.classList.add(t.class),t.mount&&t.mount()}update(s){let e=s.state.facet(Bh);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new qi(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new qi(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(Ai);if(t!=this.input){let i=t.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),c;h<0?(c=a(s.view),l.push(c)):(c=this.panels[h],c.update&&c.update(s)),n.push(c),(c.top?r:o).push(c)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.class&&a.dom.classList.add(a.class),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:te.scrollMargins.from(s=>({top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}))}),qi=class{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Xh(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Xh(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function Xh(s){let e=s.nextSibling;return s.remove(),e}var ag=k.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),Ai=S.define({enables:[Yh,ag]});function j(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)_h(s,arguments[e]);return s}function _h(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)_h(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}var Lh=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s,Ft=class{constructor(e,t,i=0,n=e.length,r){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?o=>r(Lh(o)):Lh,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return z(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Gi(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=de(e);let n=this.normalize(t);for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o);if(a)return this.value=a,this;if(r==n.length-1)break;o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t){let i=null;for(let n=0;n<this.matches.length;n+=2){let r=this.matches[n],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[n+1],to:t+1}:(this.matches[n]++,o=!0)),o||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i}},Vh={from:-1,to:-1,match:/.*/.exec("")},Wr="gm"+(/x/.unicode==null?"":"u"),Nh=class{constructor(e,t,i,n=0,r=e.length){if(this.to=r,this.curLine="",this.done=!1,this.value=Vh,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Gh(e,t,i,n,r);this.re=new RegExp(t,Wr+((i==null?void 0:i.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=n,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=n+(i==n?1:0),i==this.curLine.length&&this.nextLine(),i<n||i>this.value.to)return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},Tr=new WeakMap,Rt=class{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=Tr.get(e);if(!n||n.from>=i||n.to<=t){let l=new Rt(t,e.sliceString(t,i));return Tr.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),Tr.set(e,new Rt(o,r)),new Rt(t,r.slice(t-o,i-o))}},Gh=class{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Vh,this.matchPos=n,this.re=new RegExp(t,Wr+((i==null?void 0:i.ignoreCase)?"i":"")),this.flat=Rt.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let i=this.flat.from+t.index,n=i+t[0].length;return this.value={from:i,to:n,match:t},this.matchPos=n+(i==n?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Rt.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}};function hg(s){try{return new RegExp(s,Wr),!0}catch(e){return!1}}function Ir(s){let e=j("input",{class:"cm-textfield",name:"line"}),t=j("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),s.dispatch({effects:Bs.of(!1)}),s.focus()):n.keyCode==13&&(n.preventDefault(),i())},onsubmit:n=>{n.preventDefault(),i()}},j("label",s.state.phrase("Go to line"),": ",e)," ",j("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function i(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:r}=s,o=r.doc.lineAt(r.selection.main.head),[,l,a,h,c]=n,f=h?+h.slice(1):0,u=a?+a:o.number;if(a&&c){let p=u/100;l&&(p=p*(l=="-"?-1:1)+o.number/r.doc.lines),u=Math.round(r.doc.lines*p)}else a&&l&&(u=u*(l=="-"?-1:1)+o.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));s.dispatch({effects:Bs.of(!1),selection:g.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),s.focus()}return{dom:t,pos:-10}}var Bs=W.define(),Uh=K.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(Bs)&&(s=t.value);return s},provide:s=>Ai.from(s,e=>e?Ir:null)}),fg=s=>{let e=Ci(s,Ir);if(!e){let t=[Bs.of(!0)];s.state.field(Uh,!1)==null&&t.push(W.appendConfig.of([Uh,cg])),s.dispatch({effects:t}),e=Ci(s,Ir)}return e&&e.dom.querySelector("input").focus(),!0},cg=k.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ug={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},zh=S.define({combine(s){return Ve(s,ug,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function gg(s){let e=[pg,dg];return s&&e.push(zh.of(s)),e}var mg=b.mark({class:"cm-selectionMatch"}),Og=b.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),dg=L.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(zh),{state:t}=s,i=t.selection;if(i.ranges.length>1)return b.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return b.none;let a=t.wordAt(n.head);if(!a)return b.none;o=t.charCategorizer(n.head),r=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return b.none;if(r=t.sliceDoc(n.from,n.to).trim(),!r)return b.none}let l=[];for(let a of s.visibleRanges){let h=new Ft(t.doc,r,a.from,a.to);for(;!h.nextOverlapping().done;){let{from:c,to:f}=h.value;if((!o||(c==0||o(t.sliceDoc(c-1,c))!=pe.Word)&&(f==t.doc.length||o(t.sliceDoc(f,f+1))!=pe.Word))&&(o&&c<=n.from&&f>=n.to?l.push(Og.range(c,f)):(c>=n.to||f<=n.from)&&l.push(mg.range(c,f)),l.length>e.maxMatches))return b.none}}return b.set(l)}},{decorations:s=>s.decorations}),pg=k.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),$g=({state:s,dispatch:e})=>{let{selection:t}=s,i=g.create(t.ranges.map(n=>s.wordAt(n.head)||g.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function xg(s,e){let{ranges:t}=s.selection,i=new Ft(s.doc,e,t[t.length-1].to).next();if(!i.done)return i.value;let n=new Ft(s.doc,e,0,Math.max(0,t[t.length-1].from-1));for(;!n.next().done;)if(!t.some(r=>r.from===n.value.from))return n.value;return null}var wg=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return $g({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=xg(s,i);return n?(e(s.update({selection:s.selection.addRange(g.range(n.from,n.to)),scrollIntoView:!0})),!0):!1},yg=S.define({combine(s){return{top:s.some(e=>e.top)}}}),Rr=class{constructor(e,t,i){this.search=e,this.replace=t,this.caseInsensitive=i}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseInsensitive==e.caseInsensitive&&this.constructor==e.constructor}},Cr=class extends Rr{constructor(e,t,i){super(e,t,i);this.unquoted=e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}cursor(e,t=0,i=e.length){return new Ft(e,this.unquoted,t,i,this.caseInsensitive?n=>n.toLowerCase():void 0)}nextMatch(e,t,i){let n=this.cursor(e,i).nextOverlapping();return n.done&&(n=this.cursor(e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.unquoted.length),o=this.cursor(e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.replace}matchAll(e,t){let i=this.cursor(e),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=this.cursor(e,Math.max(0,t-this.unquoted.length),Math.min(i+this.unquoted.length,e.length));for(;!r.next().done;)n(r.value.from,r.value.to)}get valid(){return!!this.search}},qr=class extends Rr{constructor(e,t,i){super(e,t,i);this.valid=!!e&&hg(e)}cursor(e,t=0,i=e.length){return new Nh(e,this.search,this.caseInsensitive?{ignoreCase:!0}:void 0,t,i)}nextMatch(e,t,i){let n=this.cursor(e,i).next();return n.done&&(n=this.cursor(e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=this.cursor(e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=this.cursor(e),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=this.cursor(e,Math.max(0,t-250),Math.min(i+250,e.length));for(;!r.next().done;)n(r.value.from,r.value.to)}},Ar=W.define(),Zr=W.define(),ft=K.define({create(s){return new Ys(Fh(s),Xs)},update(s,e){for(let t of e.effects)t.is(Ar)?s=new Ys(t.value,s.panel):t.is(Zr)&&(s=new Ys(s.query,t.value?Xs:null));return s},provide:s=>Ai.from(s,e=>e.panel)}),Ys=class{constructor(e,t){this.query=e,this.panel=t}},Sg=b.mark({class:"cm-searchMatch"}),bg=b.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Pg=L.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(ft))}update(s){let e=s.state.field(ft);(e!=s.startState.field(ft)||s.docChanged||s.selectionSet)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.valid)return b.none;let{view:t}=this,i=new Ae;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-2*250;)a=r[++n].to;s.highlight(t.state.doc,l,a,(h,c)=>{let f=t.state.selection.ranges.some(u=>u.from==h&&u.to==c);i.add(h,c,f?bg:Sg)})}return i.finish()}},{decorations:s=>s.decorations});function Zi(s){return e=>{let t=e.state.field(ft,!1);return t&&t.query.valid?s(e,t):Hh(e)}}var _s=Zi((s,{query:e})=>{let{from:t,to:i}=s.state.selection.main,n=e.nextMatch(s.state.doc,t,i);return!n||n.from==t&&n.to==i?!1:(s.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Mr(s,n)}),!0)}),Ls=Zi((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main,r=e.prevMatch(t.doc,i,n);return r?(s.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Mr(s,r)}),!0):!1}),kg=Zi((s,{query:e})=>{let t=e.matchAll(s.state.doc,1e3);return!t||!t.length?!1:(s.dispatch({selection:g.create(t.map(i=>g.range(i.from,i.to)))}),!0)}),vg=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new Ft(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(g.range(l.value.from,l.value.to))}return e(s.update({selection:g.create(r,o)})),!0},Jh=Zi((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main,r=e.nextMatch(t.doc,i,i);if(!r)return!1;let o=[],l,a;if(r.from==i&&r.to==n&&(a=t.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(t.doc,r.from,r.to)),r){let h=o.length==0||o[0].from>=r.to?0:r.to-r.from-a.length;l={anchor:r.from-h,head:r.to-h}}return s.dispatch({changes:o,selection:l,scrollIntoView:!!l,effects:r?Mr(s,r):void 0}),!0}),Qg=Zi((s,{query:e})=>{let t=e.matchAll(s.state.doc,1e9).map(i=>{let{from:n,to:r}=i;return{from:n,to:r,insert:e.getReplacement(i)}});return t.length?(s.dispatch({changes:t}),!0):!1});function Xs(s){let{query:e}=s.state.field(ft);return{dom:Wg({view:s,query:e,updateQuery(t){e.eq(t)||(e=t,s.dispatch({effects:Ar.of(e)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80,top:s.state.facet(yg).top}}function Fh(s,e){let t=s.selection.main,i=t.empty||t.to>t.from+100?"":s.sliceDoc(t.from,t.to);return e&&!i?e:new Cr(i.replace(/\n/g,"\\n"),"",(e==null?void 0:e.caseInsensitive)||!1)}var Hh=s=>{let e=s.state.field(ft,!1);if(e&&e.panel){let t=Ci(s,Xs);if(!t)return!1;t.dom.querySelector("[name=search]").focus()}else s.dispatch({effects:[Zr.of(!0),e?Ar.of(Fh(s.state,e.query)):W.appendConfig.of(Tg)]});return!0},Kh=s=>{let e=s.state.field(ft,!1);if(!e||!e.panel)return!1;let t=Ci(s,Xs);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Zr.of(!1)}),!0},Ig=[{key:"Mod-f",run:Hh,scope:"editor search-panel"},{key:"F3",run:_s,shift:Ls,scope:"editor search-panel"},{key:"Mod-g",run:_s,shift:Ls,scope:"editor search-panel"},{key:"Escape",run:Kh,scope:"editor search-panel"},{key:"Mod-Shift-l",run:vg},{key:"Alt-g",run:fg},{key:"Mod-d",run:wg}];function Wg(s){function e(c){return s.view.state.phrase(c)}let t=j("input",{value:s.query.search,placeholder:e("Find"),"aria-label":e("Find"),class:"cm-textfield",name:"search",onchange:o,onkeyup:o}),i=j("input",{value:s.query.replace,placeholder:e("Replace"),"aria-label":e("Replace"),class:"cm-textfield",name:"replace",onchange:o,onkeyup:o}),n=j("input",{type:"checkbox",name:"case",checked:!s.query.caseInsensitive,onchange:o}),r=j("input",{type:"checkbox",name:"re",checked:s.query instanceof qr,onchange:o});function o(){s.updateQuery(new(r.checked?qr:Cr)(t.value,i.value,!n.checked))}function l(c){aa(s.view,c,"search-panel")?c.preventDefault():c.keyCode==13&&c.target==t?(c.preventDefault(),(c.shiftKey?Ls:_s)(s.view)):c.keyCode==13&&c.target==i&&(c.preventDefault(),Jh(s.view))}function a(c,f,u){return j("button",{class:"cm-button",name:c,onclick:f},u)}return j("div",{onkeydown:l,class:"cm-search"},[t,a("next",()=>_s(s.view),[e("next")]),a("prev",()=>Ls(s.view),[e("previous")]),a("select",()=>kg(s.view),[e("all")]),j("label",null,[n,e("match case")]),j("label",null,[r,e("regexp")]),j("br"),i,a("replace",()=>Jh(s.view),[e("replace")]),a("replaceAll",()=>Qg(s.view),[e("replace all")]),j("button",{name:"close",onclick:()=>Kh(s.view),"aria-label":e("close")},["×"])])}var Vs=30,Ns=/[\s\.,:;?!]/;function Mr(s,{from:e,to:t}){let i=s.state.doc.lineAt(e).from,n=s.state.doc.lineAt(t).to,r=Math.max(i,e-Vs),o=Math.min(n,t+Vs),l=s.state.sliceDoc(r,o);if(r!=i){for(let a=0;a<Vs;a++)if(!Ns.test(l[a+1])&&Ns.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Vs;a--)if(!Ns.test(l[a-1])&&Ns.test(l[a])){l=l.slice(0,a);break}}return k.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${s.state.doc.lineAt(e).number}`)}var Rg=k.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Tg=[ft,jt.override(Pg),Rg],Cg=typeof navigator!="undefined"&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),ec="-10000px",qg=L.fromClass(class{constructor(s){this.view=s,this.inView=!0,this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.input=s.state.facet(Gs),this.tooltips=this.input.filter(e=>e),this.tooltipViews=this.tooltips.map(e=>this.createTooltip(e))}update(s){let e=s.state.facet(Gs);if(e==this.input)for(let t of this.tooltipViews)t.update&&t.update(s);else{let t=e.filter(n=>n),i=[];for(let n=0;n<t.length;n++){let r=t[n],o=-1;if(!!r){for(let l=0;l<this.tooltips.length;l++){let a=this.tooltips[l];a&&a.create==r.create&&(o=l)}if(o<0)i[n]=this.createTooltip(r);else{let l=i[n]=this.tooltipViews[o];l.update&&l.update(s)}}}for(let n of this.tooltipViews)i.indexOf(n)<0&&n.dom.remove();this.input=e,this.tooltips=t,this.tooltipViews=i,this.maybeMeasure()}}createTooltip(s){let e=s.create(this.view);return e.dom.classList.add("cm-tooltip"),s.class&&e.dom.classList.add(s.class),e.dom.style.top=ec,this.view.dom.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){for(let{dom:s}of this.tooltipViews)s.remove()}readMeasure(){return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map(s=>this.view.coordsAtPos(s.pos)),size:this.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}writeMeasure(s){let{editor:e}=s;for(let t=0;t<this.tooltipViews.length;t++){let i=this.tooltips[t],n=this.tooltipViews[t],{dom:r}=n,o=s.pos[t],l=s.size[t];if(!o||o.bottom<=e.top||o.top>=e.bottom||o.right<=e.left||o.left>=e.right){r.style.top=ec;continue}let a=l.right-l.left,h=l.bottom-l.top,c=this.view.textDirection==R.LTR?Math.min(o.left,s.innerWidth-a):Math.max(0,o.left-a),f=!!i.above;!i.strictSide&&(f?o.top-(l.bottom-l.top)<0:o.bottom+(l.bottom-l.top)>s.innerHeight)&&(f=!f),Cg?(r.style.top=(f?o.top-h:o.bottom)-e.top+"px",r.style.left=c-e.left+"px",r.style.position="absolute"):(r.style.top=(f?o.top-h:o.bottom)+"px",r.style.left=c+"px"),r.classList.toggle("cm-tooltip-above",f),r.classList.toggle("cm-tooltip-below",!f),n.positioned&&n.positioned()}}maybeMeasure(){this.tooltips.length&&((this.view.inView||this.inView)&&this.view.requestMeasure(this.measureReq),this.inView=this.view.inView)}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Ag=k.baseTheme({".cm-tooltip":{position:"fixed",zIndex:100},"&light .cm-tooltip":{border:"1px solid #ddd",backgroundColor:"#f5f5f5"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"}}),Gs=S.define({enables:[qg,Ag]}),Er=750,Zg=6,tc=class{constructor(e,t,i,n){this.view=e,this.source=t,this.field=i,this.setHover=n,this.lastMouseMove=null,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now(),t=this.lastMouseMove;e-t.timeStamp<Er?this.hoverTimeout=setTimeout(this.checkHover,Er-(e-t.timeStamp)):this.startHover()}startHover(){var e;clearTimeout(this.restartTimeout);let t=this.lastMouseMove,i={x:t.clientX,y:t.clientY},n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(i):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||i.y<r.top||i.y>r.bottom||i.x<r.left-this.view.defaultCharacterWidth||i.x>r.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(h=>h.from<=n&&h.to>=n),l=o&&o.dir==R.RTL?-1:1,a=this.source(this.view,n,i.x<r.left?-l:l);if((e=a)===null||e===void 0?void 0:e.then){let h=this.pending={pos:n};a.then(c=>{this.pending==h&&(this.pending=null,c&&this.view.dispatch({effects:this.setHover.of(c)}))},c=>Se(this.view.state,c,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMouseMove=e,this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,Er));let i=this.active;if(i&&!Mg(e.target)||this.pending){let{pos:n}=i||this.pending,r=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:n;(n==r?this.view.posAtCoords({x:e.clientX,y:e.clientY})!=n:!Eg(this.view,n,r,e.clientX,e.clientY,Zg))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}};function Mg(s){for(let e=s;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Eg(s,e,t,i,n,r){let o=document.createRange(),l=s.domAtPos(e),a=s.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let h=o.getClientRects();o.detach();for(let c=0;c<h.length;c++){let f=h[c];if(Math.max(f.top-n,n-f.bottom,f.left-i,i-f.right)<=r)return!0}return!1}function Dg(s,e={}){let t=W.define(),i=K.define({create(){return null},update(n,r){if(n&&e.hideOnChange&&(r.docChanged||r.selection))return null;for(let o of r.effects)if(o.is(t))return o.value;if(n&&r.docChanged){let o=r.changes.mapPos(n.pos,-1,se.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),n);return l.pos=o,n.end!=null&&(l.end=r.changes.mapPos(n.end)),l}return n},provide:n=>Gs.from(n)});return[i,L.define(n=>new tc(n,s,i,t))]}var ic=class{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=me(this.state).resolve(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(sc(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};function nc(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function jg(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=nc(e)+nc(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Bg(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:jg(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,span:t}:null}}var Dr=class{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}};function Ht(s){return s.selection.main.head}function sc(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}function rc(s,e){let t=e.completion.apply||e.completion.label,i=e.source;typeof t=="string"?s.dispatch({changes:{from:i.from,to:i.to,insert:t},selection:{anchor:i.from+t.length}}):t(s,e.completion,i.from,i.to)}var oc=new WeakMap;function Yg(s){if(!Array.isArray(s))return s;let e=oc.get(s);return e||oc.set(s,e=Bg(s)),e}var lc=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=z(e,t),n=de(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(z(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let y=z(e,0);return y==t[0]?[0,0,de(y)]:y==i[0]?[-200,0,de(y)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let a=t.length,h=0;if(l<0){for(let y=0,C=Math.min(e.length,200);y<C&&h<a;){let w=z(e,y);(w==t[h]||w==i[h])&&(n[h++]=y),y+=de(w)}if(h<a)return null}let c=0,f=0,u=!1,d=0,p=-1,m=-1,O=/[a-z]/.test(e);for(let y=0,C=Math.min(e.length,200),w=0;y<C&&f<a;){let P=z(e,y);l<0&&(c<a&&P==t[c]&&(r[c++]=y),d<a&&(P==t[d]||P==i[d]?(d==0&&(p=y),m=y,d++):d=0));let v,A=P<255?P>=48&&P<=57||P>=97&&P<=122?2:P>=65&&P<=90?1:0:(v=Gi(P))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(A==1&&O||w==0&&A!=0)&&(t[f]==P||i[f]==P&&(u=!0))&&(o[f++]=y),w=A,y+=de(P)}return f==a&&o[0]==0?this.result(-100+(u?-200:0),o,e):d==a&&p==0?[-200,0,m]:l>-1?[-700,l,l+this.pattern.length]:d==a?[-200+-700,p,m]:f==a?this.result(-100+(u?-200:0)+-700,o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[e],r=1;for(let o of t){let l=o+(this.astral?de(z(i,o)):1);r>1&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return n}},Ct=S.define({combine(s){return Ve(s,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0},{defaultKeymap:(e,t)=>e&&t})}}),jr=300,Xg=k.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}}},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:jr+"px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function ac(s,e,t){let i=document.createElement("ul");i.id=e,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true");for(let n=t.from;n<t.to;n++){let{completion:r,match:o}=s[n],l=i.appendChild(document.createElement("li"));l.id=e+"-"+n;let a=l.appendChild(document.createElement("div"));a.classList.add("cm-completionIcon"),r.type&&a.classList.add(...r.type.split(/\s+/g).map(d=>"cm-completionIcon-"+d)),a.setAttribute("aria-hidden","true");let h=l.appendChild(document.createElement("span"));h.className="cm-completionLabel";let{label:c,detail:f}=r,u=0;for(let d=1;d<o.length;){let p=o[d++],m=o[d++];p>u&&h.appendChild(document.createTextNode(c.slice(u,p)));let O=h.appendChild(document.createElement("span"));O.appendChild(document.createTextNode(c.slice(p,m))),O.className="cm-completionMatchedText",u=m}if(u<c.length&&h.appendChild(document.createTextNode(c.slice(u))),f){let d=l.appendChild(document.createElement("span"));d.className="cm-completionDetail",d.textContent=f}l.setAttribute("role","option")}return t.from&&i.classList.add("cm-completionListIncompleteTop"),t.to<s.length&&i.classList.add("cm-completionListIncompleteBottom"),i}function _g(s,e){let t=document.createElement("div");t.className="cm-tooltip cm-completionInfo";let{info:i}=s.completion;if(typeof i=="string")t.textContent=i;else{let n=i(s.completion);n.then?n.then(r=>t.appendChild(r),r=>Se(e.state,r,"completion info")):t.appendChild(n)}return t}function hc(s,e,t){if(s<=t)return{from:0,to:s};if(e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}var cc=class{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let i=e.state.field(t),{options:n,selected:r}=i.open,o=e.state.facet(Ct);this.range=hc(n.length,r,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let a=l.target,h;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(h=/-(\d+)$/.exec(a.id))&&+h[1]<n.length){rc(e,n[+h[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(ac(n,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=hc(t.options.length,t.selected,this.view.state.facet(Ct).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(ac(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let i=t.options[t.selected];i.completion.info&&(this.info=this.dom.appendChild(_g(i,this.view)),this.view.requestMeasure(this.placeInfo))}}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&Lg(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e)return null;let t=this.dom.getBoundingClientRect(),i=e.getBoundingClientRect().top-t.top;if(i<0||i>this.list.clientHeight-10)return null;let n=this.view.textDirection==R.RTL,r=t.left,o=innerWidth-t.right;return n&&r<Math.min(jr,o)?n=!1:!n&&o<Math.min(jr,r)&&(n=!0),{top:i,left:n}}positionInfo(e){this.info&&e&&(this.info.style.top=e.top+"px",this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left))}};function Vg(s){return e=>new cc(e,s)}function Lg(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?s.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(s.scrollTop+=i.bottom-t.bottom)}var Ng=300;function fc(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function Gg(s,e){let t=[],i=0;for(let o of s)if(o.hasResult())if(o.result.filter===!1)for(let l of o.result.options)t.push(new Dr(l,o,[1e9-i++]));else{let l=new lc(e.sliceDoc(o.from,o.to)),a;for(let h of o.result.options)(a=l.match(h.label))&&(h.boost!=null&&(a[0]+=h.boost),t.push(new Dr(h,o,a)))}t.sort(uc);let n=[],r=null;for(let o of t.sort(uc)){if(n.length==Ng)break;!r||r.label!=o.completion.label||r.detail!=o.completion.detail?n.push(o):fc(o.completion)>fc(r)&&(n[n.length-1]=o),r=o.completion}return n}var Jt=class{constructor(e,t,i,n,r){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Jt(this.options,dc(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,n){let r=Gg(e,t);if(!r.length)return null;let o=0;if(n&&n.selected){let l=n.options[n.selected].completion;for(let a=0;a<r.length&&!o;a++)r[a].completion==l&&(o=a)}return new Jt(r,dc(i,o),{pos:e.reduce((l,a)=>a.hasResult()?Math.min(l,a.from):l,1e8),create:Vg(Ce)},n?n.timestamp:Date.now(),o)}map(e){return new Jt(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}},Mi=class{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Mi(Fg,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ct),r=(i.override||t.languageDataAt("autocomplete",Ht(t)).map(Yg)).map(l=>(this.active.find(h=>h.source==l)||new ce(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,a)=>l==this.active[a])&&(r=this.active);let o=e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Ug(r,this.active)?Jt.build(r,t,this.id,this.open):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new ce(l.source,0):l));for(let l of e.effects)l.is(pc)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new Mi(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:zg}};function Ug(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}function dc(s,e){return{"aria-autocomplete":"list","aria-activedescendant":s+"-"+e,"aria-owns":s}}var zg={"aria-autocomplete":"list"},Fg=[];function uc(s,e){let t=e.match[0]-s.match[0];if(t)return t;let i=s.completion.label,n=e.completion.label;return i<n?-1:i==n?0:1}var ce=class{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=e.annotation(T.userEvent),n=this;i=="input"||i=="delete"?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new ce(n.source,0));for(let r of e.effects)if(r.is(Br))n=new ce(n.source,1,r.value?Ht(e.state):-1);else if(r.is(Yr))n=new ce(n.source,0);else if(r.is(gc))for(let o of r.value)o.source==n.source&&(n=o);return n}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new ce(this.source,1)}handleChange(e){return e.changes.touchesRange(Ht(e.startState))?new ce(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ce(this.source,this.state,e.mapPos(this.explicitPos))}},Ei=class extends ce{constructor(e,t,i,n,r,o){super(e,2,t);this.result=i,this.from=n,this.to=r,this.span=o}hasResult(){return!0}handleUserEvent(e,t,i){let n=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),o=Ht(e.state);if((this.explicitPos>-1?o<n:o<=n)||o>r)return new ce(this.source,t=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return this.span&&(n==r||this.span.test(e.state.sliceDoc(n,r)))?new Ei(this.source,l,this.result,n,r,this.span):new ce(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ce(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ei(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1),this.span)}},Br=W.define(),Yr=W.define(),gc=W.define({map(s,e){return s.map(t=>t.map(e))}}),pc=W.define(),Ce=K.define({create(){return Mi.start()},update(s,e){return s.update(e)},provide:s=>[Gs.from(s,e=>e.tooltip),k.contentAttributes.from(s,e=>e.attrs)]}),mc=75;function Us(s,e="option"){return t=>{let i=t.state.field(Ce,!1);if(!i||!i.open||Date.now()-i.open.timestamp<mc)return!1;let n=1,r;e=="page"&&(r=t.dom.querySelector(".cm-tooltip-autocomplete"))&&(n=Math.max(2,Math.floor(r.offsetHeight/r.firstChild.offsetHeight)));let o=i.open.selected+n*(s?1:-1),{length:l}=i.open.options;return o<0?o=e=="page"?0:l-1:o>=l&&(o=e=="page"?l-1:0),t.dispatch({effects:pc.of(o)}),!0}}var Hg=s=>{let e=s.state.field(Ce,!1);return!e||!e.open||Date.now()-e.open.timestamp<mc?!1:(rc(s,e.open.options[e.open.selected]),!0)},Jg=s=>s.state.field(Ce,!1)?(s.dispatch({effects:Br.of(!0)}),!0):!1,Kg=s=>{let e=s.state.field(Ce,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Yr.of(null)}),!0)},Oc=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},$c=50,em=50,tm=1e3,im=L.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(Ce).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(Ce);if(!s.selectionSet&&!s.docChanged&&s.startState.field(Ce)==e)return;let t=s.transactions.some(i=>{let n=i.annotation(T.userEvent);return(i.selection||i.docChanged)&&n!="input"&&n!="delete"});for(let i=0;i<this.running.length;i++){let n=this.running[i];if(t||n.updates.length+s.transactions.length>em&&n.time-Date.now()>tm){for(let r of n.context.abortListeners)try{r()}catch(o){Se(this.view.state,o)}n.context.abortListeners=null,this.running.splice(i--,1)}else n.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(n=>n.active.source==i.source))?setTimeout(()=>this.startUpdate(),$c):-1,this.composing!=0)for(let i of s.transactions)i.annotation(T.userEvent)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(Ce);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(s){let{state:e}=this.view,t=Ht(e),i=new ic(e,t,s.explicitPos==t),n=new Oc(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Yr.of(null)}),Se(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),$c))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ct);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new Ei(n.active.source,n.active.explicitPos,n.done,n.done.from,(s=n.done.to)!==null&&s!==void 0?s:Ht(n.updates.length?n.updates[0].startState:this.view.state),n.done.span&&n.done.filter!==!1?sc(n.done.span,!0):null);for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(Ce).active.find(o=>o.source==n.active.source);if(r&&r.state==1)if(n.done==null){let o=new ce(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:gc.of(e)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Br.of(!1)}),20),this.composing=0}}});function nm(s={}){return[Ce,Ct.of(s),im,sm,Xg]}var xc=[{key:"Ctrl-Space",run:Jg},{key:"Escape",run:Kg},{key:"ArrowDown",run:Us(!0)},{key:"ArrowUp",run:Us(!1)},{key:"PageDown",run:Us(!0,"page")},{key:"PageUp",run:Us(!1,"page")},{key:"Enter",run:Hg}],sm=jt.override(ds.computeN([Ct],s=>s.facet(Ct).defaultKeymap?[xc]:[])),om=s=>{let e=Xr(s.state);return e.line?rm(s):e.block?wc(s):!1};function yc(s,e){return({state:t,dispatch:i})=>{let n=s(e,t.selection.ranges,t);return n?(i(t.update(n)),!0):!1}}var rm=yc(lm,0),wc=yc(am,0),hm=[{key:"Mod-/",run:om},{key:"Alt-A",run:wc}];function Xr(s,e=s.selection.main.head){let t=s.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var Di=50;function cm(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-Di,i),o=s.sliceDoc(n,n+Di),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,h=r.length-l;if(r.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,f;n-i<=2*Di?c=f=s.sliceDoc(i,n):(c=s.sliceDoc(i,i+Di),f=s.sliceDoc(n-Di,n));let u=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-t.length;return c.slice(u,u+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:i+u+e.length,margin:/\s/.test(c.charAt(u+e.length))?1:0},close:{pos:n-d-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function am(s,e,t){let i=e.map(r=>Xr(t,r.from).block);if(!i.every(r=>r))return null;let n=e.map((r,o)=>cm(t,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r)){let r=0;return t.changeByRange(o=>{let{open:l,close:a}=i[r++];if(n[r])return{range:o};let h=l.length+1;return{changes:[{from:o.from,insert:l+" "},{from:o.to,insert:" "+a}],range:g.range(o.anchor+h,o.head+h)}})}else if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:h,close:c}=l;r.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:r}}return null}function lm(s,e,t){let i=[],n=-1;for(let{from:r,to:o}of e){let l=i.length,a=1e9;for(let h=r;h<=o;){let c=t.doc.lineAt(h);if(c.from>n&&(r==o||o>c.from)){n=c.from;let f=Xr(t,h).line;if(!f)continue;let u=/^\s*/.exec(c.text)[0].length,d=u==c.length,p=c.text.slice(u,u+f.length)==f?u:-1;u<c.text.length&&u<a&&(a=u),i.push({line:c,comment:p,token:f,indent:u,empty:d,single:!1})}h=c.to+1}if(a<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=a);i.length==l+1&&(i[l].single=!0)}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:h,empty:c,single:f}of i)(f||!c)&&r.push({from:l.from+h,insert:a+" "});let o=t.changes(r);return{changes:o,selection:t.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,r.push({from:h,to:c})}return{changes:r}}return null}var zs=2e3;function fm(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>zs||t.off>zs||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let h=s.doc.line(a);h.length<=l&&r.push(g.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let h=s.doc.line(a),c=h.length>zs?h.text.slice(0,2*l):h.text,f=Ui(c,0,o,s.tabSize),u=Ui(c,0,l,s.tabSize);f.leftOver||r.push(g.range(h.from+f.offset,h.from+u.offset))}}return r}function um(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function Sc(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY});if(t==null)return null;let i=s.state.doc.lineAt(t),n=t-i.from,r=n>zs?-1:n==i.length?um(s,e.clientX):gt(i.text.slice(0,t-i.from),0,s.state.tabSize);return{line:i.number,col:r,off:n}}function dm(s,e){let t=Sc(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=Sc(s,n);if(!l)return i;let a=fm(s.state,t,l);return a.length?o?g.create(a.concat(i.ranges)):g.create(a):i}}:null}function pm(s){let e=(s==null?void 0:s.eventFilter)||(t=>t.altKey&&t.button==0);return k.mouseSelectionStyle.of((t,i)=>e(i)?dm(t,i):null)}var bc=class{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}},Ke=class{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t){let i=b.set(e.map(n=>n.from<n.to?b.mark({attributes:{class:"cm-lintRange cm-lintRange-"+n.severity},diagnostic:n}).range(n.from,n.to):b.widget({widget:new Pc(n),diagnostic:n}).range(n.from)),!0);return new Ke(i,t,Kt(i))}};function Kt(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new bc(n,r,o.diagnostic),!1}),i}function $m(s,e,t){return s.field(Oe,!1)?e:e.concat(W.appendConfig.of([t?Oe.init(()=>Ke.init(t,null)):Oe,k.decorations.compute([Oe],i=>{let{selected:n,panel:r}=i.field(Oe);return!n||!r||n.from==n.to?b.none:b.set([gm.range(n.from,n.to)])}),Dg(mm),Om]))}var xm=W.define(),_r=W.define(),kc=W.define(),Oe=K.define({create(){return new Ke(b.none,null,null)},update(s,e){if(e.docChanged){let t=s.diagnostics.map(e.changes),i=null;if(s.selected){let n=e.changes.mapPos(s.selected.from,1);i=Kt(t,s.selected.diagnostic,n)||Kt(t,null,n)}s=new Ke(t,s.panel,i)}for(let t of e.effects)t.is(xm)?s=Ke.init(t.value,s.panel):t.is(_r)?s=new Ke(s.diagnostics,t.value?ji.open:null,s.selected):t.is(kc)&&(s=new Ke(s.diagnostics,s.panel,t.value));return s},provide:s=>[Ai.from(s,e=>e.panel),k.decorations.from(s,e=>e.diagnostics)]}),gm=b.mark({class:"cm-lintRange cm-lintRange-active"});function mm(s,e,t){let{diagnostics:i}=s.state.field(Oe),n=[],r=2e8,o=0;return i.between(e-(t<0?1:0),e+(t>0?1:0),(l,a,{spec:h})=>{e>=l&&e<=a&&(l==a||(e>l||t>0)&&(e<a||t<0))&&(n.push(h.diagnostic),r=Math.min(l,r),o=Math.max(a,o))}),n.length?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:j("ul",{class:"cm-tooltip-lint"},n.map(l=>vc(s,l,!1)))}}}:null}var wm=s=>{let e=s.state.field(Oe,!1);(!e||!e.panel)&&s.dispatch({effects:$m(s.state,[_r.of(!0)])});let t=Ci(s,ji.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Qc=s=>{let e=s.state.field(Oe,!1);return!e||!e.panel?!1:(s.dispatch({effects:_r.of(!1)}),!0)},ym=s=>{let e=s.state.field(Oe,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Sm=[{key:"Mod-Shift-m",run:wm},{key:"F8",run:ym}];function Wc(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function vc(s,e,t){var i;let n=t?Wc(e.actions):[];return j("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},j("span",{class:"cm-diagnosticText"},e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=f=>{f.preventDefault();let u=Kt(s.state.field(Oe).diagnostics,e);u&&r.apply(s,u.from,u.to)},{name:a}=r,h=n[o]?a.indexOf(n[o]):-1,c=h<0?a:[a.slice(0,h),j("u",a.slice(h,h+1)),a.slice(h+1)];return j("button",{class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${a}${h<0?"":` (access key "${n[o]})"`}.`},c)}),e.source&&j("div",{class:"cm-diagnosticSource"},e.source))}var Pc=class extends Me{constructor(e){super();this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return j("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},Lr=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=vc(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},ji=class{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Qc(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.items.length){let{diagnostic:r}=this.items[this.selectedIndex],o=Wc(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Kt(this.view.state.field(Oe).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=j("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=j("div",{class:"cm-panel-lint"},this.list,j("button",{name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Qc(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Oe).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Oe),i=0,n=!1,r=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,c;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){h=f;break}h<0?(c=new Lr(this.view,a.diagnostic),this.items.splice(i,0,c),n=!0):(c=this.items[h],h>i&&(this.items.splice(i,h-i),n=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),r=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Lr(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.items.length||this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.items.length==0)return;let t=this.view.state.field(Oe),i=Kt(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:kc.of(i)})}static open(e){return new ji(e)}};function Vr(s){if(typeof btoa!="function")return"none";let e=`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">
    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>
  </svg>`;return`url('data:image/svg+xml;base64,${btoa(e)}')`}var Om=k.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},".cm-lintRange-error":{backgroundImage:Vr("#d11")},".cm-lintRange-warning":{backgroundImage:Vr("orange")},".cm-lintRange-info":{backgroundImage:Vr("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Nr=[Ld(),Gd(),ma(),Wd(),np(),ca(),I.allowMultipleSelections.of(!0),Wa(),Da.fallback,cp(),eg(),nm(),pm(),wa(),gg(),ds.of([...ng,...Jp,...Ig,...Md,...ep,...hm,...xc,...Sm])];function Tc(){throw new Error("setTimeout has not been defined")}function Ic(){throw new Error("clearTimeout has not been defined")}var ut=Tc,dt=Ic,ei;typeof window!="undefined"?ei=window:typeof self!="undefined"?ei=self:ei={};typeof ei.setTimeout=="function"&&(ut=setTimeout);typeof ei.clearTimeout=="function"&&(dt=clearTimeout);function Rc(s){if(ut===setTimeout)return setTimeout(s,0);if((ut===Tc||!ut)&&setTimeout)return ut=setTimeout,setTimeout(s,0);try{return ut(s,0)}catch(e){try{return ut.call(null,s,0)}catch(t){return ut.call(this,s,0)}}}function bm(s){if(dt===clearTimeout)return clearTimeout(s);if((dt===Ic||!dt)&&clearTimeout)return dt=clearTimeout,clearTimeout(s);try{return dt(s)}catch(e){try{return dt.call(null,s)}catch(t){return dt.call(this,s)}}}var et=[],ti=!1,qt,Fs=-1;function Pm(){!ti||!qt||(ti=!1,qt.length?et=qt.concat(et):Fs=-1,et.length&&Cc())}function Cc(){if(!ti){var s=Rc(Pm);ti=!0;for(var e=et.length;e;){for(qt=et,et=[];++Fs<e;)qt&&qt[Fs].run();Fs=-1,e=et.length}qt=null,ti=!1,bm(s)}}function km(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];et.push(new qc(s,e)),et.length===1&&!ti&&Rc(Cc)}function qc(s,e){this.fun=s,this.array=e}qc.prototype.run=function(){this.fun.apply(null,this.array)};var vm="browser",Qm="browser",Wm=!0,Tm=[],Im="",Rm={},Cm={},qm={};function At(){}var Am=At,Zm=At,Mm=At,Em=At,Dm=At,jm=At,Bm=At;function Ym(s){throw new Error("process.binding is not supported")}function Xm(){return"/"}function _m(s){throw new Error("process.chdir is not supported")}function Lm(){return 0}var ii=ei.performance||{},Vm=ii.now||ii.mozNow||ii.msNow||ii.oNow||ii.webkitNow||function(){return new Date().getTime()};function Nm(s){var e=Vm.call(ii)*.001,t=Math.floor(e),i=Math.floor(e%1*1e9);return s&&(t=t-s[0],i=i-s[1],i<0&&(t--,i+=1e9)),[t,i]}var Gm=new Date;function Um(){var s=new Date,e=s-Gm;return e/1e3}var Ac={nextTick:km,title:vm,browser:Wm,env:{NODE_ENV:"production"},argv:Tm,version:Im,versions:Rm,on:Am,addListener:Zm,once:Mm,off:Em,removeListener:Dm,removeAllListeners:jm,emit:Bm,binding:Ym,cwd:Xm,chdir:_m,umask:Lm,hrtime:Nm,platform:Qm,release:Cm,config:qm,uptime:Um},Bi=class{constructor(e,t,i,n,r,o,l,a,h,c){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Bi(e,[],t,i,i,0,[],0,n?new Gr(n,n.start):null,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,r=n.dynamicPrecedence(i);if(r&&(this.score+=r),t==0){i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.pushState(n.getGoto(this.state,i,!0),this.reducePos),this.reduceContext(i);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],a=this.stack[o-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let c=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,c,h+4,!0)}if(e&262144)this.state=this.stack[o];else{let c=this.stack[o-3];this.state=n.getGoto(c,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i)}storeNode(e,t,i,n=4,r=!1){if(e==0){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=this.pos,r=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),t<=o.maxNode&&this.buffer.push(t,n,i,4),this.shiftContext(t)}else t<=this.p.parser.maxNode&&this.buffer.push(t,this.pos,i,4),this.pos=i}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this.p.input,this))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Bi(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=200}canShift(e){for(let t=new Zc(this);;){let i=this.p.parser.stateSlot(t.top,4)||this.p.parser.hasAction(t.top,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}get ruleStart(){for(let e=this.state,t=this.stack.length;;){let i=this.p.parser.stateSlot(e,5);if(!(i&65536))return 0;if(t-=3*(i>>19),(i&65535)<this.p.parser.minRepeatTerm)return this.stack[t+1];e=this.stack[t]}}startOf(e,t){let i=this.state,n=this.stack.length,{parser:r}=this.p;for(;;){let o=r.stateSlot(i,5),l=o>>19,a=o&65535;if(e.indexOf(a)>-1){let h=n-3*(o>>19),c=this.stack[h+1];if(t==null||t>c)return c}if(n==0)return null;l==0?(n-=3,i=this.stack[n]):(n-=3*(l-1),i=r.getGoto(this.stack[n-3],a,!0))}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[r],o);if(this.stack.length<120)for(let r=0;n.length<4<<1&&r<t.length;r+=2){let o=t[r+1];n.some((l,a)=>a&1&&l==o)||n.push(t[r],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let r=t[n+1];if(r==this.state)continue;let o=this.split();o.storeNode(0,o.pos,o.pos,4,!0),o.pushState(r,this.pos),o.shiftContext(t[n]),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);return(e&65536)==0?!1:(this.p.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100),this.reduce(e),!0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2)&&this.forceReduce(););return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this.p.input,this))}reduceContext(e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this.p.input,this))}emitContext(){let e=this.curContext;if(!e.tracker.strict)return;let t=this.buffer.length-1;(t<0||this.buffer[t]!=-2)&&this.buffer.push(e.hash,this.reducePos,this.reducePos,-2)}updateContext(e){if(e!=this.curContext.context){let t=new Gr(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}},Gr=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.hash(t)}},Mc;(function(s){s[s.Token=200]="Token",s[s.Reduce=100]="Reduce",s[s.MaxNext=4]="MaxNext",s[s.MaxInsertStackDepth=300]="MaxInsertStackDepth",s[s.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Mc||(Mc={}));var Zc=class{constructor(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=(i-1)*3;let n=this.stack.p.parser.getGoto(this.rest[this.offset-3],t,!0);this.top=n}},Yi=class{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e){return new Yi(e,e.bufferBase+e.buffer.length,e.buffer.length)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Yi(this.stack,this.pos,this.index)}},Ur=class{constructor(){this.start=-1,this.value=-1,this.end=-1}accept(e,t){this.value=e,this.end=t}},si=class{constructor(e,t){this.data=e,this.id=t}token(e,t,i){zm(this.data,e,t,i,this.id)}};si.prototype.contextual=si.prototype.fallback=si.prototype.extend=!1;var Hs=class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}};function zm(s,e,t,i,n){let r=0,o=1<<n,l=i.p.parser.dialect;e:for(let a=t.start;(o&s[r])!=0;){let h=s[r+1];for(let f=r+3;f<h;f+=2)if((s[f+1]&o)>0){let u=s[f];if(l.allows(u)&&(t.value==-1||t.value==u||i.p.parser.overrides(u,t.value))){t.accept(u,a);break}}let c=e.get(a++);for(let f=0,u=s[r+2];f<u;){let d=f+u>>1,p=h+d+(d<<1),m=s[p],O=s[p+1];if(c<m)u=d;else if(c>=O)f=d+1;else{r=s[p+2];continue e}}break}}function Xi(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}t?t[n++]=r:t=new e(r)}return t}var Pe=typeof Ac!="undefined"&&/\bparse\b/.test(Ac.env.LOG),zr=null;function Ec(s,e,t){let i=s.cursor(e);for(;;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-5)):Math.min(s.length,Math.max(i.from+1,e+5));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}var Dc=class{constructor(e){this.fragments=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Ec(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Ec(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(o==e&&o+r.length<=this.safeTo)return o==e&&o>=this.safeFrom?r:null;r instanceof kt?(this.index[t]++,this.nextStart=o+r.length):(this.index[t]++,o+r.length>=e&&(this.trees.push(r),this.start.push(o),this.index.push(0)))}}},jc=class extends Ur{constructor(){super(...arguments);this.extended=-1,this.mask=0,this.context=0}clear(e){this.start=e,this.value=this.extended=-1}},Zt=new Ur,Bc=class{constructor(e){this.tokens=[],this.mainToken=Zt,this.actions=[],this.tokens=e.tokenizers.map(t=>new jc)}getActions(e,t){let i=0,n=null,{parser:r}=e.p,{tokenizers:o}=r,l=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0;for(let h=0;h<o.length;h++){if((1<<h&l)==0)continue;let c=o[h],f=this.tokens[h];if(!(n&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=l||f.context!=a)&&(this.updateCachedToken(f,c,e,t),f.mask=l,f.context=a),f.value!=0)){let u=i;if(f.extended>-1&&(i=this.addActions(e,f.extended,f.end,i)),i=this.addActions(e,f.value,f.end,i),!c.extend&&(n=f,i>u))break}}for(;this.actions.length>i;)this.actions.pop();return n||(n=Zt,n.start=e.pos,e.pos==t.length?n.accept(e.p.parser.eofTerm,e.pos):n.accept(0,e.pos+1)),this.mainToken=n,this.actions}updateCachedToken(e,t,i,n){if(e.clear(i.pos),t.token(n,e,i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](n.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else i.pos==n.length?e.accept(i.p.parser.eofTerm,i.pos):e.accept(0,i.pos+1)}putAction(e,t,i,n){for(let r=0;r<n;r+=3)if(this.actions[r]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(r,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=tt(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(tt(l,h+1),t,i,n));break}l[h]==t&&(n=this.putAction(tt(l,h+1),t,i,n))}return n}},Yc;(function(s){s[s.Distance=5]="Distance",s[s.MaxRemainingPerStep=3]="MaxRemainingPerStep",s[s.MinBufferLengthPrune=200]="MinBufferLengthPrune",s[s.ForceReduceLimit=10]="ForceReduceLimit"})(Yc||(Yc={}));var Fr=class{constructor(e,t,i,n){this.parser=e,this.input=t,this.startPos=i,this.context=n,this.pos=0,this.recovering=0,this.nextStackID=9812,this.nested=null,this.nestEnd=0,this.nestWrap=null,this.reused=[],this.tokens=new Bc(e),this.topTerm=e.top[1],this.stacks=[Bi.start(this,e.top[0],this.startPos)];let r=n==null?void 0:n.fragments;this.fragments=r&&r.length?new Dc(r):null}advance(){if(this.nested){let l=this.nested.advance();return this.pos=this.nested.pos,l&&(this.finishNested(this.stacks[0],l),this.nested=null),null}let e=this.stacks,t=this.pos,i=this.stacks=[],n,r,o;for(let l=0;l<e.length;l++){let a=e[l],h;for(;;){if(a.pos>t)i.push(a);else if(h=this.checkNest(a))(!o||o.stack.score<a.score)&&(o=h);else{if(this.advanceStack(a,i,e))continue;{n||(n=[],r=[]),n.push(a);let c=this.tokens.mainToken;r.push(c.value,c.end)}}break}}if(o)return this.startNested(o),null;if(!i.length){let l=n&&Fm(n);if(l)return this.stackToTree(l);if(this.parser.strict)throw Pe&&n&&console.log("Stuck with token "+this.parser.getName(this.tokens.mainToken.value)),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let l=this.runRecovery(n,r,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((a,h)=>h.score-a.score);i.length>l;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let a=i[l];for(let h=l+1;h<i.length;h++){let c=i[h];if(a.sameState(c)||a.buffer.length>200&&c.buffer.length>200)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)i.splice(h--,1);else{i.splice(l--,1);continue e}}}}this.pos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.pos&&(this.pos=i[l].pos);return null}advanceStack(e,t,i){let n=e.pos,{input:r,parser:o}=this,l=Pe?this.stackID(e)+" -> ":"";if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,f=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(n);u;){let d=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(e.state,u.type.id):-1;if(d>-1&&u.length&&(!c||(u.contextHash||0)==f))return e.useNode(u,d),Pe&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof V)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof V)u=p;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),Pe&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;let h=this.tokens.getActions(e,r);for(let c=0;c<h.length;){let f=h[c++],u=h[c++],d=h[c++],p=c==h.length||!i,m=p?e:e.split();if(m.apply(f,u,d),Pe&&console.log(l+this.stackID(m)+` (via ${(f&65536)==0?"shift":`reduce of ${o.getName(f&65535)}`} for ${o.getName(u)} @ ${n}${m==e?"":", split"})`),p)return!0;m.pos>n?t.push(m):i.push(m)}return!1}advanceFully(e,t){let i=e.pos;for(;;){let n=this.checkNest(e);if(n)return n;if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Xc(e,t),!0}}runRecovery(e,t,i){let n=null,r=!1,o;for(let l=0;l<e.length;l++){let a=e[l],h=t[l<<1],c=t[(l<<1)+1],f=Pe?this.stackID(a)+" -> ":"";if(a.deadEnd){if(r)continue;r=!0,a.restart(),Pe&&console.log(f+this.stackID(a)+" (restarted)");let p=this.advanceFully(a,i);if(p){p!==!0&&(o=p);continue}}let u=a.split(),d=f;for(let p=0;u.forceReduce()&&p<10;p++){Pe&&console.log(d+this.stackID(u)+" (via force-reduce)");let m=this.advanceFully(u,i);if(m){m!==!0&&(o=m);break}Pe&&(d=this.stackID(u)+" -> ")}for(let p of a.recoverByInsert(h))Pe&&console.log(f+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.input.length>a.pos?(c==a.pos&&(c++,h=0),a.recoverByDelete(h,c),Pe&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(h)})`),Xc(a,i)):(!n||n.score<a.score)&&(n=a)}if(n)return n;if(o){for(let l of this.stacks)if(l.score>o.stack.score){o=void 0;break}}return o&&this.startNested(o),null}forceFinish(){let e=this.stacks[0].split();return this.nested&&this.finishNested(e,this.nested.forceFinish()),this.stackToTree(e.forceAll())}stackToTree(e,t=e.pos){return this.parser.context&&e.emitContext(),V.build({buffer:Yi.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.startPos,length:t-this.startPos,minRepeatType:this.parser.minRepeatTerm})}checkNest(e){let t=this.parser.findNested(e.state);if(!t)return null;let i=t.value;return typeof i=="function"&&(i=i(this.input,e)),i?{stack:e,info:t,spec:i}:null}startNested(e){let{stack:t,info:i,spec:n}=e;this.stacks=[t],this.nestEnd=this.scanForNestEnd(t,i.end,n.filterEnd),this.nestWrap=typeof n.wrapType=="number"?this.parser.nodeSet.types[n.wrapType]:n.wrapType||null,n.startParse?this.nested=n.startParse(this.input.clip(this.nestEnd),t.pos,this.context):this.finishNested(t)}scanForNestEnd(e,t,i){for(let n=e.pos;n<this.input.length;n++)if(Zt.start=n,Zt.value=-1,t.token(this.input,Zt,e),Zt.value>-1&&(!i||i(this.input.read(n,Zt.end))))return n;return this.input.length}finishNested(e,t){this.nestWrap?t=new V(this.nestWrap,t?[t]:[],t?[0]:[],this.nestEnd-e.pos):t||(t=new V(J.none,[],[],this.nestEnd-e.pos));let i=this.parser.findNested(e.state);e.useNode(t,this.parser.getGoto(e.state,i.placeholder,!0)),Pe&&console.log(this.stackID(e)+" (via unnest)")}stackID(e){let t=(zr||(zr=new WeakMap)).get(e);return t||zr.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};function Xc(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}var _c=class{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}},Hr=s=>s,Lc=class{constructor(e){this.start=e.start,this.shift=e.shift||Hr,this.reduce=e.reduce||Hr,this.reuse=e.reuse||Hr,this.hash=e.hash,this.strict=e.strict!==!1}},_i=class{constructor(e){if(this.bufferLength=gs,this.strict=!1,this.cachedDialect=null,e.version!=13)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${13})`);let t=Xi(e.tokenData),i=e.nodeNames.split(" ");this.minRepeatTerm=i.length,this.context=e.context;for(let l=0;l<e.repeatNodeCount;l++)i.push("");let n=[];for(let l=0;l<i.length;l++)n.push([]);function r(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];for(let h=1;h<l.length;){let c=l[h++];if(c>=0)r(c,a,l[h++]);else{let f=l[h+-c];for(let u=-c;u>0;u--)r(l[h++],a,f);h++}}}if(this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=Xi(e.states,Uint32Array),this.data=Xi(e.stateData),this.goto=Xi(e.goto);let o=Object.keys(e.topRules).map(l=>e.topRules[l][1]);this.nodeSet=new Si(i.map((l,a)=>J.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:o.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new si(t,l):l),this.topRules=e.topRules,this.nested=(e.nested||[]).map(([l,a,h,c])=>({name:l,value:a,end:new si(Xi(h),0),placeholder:c})),this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}parse(e,t=0,i={}){typeof e=="string"&&(e=tr(e));let n=new Fr(this,e,t,i);for(;;){let r=n.advance();if(r)return r}}startParse(e,t=0,i={}){return typeof e=="string"&&(e=tr(e)),new Fr(this,e,t,i)}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let o=n[r++],l=o&1,a=n[r++];if(l&&i)return a;for(let h=r+(o>>1);r<h;r++)if(n[r]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(e,n?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=tt(i,r+2)];else{if(i[r+1]==2)return tt(i,r+2);break}if(o==t||o==0)return tt(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}findNested(e){let t=this.stateSlot(e,0);return t&4?this.nested[t>>10]:null}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=tt(this.data,i+2);else return!1;if(t==tt(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=tt(this.data,i+2);else break;if((this.data[i+2]&65536>>16)==0){let n=this.data[i+1];t.some((r,o)=>o&1&&r==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=Vc(this.data,this.tokenPrecTable,t);return i<0||Vc(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(_i.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(r=>r.from==i);return n?n.to:i})),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.nested&&(t.nested=this.nested.map(i=>Object.prototype.hasOwnProperty.call(e.nested,i.name)?{name:i.name,value:e.nested[i.name],end:i.end,placeholder:i.placeholder}:i)),e.strict!=null&&(t.strict=e.strict),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get hasNested(){return this.nested.length>0}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){if(this.cachedDialect&&this.cachedDialect.source==e)return this.cachedDialect;let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let n=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return this.cachedDialect=new _c(e,i,n)}static deserialize(e){return new _i(e)}};function tt(s,e){return s[e]|s[e+1]<<16}function Vc(s,e,t){for(let i=e,n;(n=s[i])!=65535;i++)if(n==t)return i-e;return-1}function Fm(s){let e=null;for(let t of s)t.pos==t.p.input.length&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t);return e}var Hm=1,Nc=162,Gc=163,Jm=164,Km=165,eO=166,tO=167,iO=21,sO=47,nO=48,rO=52,oO=55,lO=56,aO=59,hO=60,cO=61,Js=10,Ks=13,Uc=32,zc=9,Fc=35,fO=40,uO=46,Hc=[iO,sO,nO,rO,oO,lO,aO,hO,cO],Jc=0,Kc=null,ef=0;function Jr(s,e){return e==ef&&s==Kc?Jc:(Kc=s,ef=e,Jc=dO(s,e))}function dO(s,e){for(let t=0;;e++){let i=s.get(e);if(i==Uc)t++;else if(i==zc)t+=8-t%8;else return i==Js||i==Ks||i==Fc?-1:t}}var pO=new Hs((s,e,t)=>{let i=s.get(e.start);i<0?e.accept(tO,e.start):i!=Js&&i!=Ks||(t.startOf(Hc)!=null?e.accept(Km,e.start+1):Jr(s,e.start+1)<0?e.accept(eO,e.start+1):e.accept(Jm,e.start+1))},{contextual:!0,fallback:!0}),gO=new Hs((s,e,t)=>{let i=s.get(e.start-1),n;(i==Js||i==Ks)&&(n=Jr(s,e.start))>=0&&n!=t.context.depth&&t.startOf(Hc)==null&&e.accept(n<t.context.depth?Gc:Nc,e.start)});function tf(s,e){this.parent=s,this.depth=e,this.hash=(s?s.hash+s.hash<<8:0)+e+(e<<4)}var mO=new tf(null,0),OO=new Lc({start:mO,shift(s,e,t,i){return e==Nc?new tf(s,Jr(t,i.pos)):e==Gc?s.parent:s},hash(s){return s.hash}}),$O=new Hs((s,e)=>{let t=e.start;for(let n="print",r=0;r<n.length;r++,t++)if(s.get(t)!=n.charCodeAt(r))return;let i=t;if(!/\w/.test(String.fromCharCode(s.get(t))))for(;;t++){let n=s.get(t);if(!(n==Uc||n==zc)){n!=fO&&n!=uO&&n!=Js&&n!=Ks&&n!=Fc&&e.accept(Hm,i);return}}}),xO={__proto__:null,await:40,or:48,and:50,in:54,not:56,is:58,if:64,else:66,lambda:70,yield:88,from:90,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250},wO=_i.deserialize({version:13,states:"!?|O`Q$IXOOO%cQ$I[O'#GaOOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'RQ$IWO'#ClO(tQ$I[O'#G`OOQ$IS'#Ga'#GaOOQ$IS'#DR'#DROOQ$IS'#G`'#G`O)bQ$IWO'#CqO)rQ$IWO'#DbO*SQ$IWO'#DfOOQ$IS'#Ds'#DsO*gO`O'#DsO*oOpO'#DsO*wO!bO'#DtO+SO#tO'#DtO+_O&jO'#DtO+jO,UO'#DtO-lQ$I[O'#GQOOQ$IS'#GQ'#GQO'RQ$IWO'#GPO/OQ$I[O'#GPOOQ$IS'#E]'#E]O/gQ$IWO'#E^OOQ$IS'#GO'#GOO/qQ$IWO'#F}OOQ$IV'#F}'#F}O/|Q$IWO'#FPOOQ$IS'#Fr'#FrO0RQ$IWO'#FOOOQ$IV'#HZ'#HZOOQ$IV'#F|'#F|OOQ$IT'#FR'#FRQ`Q$IXOOO'RQ$IWO'#CoO0aQ$IWO'#CzO0hQ$IWO'#DOO0vQ$IWO'#GeO1WQ$I[O'#EQO'RQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1lQ$IWO'#EZO2SQ$IWO'#E_O/|Q$IWO'#EaO2gQ$I[O'#EaO/|Q$IWO'#EdO/gQ$IWO'#EgO/gQ$IWO'#EkO/gQ$IWO'#EnO2rQ$IWO'#EpO2yQ$IWO'#EuO3UQ$IWO'#EqO/gQ$IWO'#EuO/|Q$IWO'#EwO/|Q$IWO'#E|OOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O3ZQ$IWO'#DmOOQ$IS,5:W,5:WO3nQ$IWO,5:ZO3{Q%1`O,5:ZO4QQ$I[O,59WO0aQ$IWO,59_O0aQ$IWO,59_O0aQ$IWO,59_O6pQ$IWO,59_O6uQ$IWO,59_O6|Q$IWO,59gO7TQ$IWO'#G`O8ZQ$IWO'#G_OOQ$IS'#G_'#G_OOQ$IS'#DX'#DXO8rQ$IWO,59]O'RQ$IWO,59]O9QQ$IWO,59]O9VQ$IWO,5:PO'RQ$IWO,5:POOQ$IS,59|,59|O9eQ$IWO,59|O9jQ$IWO,5:VO'RQ$IWO,5:VO'RQ$IWO,5:TOOQ$IS,5:Q,5:QO9{Q$IWO,5:QO:QQ$IWO,5:UOOOO'#FZ'#FZO:VO`O,5:_OOQ$IS,5:_,5:_OOOO'#F['#F[O:_OpO,5:_O:gQ$IWO'#DuOOOO'#F]'#F]O:wO!bO,5:`OOQ$IS,5:`,5:`OOOO'#F`'#F`O;SO#tO,5:`OOOO'#Fa'#FaO;_O&jO,5:`OOOO'#Fb'#FbO;jO,UO,5:`OOQ$IS'#Fc'#FcO;uQ$I[O,5:dO>gQ$I[O,5<kO?QQ%GlO,5<kO?qQ$I[O,5<kOOQ$IS,5:x,5:xO@YQ$IXO'#FkOAiQ$IWO,5;TOOQ$IV,5<i,5<iOAtQ$I[O'#HWOB]Q$IWO,5;kOOQ$IS-E9p-E9pOOQ$IV,5;j,5;jO3PQ$IWO'#EwOOQ$IT-E9P-E9POBeQ$I[O,59ZODlQ$I[O,59fOEVQ$IWO'#GbOEbQ$IWO'#GbO/|Q$IWO'#GbOEmQ$IWO'#DQOEuQ$IWO,59jOEzQ$IWO'#GfO'RQ$IWO'#GfO/gQ$IWO,5=POOQ$IS,5=P,5=PO/gQ$IWO'#D|OOQ$IS'#D}'#D}OFiQ$IWO'#FeOFyQ$IWO,58zOGXQ$IWO,58zO)eQ$IWO,5:jOG^Q$I[O'#GhOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGqQ$IWO,5:yOHSQ$IWO,5:{OOQ$IS'#Fh'#FhOHbQ$I[O,5:{OHpQ$IWO,5:{OHuQ$IWO'#HYOOQ$IS,5;O,5;OOITQ$IWO'#HVOOQ$IS,5;R,5;RO3UQ$IWO,5;VO3UQ$IWO,5;YOIfQ$I[O'#H[O'RQ$IWO'#H[OIpQ$IWO,5;[O2rQ$IWO,5;[O/gQ$IWO,5;aO/|Q$IWO,5;cOIuQ$IXO'#ElOKOQ$IZO,5;]ONaQ$IWO'#H]O3UQ$IWO,5;aONlQ$IWO,5;cONqQ$IWO,5;hO!#fQ$I[O1G.hO!#mQ$I[O1G.hO!&^Q$I[O1G.hO!&hQ$I[O1G.hO!)RQ$I[O1G.hO!)fQ$I[O1G.hO!)yQ$IWO'#GnO!*XQ$I[O'#GQO/gQ$IWO'#GnO!*cQ$IWO'#GmOOQ$IS,5:X,5:XO!*kQ$IWO,5:XO!*pQ$IWO'#GoO!*{Q$IWO'#GoO!+`Q$IWO1G/uOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.y1G.yO!,`Q$I[O1G.yO!,gQ$I[O1G.yO0aQ$IWO1G.yO!-SQ$IWO1G/ROOQ$IS'#DW'#DWO/gQ$IWO,59qOOQ$IS1G.w1G.wO!-ZQ$IWO1G/cO!-kQ$IWO1G/cO!-sQ$IWO1G/dO'RQ$IWO'#GgO!-xQ$IWO'#GgO!-}Q$I[O1G.wO!._Q$IWO,59fO!/eQ$IWO,5=VO!/uQ$IWO,5=VO!/}Q$IWO1G/kO!0SQ$I[O1G/kOOQ$IS1G/h1G/hO!0dQ$IWO,5=QO!1ZQ$IWO,5=QO/gQ$IWO1G/oO!1xQ$IWO1G/qO!1}Q$I[O1G/qO!2_Q$I[O1G/oOOQ$IS1G/l1G/lOOQ$IS1G/p1G/pOOOO-E9X-E9XOOQ$IS1G/y1G/yOOOO-E9Y-E9YO!2oQ$IWO'#GzO/gQ$IWO'#GzO!2}Q$IWO,5:aOOOO-E9Z-E9ZOOQ$IS1G/z1G/zOOOO-E9^-E9^OOOO-E9_-E9_OOOO-E9`-E9`OOQ$IS-E9a-E9aO!3YQ%GlO1G2VO!3yQ$I[O1G2VO'RQ$IWO,5<OOOQ$IS,5<O,5<OOOQ$IS-E9b-E9bOOQ$IS,5<V,5<VOOQ$IS-E9i-E9iOOQ$IV1G0o1G0oO/|Q$IWO'#FgO!4bQ$I[O,5=rOOQ$IS1G1V1G1VO!4yQ$IWO1G1VOOQ$IS'#DS'#DSO/gQ$IWO,5<|OOQ$IS,5<|,5<|O!5OQ$IWO'#FSO!5ZQ$IWO,59lO!5cQ$IWO1G/UO!5mQ$I[O,5=QOOQ$IS1G2k1G2kOOQ$IS,5:h,5:hO!6^Q$IWO'#GPOOQ$IS,5<P,5<POOQ$IS-E9c-E9cO!6oQ$IWO1G.fOOQ$IS1G0U1G0UO!6}Q$IWO,5=SO!7_Q$IWO,5=SO/gQ$IWO1G0eO/gQ$IWO1G0eO/|Q$IWO1G0gOOQ$IS-E9f-E9fO!7pQ$IWO1G0gO!7{Q$IWO1G0gO!8QQ$IWO,5=tO!8`Q$IWO,5=tO!8nQ$IWO,5=qO!9UQ$IWO,5=qO!9gQ$IZO1G0qO!<uQ$IZO1G0tO!@QQ$IWO,5=vO!@[Q$IWO,5=vO!@dQ$I[O,5=vO/gQ$IWO1G0vO!@nQ$IWO1G0vO3UQ$IWO1G0{ONlQ$IWO1G0}OOQ$IV,5;W,5;WO!@sQ$IYO,5;WO!@xQ$IZO1G0wO!DZQ$IWO'#FoO3UQ$IWO1G0wO3UQ$IWO1G0wO!DhQ$IWO,5=wO!DuQ$IWO,5=wO/|Q$IWO,5=wOOQ$IV1G0{1G0{O!D}Q$IWO'#EyO!E`Q%1`O1G0}OOQ$IV1G1S1G1SO3UQ$IWO1G1SOOQ$IS,5=Y,5=YOOQ$IS'#Dn'#DnO/gQ$IWO,5=YO!EhQ$IWO,5=XO!E{Q$IWO,5=XOOQ$IS1G/s1G/sO!FTQ$IWO,5=ZO!FeQ$IWO,5=ZO!FmQ$IWO,5=ZO!GQQ$IWO,5=ZO!GbQ$IWO,5=ZOOQ$IS7+%a7+%aOOQ$IS7+$e7+$eO!5cQ$IWO7+$mO!ITQ$IWO1G.yO!I[Q$IWO1G.yOOQ$IS1G/]1G/]OOQ$IS,5;p,5;pO'RQ$IWO,5;pOOQ$IS7+$}7+$}O!IcQ$IWO7+$}OOQ$IS-E9S-E9SOOQ$IS7+%O7+%OO!IsQ$IWO,5=RO'RQ$IWO,5=ROOQ$IS7+$c7+$cO!IxQ$IWO7+$}O!JQQ$IWO7+%OO!JVQ$IWO1G2qOOQ$IS7+%V7+%VO!JgQ$IWO1G2qO!JoQ$IWO7+%VOOQ$IS,5;o,5;oO'RQ$IWO,5;oO!JtQ$IWO1G2lOOQ$IS-E9R-E9RO!KkQ$IWO7+%ZOOQ$IS7+%]7+%]O!KyQ$IWO1G2lO!LhQ$IWO7+%]O!LmQ$IWO1G2rO!L}Q$IWO1G2rO!MVQ$IWO7+%ZO!M[Q$IWO,5=fO!MrQ$IWO,5=fO!MrQ$IWO,5=fO!NQO!LQO'#DwO!N]OSO'#G{OOOO1G/{1G/{O!NbQ$IWO1G/{O!NjQ%GlO7+'qO# ZQ$I[O1G1jP# tQ$IWO'#FdOOQ$IS,5<R,5<ROOQ$IS-E9e-E9eOOQ$IS7+&q7+&qOOQ$IS1G2h1G2hOOQ$IS,5;n,5;nOOQ$IS-E9Q-E9QOOQ$IS7+$p7+$pO#!RQ$IWO,5<kO#!lQ$IWO,5<kO#!}Q$I[O,5;qO##bQ$IWO1G2nOOQ$IS-E9T-E9TOOQ$IS7+&P7+&PO##rQ$IWO7+&POOQ$IS7+&R7+&RO#$QQ$IWO'#HXO/|Q$IWO7+&RO#$fQ$IWO7+&ROOQ$IS,5<U,5<UO#$qQ$IWO1G3`OOQ$IS-E9h-E9hOOQ$IS,5<Q,5<QO#%PQ$IWO1G3]OOQ$IS-E9d-E9dO#%gQ$IZO7+&]O!DZQ$IWO'#FmO3UQ$IWO7+&]O3UQ$IWO7+&`O#(uQ$I[O,5<YO'RQ$IWO,5<YO#)PQ$IWO1G3bOOQ$IS-E9l-E9lO#)ZQ$IWO1G3bO3UQ$IWO7+&bO/gQ$IWO7+&bOOQ$IV7+&g7+&gO!E`Q%1`O7+&iO#)cQ$IXO1G0rOOQ$IV-E9m-E9mO3UQ$IWO7+&cO3UQ$IWO7+&cOOQ$IV,5<Z,5<ZO#+UQ$IWO,5<ZOOQ$IV7+&c7+&cO#+aQ$IZO7+&cO#.lQ$IWO,5<[O#.wQ$IWO1G3cOOQ$IS-E9n-E9nO#/UQ$IWO1G3cO#/^Q$IWO'#H_O#/lQ$IWO'#H_O/|Q$IWO'#H_OOQ$IS'#H_'#H_O#/wQ$IWO'#H^OOQ$IS,5;e,5;eO#0PQ$IWO,5;eO/gQ$IWO'#E{OOQ$IV7+&i7+&iO3UQ$IWO7+&iOOQ$IV7+&n7+&nOOQ$IS1G2t1G2tOOQ$IS,5;s,5;sO#0UQ$IWO1G2sOOQ$IS-E9V-E9VO#0iQ$IWO,5;tO#0tQ$IWO,5;tO#1XQ$IWO1G2uOOQ$IS-E9W-E9WO#1iQ$IWO1G2uO#1qQ$IWO1G2uO#2RQ$IWO1G2uO#1iQ$IWO1G2uOOQ$IS<<HX<<HXO#2^Q$I[O1G1[OOQ$IS<<Hi<<HiP#2kQ$IWO'#FUO6|Q$IWO1G2mO#2xQ$IWO1G2mO#2}Q$IWO<<HiOOQ$IS<<Hj<<HjO#3_Q$IWO7+(]OOQ$IS<<Hq<<HqO#3oQ$I[O1G1ZP#4`Q$IWO'#FTO#4mQ$IWO7+(^O#4}Q$IWO7+(^O#5VQ$IWO<<HuO#5[Q$IWO7+(WOOQ$IS<<Hw<<HwO#6RQ$IWO,5;rO'RQ$IWO,5;rOOQ$IS-E9U-E9UOOQ$IS<<Hu<<HuOOQ$IS,5;x,5;xO/gQ$IWO,5;xO#6WQ$IWO1G3QOOQ$IS-E9[-E9[O#6nQ$IWO1G3QOOOO'#F_'#F_O#6|O!LQO,5:cOOOO,5=g,5=gOOOO7+%g7+%gO#7XQ$IWO1G2VO#7rQ$IWO1G2VP'RQ$IWO'#FVO/gQ$IWO<<IkO#8TQ$IWO,5=sO#8fQ$IWO,5=sO/|Q$IWO,5=sO#8wQ$IWO<<ImOOQ$IS<<Im<<ImO/|Q$IWO<<ImP/|Q$IWO'#FjP/gQ$IWO'#FfOOQ$IV-E9k-E9kO3UQ$IWO<<IwOOQ$IV,5<X,5<XO3UQ$IWO,5<XOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#8|Q$I[O1G1tP#9WQ$IWO'#FnO#9_Q$IWO7+(|O#9iQ$IZO<<I|O3UQ$IWO<<I|OOQ$IV<<JT<<JTO3UQ$IWO<<JTOOQ$IV'#Fl'#FlO#<tQ$IZO7+&^OOQ$IV<<I}<<I}O#>mQ$IZO<<I}OOQ$IV1G1u1G1uO/|Q$IWO1G1uO3UQ$IWO<<I}O/|Q$IWO1G1vP/gQ$IWO'#FpO#AxQ$IWO7+(}O#BVQ$IWO7+(}OOQ$IS'#Ez'#EzO/gQ$IWO,5=yO#B_Q$IWO,5=yOOQ$IS,5=y,5=yO#BjQ$IWO,5=xO#B{Q$IWO,5=xOOQ$IS1G1P1G1POOQ$IS,5;g,5;gP#CTQ$IWO'#FXO#CeQ$IWO1G1`O#CxQ$IWO1G1`O#DYQ$IWO1G1`P#DeQ$IWO'#FYO#DrQ$IWO7+(aO#ESQ$IWO7+(aO#ESQ$IWO7+(aO#E[Q$IWO7+(aO#ElQ$IWO7+(XO6|Q$IWO7+(XOOQ$ISAN>TAN>TO#FVQ$IWO<<KxOOQ$ISAN>aAN>aO/gQ$IWO1G1^O#FgQ$I[O1G1^P#FqQ$IWO'#FWOOQ$IS1G1d1G1dP#GOQ$IWO'#F^O#G]Q$IWO7+(lOOOO-E9]-E9]O#GsQ$IWO7+'qOOQ$ISAN?VAN?VO#H^Q$IWO,5<TO#HrQ$IWO1G3_OOQ$IS-E9g-E9gO#ITQ$IWO1G3_OOQ$ISAN?XAN?XO#IfQ$IWOAN?XOOQ$IVAN?cAN?cOOQ$IV1G1s1G1sO3UQ$IWOAN?hO#IkQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E9j-E9jOOQ$IV<<Ix<<IxO3UQ$IWOAN?iO3UQ$IWO7+'aOOQ$IVAN?iAN?iOOQ$IS7+'b7+'bO#LvQ$IWO<<LiOOQ$IS1G3e1G3eO/gQ$IWO1G3eOOQ$IS,5<],5<]O#MTQ$IWO1G3dOOQ$IS-E9o-E9oO#MfQ$IWO7+&zO#MvQ$IWO7+&zOOQ$IS7+&z7+&zO#NRQ$IWO<<K{O#NcQ$IWO<<K{O#NcQ$IWO<<K{O#NkQ$IWO'#GiOOQ$IS<<Ks<<KsO#NuQ$IWO<<KsOOQ$IS7+&x7+&xO/|Q$IWO1G1oP/|Q$IWO'#FiO$ `Q$IWO7+(yO$ qQ$IWO7+(yOOQ$ISG24sG24sOOQ$IVG25SG25SO3UQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<J{<<J{OOQ$IS7+)P7+)PP$!SQ$IWO'#FqOOQ$IS<<Jf<<JfO$!bQ$IWO<<JfO$!rQ$IWOANAgO$#SQ$IWOANAgO$#[Q$IWO'#GjOOQ$IS'#Gj'#GjO0hQ$IWO'#DaO$#uQ$IWO,5=TOOQ$ISANA_ANA_OOQ$IS7+'Z7+'ZO$$^Q$IWO<<LeOOQ$IVLD*nLD*nOOQ$ISAN@QAN@QO$$oQ$IWOG27RO$%PQ$IWO,59{OOQ$IS1G2o1G2oO#NkQ$IWO1G/gOOQ$IS7+%R7+%RO6|Q$IWO'#CzO6|Q$IWO,59_O6|Q$IWO,59_O6|Q$IWO,59_O$%UQ$I[O,5<kO6|Q$IWO1G.yO/gQ$IWO1G/UO/gQ$IWO7+$mP$%iQ$IWO'#FdO'RQ$IWO'#GPO$%vQ$IWO,59_O$%{Q$IWO,59_O$&SQ$IWO,59jO$&XQ$IWO1G/RO0hQ$IWO'#DOO6|Q$IWO,59g",stateData:"$&o~O$oOS$lOS$kOSQOS~OPhOTeOdsOfXOltOp!SOsuO|vO}!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO$jqO$zQO${QO%PRO%QVO%e[O%f]O%i^O%l_O%r`O%uaO%wbO~OT!aO]!aO_!bOf!iO!V!kO!d!lO$u![O$v!]O$w!^O$x!_O$y!_O$z!`O${!`O$|!aO$}!aO%O!aO~Oh%TXi%TXj%TXk%TXl%TXm%TXp%TXw%TXx%TX!s%TX#^%TX$j%TX$m%TX%V%TX!O%TX!R%TX!S%TX%W%TX!W%TX![%TX}%TX#V%TXq%TX!j%TX~P$_OdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO$zQO${QO%PRO%QVO%e[O%f]O%i^O%l_O%r`O%uaO%wbO~Ow%SXx%SX#^%SX$j%SX$m%SX%V%SX~Oh!oOi!pOj!nOk!nOl!qOm!rOp!sO!s%SX~P(`OT!yOl-fOs-tO|vO~P'ROT!|Ol-fOs-tO!W!}O~P'ROT#QO_#ROl-fOs-tO![#SO~P'RO%g#VO%h#XO~O%j#YO%k#XO~O!Z#[O%m#]O%q#_O~O!Z#[O%s#`O%t#_O~O!Z#[O%h#_O%v#bO~O!Z#[O%k#_O%x#dO~OT$tX]$tX_$tXf$tXh$tXi$tXj$tXk$tXl$tXm$tXp$tXw$tX!V$tX!d$tX$u$tX$v$tX$w$tX$x$tX$y$tX$z$tX${$tX$|$tX$}$tX%O$tX!O$tX!R$tX!S$tX~O%e[O%f]O%i^O%l_O%r`O%uaO%wbOx$tX!s$tX#^$tX$j$tX$m$tX%V$tX%W$tX!W$tX![$tX}$tX#V$tXq$tX!j$tX~P+uOw#iOx$sX!s$sX#^$sX$j$sX$m$sX%V$sX~Ol-fOs-tO~P'RO#^#lO$j#nO$m#nO~O%QVO~O!R#sO#l!YO#q!ZO#tlO~OltO~P'ROT#xO_#yO%QVOxtP~OT#}Ol-fOs-tO}$OO~P'ROx$QO!s$VO%V$RO#^!tX$j!tX$m!tX~OT#}Ol-fOs-tO#^!}X$j!}X$m!}X~P'ROl-fOs-tO#^#RX$j#RX$m#RX~P'RO!d$]O!m$]O%QVO~OT$gO~P'RO!S$iO#j$jO#l$kO~Ox$lO~OT$zO_$zOl-fOs-tO!O$|O~P'ROl-fOs-tOx%PO~P'RO%d%RO~O_!bOf!iO!V!kO!d!lOT`a]`ah`ai`aj`ak`al`am`ap`aw`ax`a!s`a#^`a$j`a$m`a$u`a$v`a$w`a$x`a$y`a$z`a${`a$|`a$}`a%O`a%V`a!O`a!R`a!S`a%W`a!W`a![`a}`a#V`aq`a!j`a~Ok%WO~Ol%WO~P'ROl-fO~P'ROh-hOi-iOj-gOk-gOl-pOm-qOp-uO!O%SX!R%SX!S%SX%W%SX!W%SX![%SX}%SX#V%SX!j%SX~P(`O%W%YOw%RX!O%RX!R%RX!S%RX!W%RXx%RX~Ow%]O!O%[O!R%aO!S%`O~O!O%[O~Ow%dO!R%aO!S%`O!W%_X~O!W%hO~Ow%iOx%kO!R%aO!S%`O![%YX~O![%oO~O![%pO~O%g#VO%h%rO~O%j#YO%k%rO~OT%uOl-fOs-tO|vO~P'RO!Z#[O%m#]O%q%xO~O!Z#[O%s#`O%t%xO~O!Z#[O%h%xO%v#bO~O!Z#[O%k%xO%x#dO~OT!la]!la_!laf!lah!lai!laj!lak!lal!lam!lap!law!lax!la!V!la!d!la!s!la#^!la$j!la$m!la$u!la$v!la$w!la$x!la$y!la$z!la${!la$|!la$}!la%O!la%V!la!O!la!R!la!S!la%W!la!W!la![!la}!la#V!laq!la!j!la~P#vOw%}Ox$sa!s$sa#^$sa$j$sa$m$sa%V$sa~P$_OT&POltOsuOx$sa!s$sa#^$sa$j$sa$m$sa%V$sa~P'ROw%}Ox$sa!s$sa#^$sa$j$sa$m$sa%V$sa~OPhOTeOltOsuO|vO}!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$_X$j$_X$m$_X~P'RO#^#lO$j&UO$m&UO~O!d&VOf%zX$j%zX#V%zX#^%zX$m%zX#U%zX~Of!iO$j&XO~Ohcaicajcakcalcamcapcawcaxca!sca#^ca$jca$mca%Vca!Oca!Rca!Sca%Wca!Wca![ca}ca#Vcaqca!jca~P$_Opnawnaxna#^na$jna$mna%Vna~Oh!oOi!pOj!nOk!nOl!qOm!rO!sna~PDTO%V&ZOw%UXx%UX~O%QVOw%UXx%UX~Ow&^OxtX~Ox&`O~Ow%iO#^%YX$j%YX$m%YX!O%YXx%YX![%YX!j%YX%V%YX~OT-oOl-fOs-tO|vO~P'RO%V$RO#^Sa$jSa$mSa~O%V$RO~Ow&iO#^%[X$j%[X$m%[Xk%[X~P$_Ow&lO}&kO#^#Ra$j#Ra$m#Ra~O#V&mO#^#Ta$j#Ta$m#Ta~O!d$]O!m$]O#U&oO%QVO~O#U&oO~Ow&qO#^%|X$j%|X$m%|X~Ow&sO#^%yX$j%yX$m%yXx%yX~Ow&wOk&OX~P$_Ok&zO~OPhOTeOltOsuO|vO}!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO$j'PO~P'ROq'TO#g'RO#h'SOP#eaT#ead#eaf#eal#eap#eas#ea|#ea}#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea$g#ea$j#ea$z#ea${#ea%P#ea%Q#ea%e#ea%f#ea%i#ea%l#ea%r#ea%u#ea%w#ea$i#ea$m#ea~Ow'UO#V'WOx&PX~Of'YO~Of!iOx$lO~OT!aO]!aO_!bOf!iO!V!kO!d!lO$w!^O$x!_O$y!_O$z!`O${!`O$|!aO$}!aO%O!aOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~O$v!]O~PNyO$vUi~PNyOT!aO]!aO_!bOf!iO!V!kO!d!lO$z!`O${!`O$|!aO$}!aO%O!aOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi$vUi$wUi%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~O$x!_O$y!_O~P!#tO$xUi$yUi~P!#tO_!bOf!iO!V!kO!d!lOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi$vUi$wUi$xUi$yUi$zUi${Ui%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~OT!aO]!aO$|!aO$}!aO%O!aO~P!&rOTUi]Ui$|Ui$}Ui%OUi~P!&rO!R%aO!S%`Ow%bX!O%bX~O%V'_O%W'_O~P+uOw'aO!O%aX~O!O'cO~Ow'dOx'fO!W%cX~Ol-fOs-tOw'dOx'gO!W%cX~P'RO!W'iO~Oj!nOk!nOl!qOm!rOhgipgiwgixgi!sgi#^gi$jgi$mgi%Vgi~Oi!pO~P!+eOigi~P!+eOh-hOi-iOj-gOk-gOl-pOm-qO~Oq'kO~P!,nOT'pOl-fOs-tO!O'qO~P'ROw'rO!O'qO~O!O'tO~O!S'vO~Ow'rO!O'wO!R%aO!S%`O~P$_Oh-hOi-iOj-gOk-gOl-pOm-qO!Ona!Rna!Sna%Wna!Wna![na}na#Vnaqna!jna~PDTOT'pOl-fOs-tO!W%_a~P'ROw'zO!W%_a~O!W'{O~Ow'zO!R%aO!S%`O!W%_a~P$_OT(POl-fOs-tO![%Ya#^%Ya$j%Ya$m%Ya!O%Yax%Ya!j%Ya%V%Ya~P'ROw(QO![%Ya#^%Ya$j%Ya$m%Ya!O%Yax%Ya!j%Ya%V%Ya~O![(TO~Ow(QO!R%aO!S%`O![%Ya~P$_Ow(WO!R%aO!S%`O![%`a~P$_Ow(ZOx%nX![%nX!j%nX~Ox(^O![(`O!j(aO~OT&POltOsuOx$si!s$si#^$si$j$si$m$si%V$si~P'ROw(bOx$si!s$si#^$si$j$si$m$si%V$si~O!d&VOf%za$j%za#V%za#^%za$m%za#U%za~O$j(gO~OT#xO_#yO%QVO~Ow&^Oxta~OltOsuO~P'ROw(QO#^%Ya$j%Ya$m%Ya!O%Yax%Ya![%Ya!j%Ya%V%Ya~P$_Ow(lO#^$sX$j$sX$m$sX%V$sX~O%V$RO#^Si$jSi$mSi~O#^%[a$j%[a$m%[ak%[a~P'ROw(oO#^%[a$j%[a$m%[ak%[a~OT(sOf(uO%QVO~O#U(vO~O%QVO#^%|a$j%|a$m%|a~Ow(xO#^%|a$j%|a$m%|a~Ol-fOs-tO#^%ya$j%ya$m%yax%ya~P'ROw({O#^%ya$j%ya$m%yax%ya~Oq)PO#a)OOP#_iT#_id#_if#_il#_ip#_is#_i|#_i}#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i$g#_i$j#_i$z#_i${#_i%P#_i%Q#_i%e#_i%f#_i%i#_i%l#_i%r#_i%u#_i%w#_i$i#_i$m#_i~Oq)QOP#biT#bid#bif#bil#bip#bis#bi|#bi}#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi$g#bi$j#bi$z#bi${#bi%P#bi%Q#bi%e#bi%f#bi%i#bi%l#bi%r#bi%u#bi%w#bi$i#bi$m#bi~OT)SOk&Oa~P'ROw)TOk&Oa~Ow)TOk&Oa~P$_Ok)XO~O$h)[O~Oq)_O#g'RO#h)^OP#eiT#eid#eif#eil#eip#eis#ei|#ei}#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei$g#ei$j#ei$z#ei${#ei%P#ei%Q#ei%e#ei%f#ei%i#ei%l#ei%r#ei%u#ei%w#ei$i#ei$m#ei~Ol-fOs-tOx$lO~P'ROl-fOs-tOx&Pa~P'ROw)eOx&Pa~OT)iO_)jO!O)mO$|)kO%QVO~Ox$lO&S)oO~OT$zO_$zOl-fOs-tO!O%aa~P'ROw)uO!O%aa~Ol-fOs-tOx)xO!W%ca~P'ROw)yO!W%ca~Ol-fOs-tOw)yOx)|O!W%ca~P'ROl-fOs-tOw)yO!W%ca~P'ROw)yOx)|O!W%ca~Oj-gOk-gOl-pOm-qOhgipgiwgi!Ogi!Rgi!Sgi%Wgi!Wgixgi![gi#^gi$jgi$mgi}gi#Vgiqgi!jgi%Vgi~Oi-iO~P!GmOigi~P!GmOT'pOl-fOs-tO!O*RO~P'ROk*TO~Ow*VO!O*RO~O!O*WO~OT'pOl-fOs-tO!W%_i~P'ROw*XO!W%_i~O!W*YO~OT(POl-fOs-tO![%Yi#^%Yi$j%Yi$m%Yi!O%Yix%Yi!j%Yi%V%Yi~P'ROw*]O!R%aO!S%`O![%`i~Ow*`O![%Yi#^%Yi$j%Yi$m%Yi!O%Yix%Yi!j%Yi%V%Yi~O![*aO~O_*cOl-fOs-tO![%`i~P'ROw*]O![%`i~O![*eO~OT*gOl-fOs-tOx%na![%na!j%na~P'ROw*hOx%na![%na!j%na~O!Z#[O%p*kO![!kX~O![*mO~Ox(^O![*nO~OT&POltOsuOx$sq!s$sq#^$sq$j$sq$m$sq%V$sq~P'ROw$Wix$Wi!s$Wi#^$Wi$j$Wi$m$Wi%V$Wi~P$_OT&POltOsuO~P'ROT&POl-fOs-tO#^$sa$j$sa$m$sa%V$sa~P'ROw*oO#^$sa$j$sa$m$sa%V$sa~Ow#ya#^#ya$j#ya$m#yak#ya~P$_O#^%[i$j%[i$m%[ik%[i~P'ROw*rO#^#Rq$j#Rq$m#Rq~Ow*sO#V*uO#^%{X$j%{X$m%{X!O%{X~OT*wOf*xO%QVO~O%QVO#^%|i$j%|i$m%|i~Ol-fOs-tO#^%yi$j%yi$m%yix%yi~P'ROq*|O#a)OOP#_qT#_qd#_qf#_ql#_qp#_qs#_q|#_q}#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q$g#_q$j#_q$z#_q${#_q%P#_q%Q#_q%e#_q%f#_q%i#_q%l#_q%r#_q%u#_q%w#_q$i#_q$m#_q~Ok$baw$ba~P$_OT)SOk&Oi~P'ROw+TOk&Oi~OPhOTeOltOp!SOsuO|vO}!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO~P'ROw+_Ox$lO#V+_O~O#h+`OP#eqT#eqd#eqf#eql#eqp#eqs#eq|#eq}#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq$g#eq$j#eq$z#eq${#eq%P#eq%Q#eq%e#eq%f#eq%i#eq%l#eq%r#eq%u#eq%w#eq$i#eq$m#eq~O#V+aOw$dax$da~Ol-fOs-tOx&Pi~P'ROw+cOx&Pi~Ox$QO%V+eOw&RX!O&RX~O%QVOw&RX!O&RX~Ow+iO!O&QX~O!O+kO~OT$zO_$zOl-fOs-tO!O%ai~P'ROx+nOw#|a!W#|a~Ol-fOs-tOx+oOw#|a!W#|a~P'ROl-fOs-tOx)xO!W%ci~P'ROw+rO!W%ci~Ol-fOs-tOw+rO!W%ci~P'ROw+rOx+uO!W%ci~Ow#xi!O#xi!W#xi~P$_OT'pOl-fOs-tO~P'ROk+wO~OT'pOl-fOs-tO!O+xO~P'ROT'pOl-fOs-tO!W%_q~P'ROw#wi![#wi#^#wi$j#wi$m#wi!O#wix#wi!j#wi%V#wi~P$_OT(POl-fOs-tO~P'RO_*cOl-fOs-tO![%`q~P'ROw+yO![%`q~O![+zO~OT(POl-fOs-tO![%Yq#^%Yq$j%Yq$m%Yq!O%Yqx%Yq!j%Yq%V%Yq~P'ROx+{O~OT*gOl-fOs-tOx%ni![%ni!j%ni~P'ROw,QOx%ni![%ni!j%ni~O!Z#[O%p*kO![!ka~OT&POl-fOs-tO#^$si$j$si$m$si%V$si~P'ROw,SO#^$si$j$si$m$si%V$si~O%QVO#^%{a$j%{a$m%{a!O%{a~Ow,VO#^%{a$j%{a$m%{a!O%{a~O!O,YO~Ok$biw$bi~P$_OT)SO~P'ROT)SOk&Oq~P'ROq,^OP#dyT#dyd#dyf#dyl#dyp#dys#dy|#dy}#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy$g#dy$j#dy$z#dy${#dy%P#dy%Q#dy%e#dy%f#dy%i#dy%l#dy%r#dy%u#dy%w#dy$i#dy$m#dy~OPhOTeOltOp!SOsuO|vO}!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO$i,bO$m,bO~P'RO#h,cOP#eyT#eyd#eyf#eyl#eyp#eys#ey|#ey}#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey$g#ey$j#ey$z#ey${#ey%P#ey%Q#ey%e#ey%f#ey%i#ey%l#ey%r#ey%u#ey%w#ey$i#ey$m#ey~Ol-fOs-tOx&Pq~P'ROw,gOx&Pq~O%V+eOw&Ra!O&Ra~OT)iO_)jO$|)kO%QVO!O&Qa~Ow,kO!O&Qa~OT$zO_$zOl-fOs-tO~P'ROl-fOs-tOx,mOw#|i!W#|i~P'ROl-fOs-tOw#|i!W#|i~P'ROx,mOw#|i!W#|i~Ol-fOs-tOx)xO~P'ROl-fOs-tOx)xO!W%cq~P'ROw,pO!W%cq~Ol-fOs-tOw,pO!W%cq~P'ROp,sO!R%aO!S%`O!O%Zq!W%Zq![%Zqw%Zq~P!,nO_*cOl-fOs-tO![%`y~P'ROw#zi![#zi~P$_O_*cOl-fOs-tO~P'ROT*gOl-fOs-tO~P'ROT*gOl-fOs-tOx%nq![%nq!j%nq~P'ROT&POl-fOs-tO#^$sq$j$sq$m$sq%V$sq~P'RO#V,wOw$]a#^$]a$j$]a$m$]a!O$]a~O%QVO#^%{i$j%{i$m%{i!O%{i~Ow,yO#^%{i$j%{i$m%{i!O%{i~O!O,{O~Oq,}OP#d!RT#d!Rd#d!Rf#d!Rl#d!Rp#d!Rs#d!R|#d!R}#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R$g#d!R$j#d!R$z#d!R${#d!R%P#d!R%Q#d!R%e#d!R%f#d!R%i#d!R%l#d!R%r#d!R%u#d!R%w#d!R$i#d!R$m#d!R~Ol-fOs-tOx&Py~P'ROT)iO_)jO$|)kO%QVO!O&Qi~Ol-fOs-tOw#|q!W#|q~P'ROx-TOw#|q!W#|q~Ol-fOs-tOx)xO!W%cy~P'ROw-UO!W%cy~Ol-fOs-YO~P'ROp,sO!R%aO!S%`O!O%Zy!W%Zy![%Zyw%Zy~P!,nO%QVO#^%{q$j%{q$m%{q!O%{q~Ow-^O#^%{q$j%{q$m%{q!O%{q~OT)iO_)jO$|)kO%QVO~Ol-fOs-tOw#|y!W#|y~P'ROl-fOs-tOx)xO!W%c!R~P'ROw-aO!W%c!R~Op%^X!O%^X!R%^X!S%^X!W%^X![%^Xw%^X~P!,nOp,sO!R%aO!S%`O!O%]a!W%]a![%]aw%]a~O%QVO#^%{y$j%{y$m%{y!O%{y~Ol-fOs-tOx)xO!W%c!Z~P'ROx-dO~Ow*oO#^$sa$j$sa$m$sa%V$sa~P$_OT&POl-fOs-tO~P'ROk-kO~Ol-kO~P'ROx-lO~Oq-mO~P!,nO%f%i%u%w%e!Z%m%s%v%x%l%r%l%Q~",goto:"!,u&SPPPP&TP&])n*T*k+S+l,VP,qP&]-_-_&]P&]P0pPPPPPP0p3`PP3`P5l5u:yPP:|;[;_PPP&]&]PP;k&]PP&]&]PP&]&]&]&];o<c&]P<fP<i<i@OP@d&]PPP@h@n&TP&T&TP&TP&TP&TP&TP&T&T&TP&TPP&TPP&TP@tP@{ARP@{P@{@{PPP@{PBzPCTCZCaBzP@{CgPCnCtCzDWDjDpDzEQEnEtEzFQF[FbFhFnFtFzG^GhGnGtGzHUH[HbHhHnHxIOIYI`PPPPPPPPPIiIqIzJUJaPPPPPPPPPPPPNv! `!%n!(zPP!)S!)b!)k!*a!*W!*j!*p!*s!*v!*y!+RPPPPPPPPPP!+U!+XPPPPPPPPP!+_!+k!+w!,T!,W!,^!,d!,j!,m]iOr#l$l)[+Z'odOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!n!o!p!r!s!y!|#Q#R#[#i#l#}$O$Q$S$V$g$i$j$l$z%P%W%Z%]%`%d%i%k%u%}&P&[&`&i&k&l&s&w&z'R'U'`'a'd'f'g'k'p'r'v'z(P(Q(W(Z(b(d(l(o({)O)S)T)X)[)e)o)u)x)y)|*S*T*V*X*[*]*`*c*g*h*o*q*r*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-o-q-uw!cP#h#u$W$f%b%g%m%n&a&y(c(n)R*Q*Z+R+|-jy!dP#h#u$W$f$r%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j{!eP#h#u$W$f$r$s%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j}!fP#h#u$W$f$r$s$t%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j!P!gP#h#u$W$f$r$s$t$u%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j!R!hP#h#u$W$f$r$s$t$u$v%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j!V!hP!m#h#u$W$f$r$s$t$u$v$w%b%g%m%n&a&y(c(n)R*Q*Z+R+|-j'oSOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!n!o!p!r!s!y!|#Q#R#[#i#l#}$O$Q$S$V$g$i$j$l$z%P%W%Z%]%`%d%i%k%u%}&P&[&`&i&k&l&s&w&z'R'U'`'a'd'f'g'k'p'r'v'z(P(Q(W(Z(b(d(l(o({)O)S)T)X)[)e)o)u)x)y)|*S*T*V*X*[*]*`*c*g*h*o*q*r*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-o-q-u&ZUOXYZhrtv|}!R!S!T!X!i!k!n!o!p!r!s#[#i#l$O$Q$S$V$j$l$z%P%W%Z%]%d%i%k%u%}&[&`&k&l&s&z'R'U'`'a'd'f'g'k'r'z(Q(W(Z(b(d(l({)O)X)[)e)o)u)x)y)|*S*T*V*X*[*]*`*g*h*o*r*z+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-q-u%eWOXYZhrv|}!R!S!T!X!i!k#[#i#l$O$Q$S$V$j$l$z%P%Z%]%d%i%k%u%}&[&`&k&l&s&z'R'U'`'a'd'f'g'k'r'z(Q(W(Z(b(d(l({)O)X)[)e)o)u)x)y)|*S*V*X*[*]*`*g*h*o*r*z+Z+b+c+f+m+n+o+q+r+u+y+{+},P,Q,S,g,i,m,p-T-U-a-l-m-nQ#{uQ-b-YR-r-t'fdOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!k!n!o!p!r!s!y!|#Q#R#[#i#l#}$O$Q$S$V$g$i$j$l$z%P%W%Z%]%`%d%i%k%u%}&P&[&`&i&k&l&s&w&z'R'U'`'d'f'g'k'p'r'v'z(P(Q(W(Z(b(d(l(o({)O)S)T)X)[)e)o)x)y)|*S*T*V*X*[*]*`*c*g*h*o*q*r*z+S+T+Z+b+c+f+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-o-q-uW#ol!O!P$^W#wu&^-Y-tQ$`!QQ$p!YQ$q!ZW$y!i'a)u+mS&]#x#yQ&}$kQ(e&VQ(s&mW(t&o(u(v*xU(w&q(x*yQ)g'WW)h'Y+i,k-RS+h)i)jY,U*s,V,x,y-^Q,X*uQ,d+_Q,f+aR-],wR&[#wi!vXY!S!T%]%d'r'z)O*S*V*XR%Z!uQ!zXQ%v#[Q&e$SR&h$VT-X,s-d!U!jP!m#h#u$W$f$r$s$t$u$v$w%b%g%m%n&a&y(c(n)R*Q*Z+R+|-jQ&Y#pR']$qR'`$yR%S!l'ncOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!n!o!p!r!s!y!|#Q#R#[#i#l#}$O$Q$S$V$g$i$j$l$z%P%W%Z%]%`%d%i%k%u%}&P&[&`&i&k&l&s&w&z'R'U'`'a'd'f'g'k'p'r'v'z(P(Q(W(Z(b(d(l(o({)O)S)T)X)[)e)o)u)x)y)|*S*T*V*X*[*]*`*c*g*h*o*q*r*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-o-q-uT#fc#gS#]_#^S#``#aS#ba#cS#db#eT*k(^*lT(_%v(aQ$UwR+g)hX$Sw$T$U&gZkOr$l)[+ZXoOr)[+ZQ$m!WQ&u$dQ&v$eQ'X$oQ'[$qQ)Y&|Q)`'RQ)b'SQ)c'TQ)p'ZQ)r']Q*})OQ+P)PQ+Q)QQ+U)WS+W)Z)qQ+[)^Q+])_Q+^)aQ,[*|Q,]+OQ,_+VQ,`+XQ,e+`Q,|,^Q-O,cQ-P,dR-_,}WoOr)[+ZR#rnQ'Z$pR)Z&}Q+f)hR,i+gQ)q'ZR+X)ZZmOnr)[+ZQrOR#trQ&_#zR(j&_S%j#P#|S(R%j(UT(U%m&aQ%^!xQ%e!{W's%^%e'x'|Q'x%bR'|%gQ&j$WR(p&jQ(X%nQ*^(ST*d(X*^Q'b${R)v'bS'e%O%PY)z'e){+s,q-VU){'f'g'hU+s)|)}*OS,q+t+uR-V,rQ#W]R%q#WQ#Z^R%s#ZQ#^_R%w#^Q([%tS*i([*jR*j(]Q*l(^R,R*lQ#a`R%y#aQ#caR%z#cQ#ebR%{#eQ#gcR%|#gQ#jfQ&O#hW&R#j&O(m*pQ(m&dR*p-jQ$TwS&f$T&gR&g$UQ&t$bR(|&tQ&W#oR(f&WQ$^!PR&n$^Q*t(tS,W*t,zR,z,XQ&r$`R(y&rQ#mjR&T#mQ+Z)[R,a+ZQ(}&uR*{(}Q&x$fS)U&x)VR)V&yQ'Q$mR)]'QQ'V$nS)f'V+dR+d)gQ+j)lR,l+jWnOr)[+ZR#qnSqOrT+Y)[+ZWpOr)[+ZR'O$lYjOr$l)[+ZR&S#l[wOr#l$l)[+ZR&e$S&YPOXYZhrtv|}!R!S!T!X!i!k!n!o!p!r!s#[#i#l$O$Q$S$V$j$l$z%P%W%Z%]%d%i%k%u%}&[&`&k&l&s&z'R'U'`'a'd'f'g'k'r'z(Q(W(Z(b(d(l({)O)X)[)e)o)u)x)y)|*S*T*V*X*[*]*`*g*h*o*r*z+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,g,i,m,p,s-T-U-a-d-f-g-h-i-k-l-m-n-q-uQ!mSQ#heQ#usU$Wx%`'vS$f!U$iQ$r!cQ$s!dQ$t!eQ$u!fQ$v!gQ$w!hQ%b!yQ%g!|Q%m#QQ%n#RQ&a#}Q&y$gQ(c&PU(n&i(o*qW)R&w)T+S+TQ*Q'pQ*Z(PQ+R)SQ+|*cR-j-oQ!xXQ!{YQ$d!SQ$e!T^'o%]%d'r'z*S*V*XR+O)O[fOr#l$l)[+Zh!uXY!S!T%]%d'r'z)O*S*V*XQ#PZQ#khS#|v|Q$Z}W$b!R$V&z)XS$n!X$jW$x!i'a)u+mQ%O!kQ%t#[`&Q#i%}(b(d(l*o,S-nQ&b$OQ&c$QQ&d$SQ'^$zQ'h%PQ'n%ZW(O%i(Q*[*`Q(S%kQ(]%uQ(h&[S(k&`-lQ(q&kQ(r&lU(z&s({*zQ)a'RY)d'U)e+b+c,gQ)s'`^)w'd)y+q+r,p-U-aQ)}'fQ*O'gS*P'k-mW*b(W*]+y+}W*f(Z*h,P,QQ+l)oQ+p)xQ+t)|Q,O*gQ,T*rQ,h+fQ,n+nQ,o+oQ,r+uQ,v+{Q-Q,iQ-S,mR-`-ThTOr#i#l$l%}&`'k(b(d)[+Z$z!tXYZhv|}!R!S!T!X!i!k#[$O$Q$S$V$j$z%P%Z%]%d%i%k%u&[&k&l&s&z'R'U'`'a'd'f'g'r'z(Q(W(Z(l({)O)X)e)o)u)x)y)|*S*V*X*[*]*`*g*h*o*r*z+b+c+f+m+n+o+q+r+u+y+{+},P,Q,S,g,i,m,p-T-U-a-l-m-nQ#vtW%T!n!r-g-qQ%U!oQ%V!pQ%X!sQ%c-fS'j%W-kQ'l-hQ'm-iQ+v*TQ,u+wS-W,s-dR-s-uU#zu-Y-tR(i&^[gOr#l$l)[+ZX!wX#[$S$VQ#UZQ$PvR$Y|Q%_!xQ%f!{Q%l#PQ'^$xQ'y%bQ'}%gQ(V%mQ(Y%nQ*_(SQ,t+vQ-[,uR-c-ZQ$XxQ'u%`R*U'vQ-Z,sR-e-dR#OYR#TZR$}!iQ${!iV)t'a)u+mR%Q!kR%v#[Q(`%vR*n(aQ$c!RQ&h$VQ)W&zR+V)XQ#plQ$[!OQ$_!PR&p$^Q(s&oQ*v(uQ*w(vR,Z*xR$a!QXpOr)[+ZQ$h!UR&{$iQ$o!XR&|$jR)n'YQ)l'YV,j+i,k-R",nodeNames:"⚠ print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ParenthesizedExpression ( BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from ) TupleExpression ComprehensionExpression async for LambdaExpression ArrayExpression [ ] ArrayComprehensionExpression DictionaryExpression { } DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At",maxTerm:234,context:OO,nodeProps:[[D.group,-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,21,37,47,48,52,55,56,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-9,105,107,110,112,113,117,119,124,126,"Statement"]],skippedNodes:[0,2],repeatNodeCount:32,tokenData:"(#RMgR!^OX$}XY!5[Y[$}[]!5[]p$}pq!5[qr!7frs!;]st#+otu$}uv%3Tvw%5gwx%6sxy&)oyz&*uz{&+{{|&.k|}&/w}!O&0}!O!P&3d!P!Q&>j!Q!R&AY!R![&GW![!]'$S!]!^'&f!^!_''l!_!`'*[!`!a'+h!a!b$}!b!c'.T!c!d'/c!d!e'1T!e!h'/c!h!i'=R!i!t'/c!t!u'Fg!u!w'/c!w!x';a!x!}'/c!}#O'Hq#O#P'Iw#P#Q'Ji#Q#R'Ko#R#S'/c#S#T$}#T#U'/c#U#V'1T#V#Y'/c#Y#Z'=R#Z#f'/c#f#g'Fg#g#i'/c#i#j';a#j#o'/c#o#p'L{#p#q'Mq#q#r'N}#r#s( {#s$g$}$g~'/c<r%`Z%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}9[&^Z%p7[%gS%m`%v!bOr'PrsLQsw'Pwx(Px#O'P#O#PNp#P#o'P#o#pKQ#p#q'P#q#rGW#r~'P9['^Z%p7[%gS%jW%m`%v!bOr'Prs&Rsw'Pwx(Px#O'P#O#PFr#P#o'P#o#pKQ#p#q'P#q#rGW#r~'P8z(WZ%p7[%jWOr(yrs)wsw(ywxAjx#O(y#O#PF^#P#o(y#o#p>v#p#q(y#q#r5T#r~(y8z)UZ%p7[%gS%jW%v!bOr(yrs)wsw(ywx(Px#O(y#O#PAU#P#o(y#o#p?p#p#q(y#q#r5T#r~(y8z*QZ%p7[%gS%v!bOr(yrs*ssw(ywx(Px#O(y#O#P@p#P#o(y#o#p?p#p#q(y#q#r5T#r~(y8z*|Z%p7[%gS%v!bOr(yrs+osw(ywx(Px#O(y#O#P4o#P#o(y#o#p?p#p#q(y#q#r5T#r~(y8r+xX%p7[%gS%v!bOw+owx,ex#O+o#O#P4Z#P#o+o#o#p3Z#p#q+o#q#r.k#r~+o8r,jX%p7[Ow+owx-Vx#O+o#O#P3u#P#o+o#o#p2i#p#q+o#q#r.k#r~+o8r-[X%p7[Ow+owx-wx#O+o#O#P.V#P#o+o#o#p0^#p#q+o#q#r.k#r~+o7[-|R%p7[O#o-w#p#q-w#r~-w8r.[T%p7[O#o+o#o#p.k#p#q+o#q#r.k#r~+o!f.rV%gS%v!bOw.kwx/Xx#O.k#O#P3T#P#o.k#o#p3Z#p~.k!f/[VOw.kwx/qx#O.k#O#P2c#P#o.k#o#p2i#p~.k!f/tUOw.kx#O.k#O#P0W#P#o.k#o#p0^#p~.k!f0ZPO~.k!f0cV%gSOw0xwx1^x#O0x#O#P2]#P#o0x#o#p.k#p~0xS0}T%gSOw0xwx1^x#O0x#O#P2]#P~0xS1aTOw0xwx1px#O0x#O#P2V#P~0xS1sSOw0xx#O0x#O#P2P#P~0xS2SPO~0xS2YPO~0xS2`PO~0x!f2fPO~.k!f2nV%gSOw0xwx1^x#O0x#O#P2]#P#o0x#o#p.k#p~0x!f3WPO~.k!f3`V%gSOw0xwx1^x#O0x#O#P2]#P#o0x#o#p.k#p~0x8r3zT%p7[O#o+o#o#p.k#p#q+o#q#r.k#r~+o8r4`T%p7[O#o+o#o#p.k#p#q+o#q#r.k#r~+o8z4tT%p7[O#o(y#o#p5T#p#q(y#q#r5T#r~(y!n5^X%gS%jW%v!bOr5Trs5ysw5Twx7ax#O5T#O#P@j#P#o5T#o#p?p#p~5T!n6QX%gS%v!bOr5Trs6msw5Twx7ax#O5T#O#P@d#P#o5T#o#p?p#p~5T!n6tX%gS%v!bOr5Trs.ksw5Twx7ax#O5T#O#P?j#P#o5T#o#p?p#p~5T!n7fX%jWOr5Trs5ysw5Twx8Rx#O5T#O#P>p#P#o5T#o#p>v#p~5T!n8WX%jWOr5Trs5ysw5Twx8sx#O5T#O#P:^#P#o5T#o#p:d#p~5TW8xT%jWOr8srs9Xs#O8s#O#P:W#P~8sW9[TOr8srs9ks#O8s#O#P:Q#P~8sW9nSOr8ss#O8s#O#P9z#P~8sW9}PO~8sW:TPO~8sW:ZPO~8s!n:aPO~5T!n:kX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p5T#p~;W[;_V%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P~;W[;yV%gSOr;Wrs<`sw;Wwx<zx#O;W#O#P>d#P~;W[<eV%gSOr;Wrs0xsw;Wwx<zx#O;W#O#P>^#P~;W[=PV%jWOr;Wrs;tsw;Wwx=fx#O;W#O#P>W#P~;W[=kV%jWOr;Wrs;tsw;Wwx8sx#O;W#O#P>Q#P~;W[>TPO~;W[>ZPO~;W[>aPO~;W[>gPO~;W[>mPO~;W!n>sPO~5T!n>}X%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p5T#p~;W!n?mPO~5T!n?wX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p5T#p~;W!n@gPO~5T!n@mPO~5T8z@uT%p7[O#o(y#o#p5T#p#q(y#q#r5T#r~(y8zAZT%p7[O#o(y#o#p5T#p#q(y#q#r5T#r~(y8zAqZ%p7[%jWOr(yrs)wsw(ywxBdx#O(y#O#PEx#P#o(y#o#p:d#p#q(y#q#r5T#r~(y7dBkX%p7[%jWOrBdrsCWs#OBd#O#PEd#P#oBd#o#p8s#p#qBd#q#r8s#r~Bd7dC]X%p7[OrBdrsCxs#OBd#O#PEO#P#oBd#o#p8s#p#qBd#q#r8s#r~Bd7dC}X%p7[OrBdrs-ws#OBd#O#PDj#P#oBd#o#p8s#p#qBd#q#r8s#r~Bd7dDoT%p7[O#oBd#o#p8s#p#qBd#q#r8s#r~Bd7dETT%p7[O#oBd#o#p8s#p#qBd#q#r8s#r~Bd7dEiT%p7[O#oBd#o#p8s#p#qBd#q#r8s#r~Bd8zE}T%p7[O#o(y#o#p5T#p#q(y#q#r5T#r~(y8zFcT%p7[O#o(y#o#p5T#p#q(y#q#r5T#r~(y9[FwT%p7[O#o'P#o#pGW#p#q'P#q#rGW#r~'P#OGcX%gS%jW%m`%v!bOrGWrsHOswGWwx7ax#OGW#O#PKz#P#oGW#o#pKQ#p~GW#OHXX%gS%m`%v!bOrGWrsHtswGWwx7ax#OGW#O#PKt#P#oGW#o#pKQ#p~GW#OH}X%gS%m`%v!bOrGWrsIjswGWwx7ax#OGW#O#PJz#P#oGW#o#pKQ#p~GW!vIsV%gS%m`%v!bOwIjwx/Xx#OIj#O#PJY#P#oIj#o#pJ`#p~Ij!vJ]PO~Ij!vJeV%gSOw0xwx1^x#O0x#O#P2]#P#o0x#o#pIj#p~0x#OJ}PO~GW#OKXX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#pGW#p~;W#OKwPO~GW#OK}PO~GW9[L]Z%p7[%gS%m`%v!bOr'PrsMOsw'Pwx(Px#O'P#O#PN[#P#o'P#o#pKQ#p#q'P#q#rGW#r~'P9SMZX%p7[%gS%m`%v!bOwMOwx,ex#OMO#O#PMv#P#oMO#o#pJ`#p#qMO#q#rIj#r~MO9SM{T%p7[O#oMO#o#pIj#p#qMO#q#rIj#r~MO9[NaT%p7[O#o'P#o#pGW#p#q'P#q#rGW#r~'P9[NuT%p7[O#o'P#o#pGW#p#q'P#q#rGW#r~'P<b! aZ%p7[%jW%sp%x#tOr!!Srs)wsw!!Swx!-Qx#O!!S#O#P!2l#P#o!!S#o#p!+d#p#q!!S#q#r!#j#r~!!S<b!!cZ%p7[%gS%jW%sp%v!b%x#tOr!!Srs)wsw!!Swx! Ux#O!!S#O#P!#U#P#o!!S#o#p!,^#p#q!!S#q#r!#j#r~!!S<b!#ZT%p7[O#o!!S#o#p!#j#p#q!!S#q#r!#j#r~!!S&U!#wX%gS%jW%sp%v!b%x#tOr!#jrs5ysw!#jwx!$dx#O!#j#O#P!,W#P#o!#j#o#p!,^#p~!#j&U!$mX%jW%sp%x#tOr!#jrs5ysw!#jwx!%Yx#O!#j#O#P!+^#P#o!#j#o#p!+d#p~!#j&U!%cX%jW%sp%x#tOr!#jrs5ysw!#jwx!&Ox#O!#j#O#P!*d#P#o!#j#o#p!*j#p~!#j$n!&XX%jW%sp%x#tOr!&trs9Xsw!&twx!&Ox#O!&t#O#P!)r#P#o!&t#o#p!)x#p~!&t$n!&}X%jW%sp%x#tOr!&trs9Xsw!&twx!'jx#O!&t#O#P!)Q#P#o!&t#o#p!)W#p~!&t$n!'sX%jW%sp%x#tOr!&trs9Xsw!&twx!&Ox#O!&t#O#P!(`#P#o!&t#o#p!(f#p~!&t$n!(cPO~!&t$n!(kV%jWOr8srs9Xs#O8s#O#P:W#P#o8s#o#p!&t#p~8s$n!)TPO~!&t$n!)]V%jWOr8srs9Xs#O8s#O#P:W#P#o8s#o#p!&t#p~8s$n!)uPO~!&t$n!)}V%jWOr8srs9Xs#O8s#O#P:W#P#o8s#o#p!&t#p~8s&U!*gPO~!#j&U!*qX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!#j#p~;W&U!+aPO~!#j&U!+kX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!#j#p~;W&U!,ZPO~!#j&U!,eX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!#j#p~;W<b!-]Z%p7[%jW%sp%x#tOr!!Srs)wsw!!Swx!.Ox#O!!S#O#P!2W#P#o!!S#o#p!*j#p#q!!S#q#r!#j#r~!!S:z!.ZZ%p7[%jW%sp%x#tOr!.|rsCWsw!.|wx!.Ox#O!.|#O#P!1r#P#o!.|#o#p!)x#p#q!.|#q#r!&t#r~!.|:z!/XZ%p7[%jW%sp%x#tOr!.|rsCWsw!.|wx!/zx#O!.|#O#P!1^#P#o!.|#o#p!)W#p#q!.|#q#r!&t#r~!.|:z!0VZ%p7[%jW%sp%x#tOr!.|rsCWsw!.|wx!.Ox#O!.|#O#P!0x#P#o!.|#o#p!(f#p#q!.|#q#r!&t#r~!.|:z!0}T%p7[O#o!.|#o#p!&t#p#q!.|#q#r!&t#r~!.|:z!1cT%p7[O#o!.|#o#p!&t#p#q!.|#q#r!&t#r~!.|:z!1wT%p7[O#o!.|#o#p!&t#p#q!.|#q#r!&t#r~!.|<b!2]T%p7[O#o!!S#o#p!#j#p#q!!S#q#r!#j#r~!!S<b!2qT%p7[O#o!!S#o#p!#j#p#q!!S#q#r!#j#r~!!S<r!3VT%p7[O#o$}#o#p!3f#p#q$}#q#r!3f#r~$}&f!3uX%gS%jW%m`%sp%v!b%x#tOr!3frsHOsw!3fwx!$dx#O!3f#O#P!4b#P#o!3f#o#p!4h#p~!3f&f!4ePO~!3f&f!4oX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!3f#p~;WMg!5oa%p7[%gS%jW$o1s%m`%sp%v!b%x#tOX$}XY!5[Y[$}[]!5[]p$}pq!5[qr$}rs&Rsw$}wx! Ux#O$}#O#P!6t#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Mg!6yX%p7[OY$}YZ!5[Z]$}]^!5[^#o$}#o#p!3f#p#q$}#q#r!3f#r~$}<u!7wb%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`!9P!`#O$}#O#P!3Q#P#T$}#T#U!:V#U#f$}#f#g!:V#g#h!:V#h#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u!9dZjR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u!:jZ!jR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{!;l_%tp%p7[%gS%e,X%m`%v!bOY!<kYZ'PZ]!<k]^'P^r!<krs#(ysw!<kwx!>yx#O!<k#O#P#+Z#P#o!<k#o#p#'w#p#q!<k#q#r#%s#r~!<kDe!<z_%p7[%gS%jW%e,X%m`%v!bOY!<kYZ'PZ]!<k]^'P^r!<krs!=ysw!<kwx!>yx#O!<k#O#P#%_#P#o!<k#o#p#'w#p#q!<k#q#r#%s#r~!<kDe!>WZ%p7[%gS%e,X%m`%v!bOr'PrsLQsw'Pwx(Px#O'P#O#PNp#P#o'P#o#pKQ#p#q'P#q#rGW#r~'PDT!?S_%p7[%jW%e,XOY!@RYZ(yZ]!@R]^(y^r!@Rrs!A_sw!@Rwx# Rx#O!@R#O#P#$y#P#o!@R#o#p!Lw#p#q!@R#q#r!Bq#r~!@RDT!@`_%p7[%gS%jW%e,X%v!bOY!@RYZ(yZ]!@R]^(y^r!@Rrs!A_sw!@Rwx!>yx#O!@R#O#P!B]#P#o!@R#o#p!NP#p#q!@R#q#r!Bq#r~!@RDT!AjZ%p7[%gS%e,X%v!bOr(yrs*ssw(ywx(Px#O(y#O#P@p#P#o(y#o#p?p#p#q(y#q#r5T#r~(yDT!BbT%p7[O#o!@R#o#p!Bq#p#q!@R#q#r!Bq#r~!@R-w!B|]%gS%jW%e,X%v!bOY!BqYZ5TZ]!Bq]^5T^r!Bqrs!Cusw!Bqwx!Dkx#O!Bq#O#P!My#P#o!Bq#o#p!NP#p~!Bq-w!DOX%gS%e,X%v!bOr5Trs6msw5Twx7ax#O5T#O#P@d#P#o5T#o#p?p#p~5T-w!Dr]%jW%e,XOY!BqYZ5TZ]!Bq]^5T^r!Bqrs!Cusw!Bqwx!Ekx#O!Bq#O#P!Lq#P#o!Bq#o#p!Lw#p~!Bq-w!Er]%jW%e,XOY!BqYZ5TZ]!Bq]^5T^r!Bqrs!Cusw!Bqwx!Fkx#O!Bq#O#P!Gy#P#o!Bq#o#p!HP#p~!Bq,a!FrX%jW%e,XOY!FkYZ8sZ]!Fk]^8s^r!Fkrs!G_s#O!Fk#O#P!Gs#P~!Fk,a!GdT%e,XOr8srs9ks#O8s#O#P:Q#P~8s,a!GvPO~!Fk-w!G|PO~!Bq-w!HY]%gS%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Jkx#O!IR#O#P!Lk#P#o!IR#o#p!Bq#p~!IR,e!I[Z%gS%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Jkx#O!IR#O#P!Lk#P~!IR,e!JUV%gS%e,XOr;Wrs<`sw;Wwx<zx#O;W#O#P>d#P~;W,e!JrZ%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Kex#O!IR#O#P!Le#P~!IR,e!KlZ%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Fkx#O!IR#O#P!L_#P~!IR,e!LbPO~!IR,e!LhPO~!IR,e!LnPO~!IR-w!LtPO~!Bq-w!MQ]%gS%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Jkx#O!IR#O#P!Lk#P#o!IR#o#p!Bq#p~!IR-w!M|PO~!Bq-w!NY]%gS%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Jkx#O!IR#O#P!Lk#P#o!IR#o#p!Bq#p~!IRDT# [_%p7[%jW%e,XOY!@RYZ(yZ]!@R]^(y^r!@Rrs!A_sw!@Rwx#!Zx#O!@R#O#P#$e#P#o!@R#o#p!HP#p#q!@R#q#r!Bq#r~!@RBm#!d]%p7[%jW%e,XOY#!ZYZBdZ]#!Z]^Bd^r#!Zrs##]s#O#!Z#O#P#$P#P#o#!Z#o#p!Fk#p#q#!Z#q#r!Fk#r~#!ZBm##dX%p7[%e,XOrBdrsCxs#OBd#O#PEO#P#oBd#o#p8s#p#qBd#q#r8s#r~BdBm#$UT%p7[O#o#!Z#o#p!Fk#p#q#!Z#q#r!Fk#r~#!ZDT#$jT%p7[O#o!@R#o#p!Bq#p#q!@R#q#r!Bq#r~!@RDT#%OT%p7[O#o!@R#o#p!Bq#p#q!@R#q#r!Bq#r~!@RDe#%dT%p7[O#o!<k#o#p#%s#p#q!<k#q#r#%s#r~!<k.X#&Q]%gS%jW%e,X%m`%v!bOY#%sYZGWZ]#%s]^GW^r#%srs#&ysw#%swx!Dkx#O#%s#O#P#'q#P#o#%s#o#p#'w#p~#%s.X#'UX%gS%e,X%m`%v!bOrGWrsHtswGWwx7ax#OGW#O#PKt#P#oGW#o#pKQ#p~GW.X#'tPO~#%s.X#(Q]%gS%jW%e,XOY!IRYZ;WZ]!IR]^;W^r!IRrs!I}sw!IRwx!Jkx#O!IR#O#P!Lk#P#o!IR#o#p#%s#p~!IRGZ#)WZ%p7[%gS%e,X%m`%v!bOr'Prs#)ysw'Pwx(Px#O'P#O#P#*u#P#o'P#o#pKQ#p#q'P#q#rGW#r~'PGZ#*YX%k#|%p7[%gS%i,X%m`%v!bOwMOwx,ex#OMO#O#PMv#P#oMO#o#pJ`#p#qMO#q#rIj#r~MO9[#*zT%p7[O#o'P#o#pGW#p#q'P#q#rGW#r~'PDe#+`T%p7[O#o!<k#o#p#%s#p#q!<k#q#r#%s#r~!<kMg#,S_Q1s%p7[%gS%jW%m`%sp%v!b%x#tOY#+oYZ$}Z]#+o]^$}^r#+ors#-Rsw#+owx$Bmx#O#+o#O#P%/o#P#o#+o#o#p%2R#p#q#+o#q#r%0c#r~#+oJP#-`_Q1s%p7[%gS%m`%v!bOY#._YZ'PZ]#._]^'P^r#._rs$>Psw#._wx#/mx#O#._#O#P$Ay#P#o#._#o#p$<T#p#q#._#q#r$6T#r~#._JP#.n_Q1s%p7[%gS%jW%m`%v!bOY#._YZ'PZ]#._]^'P^r#._rs#-Rsw#._wx#/mx#O#._#O#P$5a#P#o#._#o#p$<T#p#q#._#q#r$6T#r~#._Io#/v_Q1s%p7[%jWOY#0uYZ(yZ]#0u]^(y^r#0urs#2Rsw#0uwx$-ex#O#0u#O#P$4m#P#o#0u#o#p$(k#p#q#0u#q#r#Eg#r~#0uIo#1S_Q1s%p7[%gS%jW%v!bOY#0uYZ(yZ]#0u]^(y^r#0urs#2Rsw#0uwx#/mx#O#0u#O#P$,q#P#o#0u#o#p$*R#p#q#0u#q#r#Eg#r~#0uIo#2^_Q1s%p7[%gS%v!bOY#0uYZ(yZ]#0u]^(y^r#0urs#3]sw#0uwx#/mx#O#0u#O#P$+}#P#o#0u#o#p$*R#p#q#0u#q#r#Eg#r~#0uIo#3h_Q1s%p7[%gS%v!bOY#0uYZ(yZ]#0u]^(y^r#0urs#4gsw#0uwx#/mx#O#0u#O#P#Ds#P#o#0u#o#p$*R#p#q#0u#q#r#Eg#r~#0uIg#4r]Q1s%p7[%gS%v!bOY#4gYZ+oZ]#4g]^+o^w#4gwx#5kx#O#4g#O#P#DP#P#o#4g#o#p#Bc#p#q#4g#q#r#9a#r~#4gIg#5r]Q1s%p7[OY#4gYZ+oZ]#4g]^+o^w#4gwx#6kx#O#4g#O#P#C]#P#o#4g#o#p#AT#p#q#4g#q#r#9a#r~#4gIg#6r]Q1s%p7[OY#4gYZ+oZ]#4g]^+o^w#4gwx#7kx#O#4g#O#P#8m#P#o#4g#o#p#<a#p#q#4g#q#r#9a#r~#4gHP#7rXQ1s%p7[OY#7kYZ-wZ]#7k]^-w^#o#7k#o#p#8_#p#q#7k#q#r#8_#r~#7k1s#8dRQ1sOY#8_Z]#8_^~#8_Ig#8tXQ1s%p7[OY#4gYZ+oZ]#4g]^+o^#o#4g#o#p#9a#p#q#4g#q#r#9a#r~#4g3Z#9jZQ1s%gS%v!bOY#9aYZ.kZ]#9a]^.k^w#9awx#:]x#O#9a#O#P#A}#P#o#9a#o#p#Bc#p~#9a3Z#:bZQ1sOY#9aYZ.kZ]#9a]^.k^w#9awx#;Tx#O#9a#O#P#@o#P#o#9a#o#p#AT#p~#9a3Z#;YZQ1sOY#9aYZ.kZ]#9a]^.k^w#9awx#8_x#O#9a#O#P#;{#P#o#9a#o#p#<a#p~#9a3Z#<QTQ1sOY#9aYZ.kZ]#9a]^.k^~#9a3Z#<hZQ1s%gSOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#=}x#O#=Z#O#P#@Z#P#o#=Z#o#p#9a#p~#=Z1w#=bXQ1s%gSOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#=}x#O#=Z#O#P#@Z#P~#=Z1w#>SXQ1sOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#>ox#O#=Z#O#P#?u#P~#=Z1w#>tXQ1sOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#8_x#O#=Z#O#P#?a#P~#=Z1w#?fTQ1sOY#=ZYZ0xZ]#=Z]^0x^~#=Z1w#?zTQ1sOY#=ZYZ0xZ]#=Z]^0x^~#=Z1w#@`TQ1sOY#=ZYZ0xZ]#=Z]^0x^~#=Z3Z#@tTQ1sOY#9aYZ.kZ]#9a]^.k^~#9a3Z#A[ZQ1s%gSOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#=}x#O#=Z#O#P#@Z#P#o#=Z#o#p#9a#p~#=Z3Z#BSTQ1sOY#9aYZ.kZ]#9a]^.k^~#9a3Z#BjZQ1s%gSOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#=}x#O#=Z#O#P#@Z#P#o#=Z#o#p#9a#p~#=ZIg#CdXQ1s%p7[OY#4gYZ+oZ]#4g]^+o^#o#4g#o#p#9a#p#q#4g#q#r#9a#r~#4gIg#DWXQ1s%p7[OY#4gYZ+oZ]#4g]^+o^#o#4g#o#p#9a#p#q#4g#q#r#9a#r~#4gIo#DzXQ1s%p7[OY#0uYZ(yZ]#0u]^(y^#o#0u#o#p#Eg#p#q#0u#q#r#Eg#r~#0u3c#Er]Q1s%gS%jW%v!bOY#EgYZ5TZ]#Eg]^5T^r#Egrs#Fksw#Egwx#Hox#O#Eg#O#P$+i#P#o#Eg#o#p$*R#p~#Eg3c#Ft]Q1s%gS%v!bOY#EgYZ5TZ]#Eg]^5T^r#Egrs#Gmsw#Egwx#Hox#O#Eg#O#P$+T#P#o#Eg#o#p$*R#p~#Eg3c#Gv]Q1s%gS%v!bOY#EgYZ5TZ]#Eg]^5T^r#Egrs#9asw#Egwx#Hox#O#Eg#O#P$)m#P#o#Eg#o#p$*R#p~#Eg3c#Hv]Q1s%jWOY#EgYZ5TZ]#Eg]^5T^r#Egrs#Fksw#Egwx#Iox#O#Eg#O#P$(V#P#o#Eg#o#p$(k#p~#Eg3c#Iv]Q1s%jWOY#EgYZ5TZ]#Eg]^5T^r#Egrs#Fksw#Egwx#Jox#O#Eg#O#P#NT#P#o#Eg#o#p#Ni#p~#Eg1{#JvXQ1s%jWOY#JoYZ8sZ]#Jo]^8s^r#Jors#Kcs#O#Jo#O#P#Mo#P~#Jo1{#KhXQ1sOY#JoYZ8sZ]#Jo]^8s^r#Jors#LTs#O#Jo#O#P#MZ#P~#Jo1{#LYXQ1sOY#JoYZ8sZ]#Jo]^8s^r#Jors#8_s#O#Jo#O#P#Lu#P~#Jo1{#LzTQ1sOY#JoYZ8sZ]#Jo]^8s^~#Jo1{#M`TQ1sOY#JoYZ8sZ]#Jo]^8s^~#Jo1{#MtTQ1sOY#JoYZ8sZ]#Jo]^8s^~#Jo3c#NYTQ1sOY#EgYZ5TZ]#Eg]^5T^~#Eg3c#Nr]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p#Eg#p~$ k2P$ tZQ1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P~$ k2P$!nZQ1s%gSOY$ kYZ;WZ]$ k]^;W^r$ krs$#asw$ kwx$$Zx#O$ k#O#P$']#P~$ k2P$#hZQ1s%gSOY$ kYZ;WZ]$ k]^;W^r$ krs#=Zsw$ kwx$$Zx#O$ k#O#P$&w#P~$ k2P$$bZQ1s%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$%Tx#O$ k#O#P$&c#P~$ k2P$%[ZQ1s%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx#Jox#O$ k#O#P$%}#P~$ k2P$&STQ1sOY$ kYZ;WZ]$ k]^;W^~$ k2P$&hTQ1sOY$ kYZ;WZ]$ k]^;W^~$ k2P$&|TQ1sOY$ kYZ;WZ]$ k]^;W^~$ k2P$'bTQ1sOY$ kYZ;WZ]$ k]^;W^~$ k2P$'vTQ1sOY$ kYZ;WZ]$ k]^;W^~$ k3c$([TQ1sOY#EgYZ5TZ]#Eg]^5T^~#Eg3c$(t]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p#Eg#p~$ k3c$)rTQ1sOY#EgYZ5TZ]#Eg]^5T^~#Eg3c$*[]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p#Eg#p~$ k3c$+YTQ1sOY#EgYZ5TZ]#Eg]^5T^~#Eg3c$+nTQ1sOY#EgYZ5TZ]#Eg]^5T^~#EgIo$,UXQ1s%p7[OY#0uYZ(yZ]#0u]^(y^#o#0u#o#p#Eg#p#q#0u#q#r#Eg#r~#0uIo$,xXQ1s%p7[OY#0uYZ(yZ]#0u]^(y^#o#0u#o#p#Eg#p#q#0u#q#r#Eg#r~#0uIo$-n_Q1s%p7[%jWOY#0uYZ(yZ]#0u]^(y^r#0urs#2Rsw#0uwx$.mx#O#0u#O#P$3y#P#o#0u#o#p#Ni#p#q#0u#q#r#Eg#r~#0uHX$.v]Q1s%p7[%jWOY$.mYZBdZ]$.m]^Bd^r$.mrs$/os#O$.m#O#P$3V#P#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mHX$/v]Q1s%p7[OY$.mYZBdZ]$.m]^Bd^r$.mrs$0os#O$.m#O#P$2c#P#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mHX$0v]Q1s%p7[OY$.mYZBdZ]$.m]^Bd^r$.mrs#7ks#O$.m#O#P$1o#P#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mHX$1vXQ1s%p7[OY$.mYZBdZ]$.m]^Bd^#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mHX$2jXQ1s%p7[OY$.mYZBdZ]$.m]^Bd^#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mHX$3^XQ1s%p7[OY$.mYZBdZ]$.m]^Bd^#o$.m#o#p#Jo#p#q$.m#q#r#Jo#r~$.mIo$4QXQ1s%p7[OY#0uYZ(yZ]#0u]^(y^#o#0u#o#p#Eg#p#q#0u#q#r#Eg#r~#0uIo$4tXQ1s%p7[OY#0uYZ(yZ]#0u]^(y^#o#0u#o#p#Eg#p#q#0u#q#r#Eg#r~#0uJP$5hXQ1s%p7[OY#._YZ'PZ]#._]^'P^#o#._#o#p$6T#p#q#._#q#r$6T#r~#._3s$6b]Q1s%gS%jW%m`%v!bOY$6TYZGWZ]$6T]^GW^r$6Trs$7Zsw$6Twx#Hox#O$6T#O#P$=k#P#o$6T#o#p$<T#p~$6T3s$7f]Q1s%gS%m`%v!bOY$6TYZGWZ]$6T]^GW^r$6Trs$8_sw$6Twx#Hox#O$6T#O#P$=V#P#o$6T#o#p$<T#p~$6T3s$8j]Q1s%gS%m`%v!bOY$6TYZGWZ]$6T]^GW^r$6Trs$9csw$6Twx#Hox#O$6T#O#P$;o#P#o$6T#o#p$<T#p~$6T3k$9nZQ1s%gS%m`%v!bOY$9cYZIjZ]$9c]^Ij^w$9cwx#:]x#O$9c#O#P$:a#P#o$9c#o#p$:u#p~$9c3k$:fTQ1sOY$9cYZIjZ]$9c]^Ij^~$9c3k$:|ZQ1s%gSOY#=ZYZ0xZ]#=Z]^0x^w#=Zwx#=}x#O#=Z#O#P#@Z#P#o#=Z#o#p$9c#p~#=Z3s$;tTQ1sOY$6TYZGWZ]$6T]^GW^~$6T3s$<^]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p$6T#p~$ k3s$=[TQ1sOY$6TYZGWZ]$6T]^GW^~$6T3s$=pTQ1sOY$6TYZGWZ]$6T]^GW^~$6TJP$>^_Q1s%p7[%gS%m`%v!bOY#._YZ'PZ]#._]^'P^r#._rs$?]sw#._wx#/mx#O#._#O#P$AV#P#o#._#o#p$<T#p#q#._#q#r$6T#r~#._Iw$?j]Q1s%p7[%gS%m`%v!bOY$?]YZMOZ]$?]]^MO^w$?]wx#5kx#O$?]#O#P$@c#P#o$?]#o#p$:u#p#q$?]#q#r$9c#r~$?]Iw$@jXQ1s%p7[OY$?]YZMOZ]$?]]^MO^#o$?]#o#p$9c#p#q$?]#q#r$9c#r~$?]JP$A^XQ1s%p7[OY#._YZ'PZ]#._]^'P^#o#._#o#p$6T#p#q#._#q#r$6T#r~#._JP$BQXQ1s%p7[OY#._YZ'PZ]#._]^'P^#o#._#o#p$6T#p#q#._#q#r$6T#r~#._MV$Bz_Q1s%p7[%jW%sp%x#tOY$CyYZ!!SZ]$Cy]^!!S^r$Cyrs#2Rsw$Cywx%&{x#O$Cy#O#P%.{#P#o$Cy#o#p%$c#p#q$Cy#q#r$E}#r~$CyMV$D[_Q1s%p7[%gS%jW%sp%v!b%x#tOY$CyYZ!!SZ]$Cy]^!!S^r$Cyrs#2Rsw$Cywx$Bmx#O$Cy#O#P$EZ#P#o$Cy#o#p%%y#p#q$Cy#q#r$E}#r~$CyMV$EbXQ1s%p7[OY$CyYZ!!SZ]$Cy]^!!S^#o$Cy#o#p$E}#p#q$Cy#q#r$E}#r~$Cy6y$F^]Q1s%gS%jW%sp%v!b%x#tOY$E}YZ!#jZ]$E}]^!#j^r$E}rs#Fksw$E}wx$GVx#O$E}#O#P%%e#P#o$E}#o#p%%y#p~$E}6y$Gb]Q1s%jW%sp%x#tOY$E}YZ!#jZ]$E}]^!#j^r$E}rs#Fksw$E}wx$HZx#O$E}#O#P%#}#P#o$E}#o#p%$c#p~$E}6y$Hf]Q1s%jW%sp%x#tOY$E}YZ!#jZ]$E}]^!#j^r$E}rs#Fksw$E}wx$I_x#O$E}#O#P%!g#P#o$E}#o#p%!{#p~$E}5c$Ij]Q1s%jW%sp%x#tOY$JcYZ!&tZ]$Jc]^!&t^r$Jcrs#Kcsw$Jcwx$I_x#O$Jc#O#P% X#P#o$Jc#o#p% m#p~$Jc5c$Jn]Q1s%jW%sp%x#tOY$JcYZ!&tZ]$Jc]^!&t^r$Jcrs#Kcsw$Jcwx$Kgx#O$Jc#O#P$My#P#o$Jc#o#p$N_#p~$Jc5c$Kr]Q1s%jW%sp%x#tOY$JcYZ!&tZ]$Jc]^!&t^r$Jcrs#Kcsw$Jcwx$I_x#O$Jc#O#P$Lk#P#o$Jc#o#p$MP#p~$Jc5c$LpTQ1sOY$JcYZ!&tZ]$Jc]^!&t^~$Jc5c$MWZQ1s%jWOY#JoYZ8sZ]#Jo]^8s^r#Jors#Kcs#O#Jo#O#P#Mo#P#o#Jo#o#p$Jc#p~#Jo5c$NOTQ1sOY$JcYZ!&tZ]$Jc]^!&t^~$Jc5c$NfZQ1s%jWOY#JoYZ8sZ]#Jo]^8s^r#Jors#Kcs#O#Jo#O#P#Mo#P#o#Jo#o#p$Jc#p~#Jo5c% ^TQ1sOY$JcYZ!&tZ]$Jc]^!&t^~$Jc5c% tZQ1s%jWOY#JoYZ8sZ]#Jo]^8s^r#Jors#Kcs#O#Jo#O#P#Mo#P#o#Jo#o#p$Jc#p~#Jo6y%!lTQ1sOY$E}YZ!#jZ]$E}]^!#j^~$E}6y%#U]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p$E}#p~$ k6y%$STQ1sOY$E}YZ!#jZ]$E}]^!#j^~$E}6y%$l]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p$E}#p~$ k6y%%jTQ1sOY$E}YZ!#jZ]$E}]^!#j^~$E}6y%&S]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p$E}#p~$ kMV%'Y_Q1s%p7[%jW%sp%x#tOY$CyYZ!!SZ]$Cy]^!!S^r$Cyrs#2Rsw$Cywx%(Xx#O$Cy#O#P%.X#P#o$Cy#o#p%!{#p#q$Cy#q#r$E}#r~$CyKo%(f_Q1s%p7[%jW%sp%x#tOY%)eYZ!.|Z]%)e]^!.|^r%)ers$/osw%)ewx%(Xx#O%)e#O#P%-e#P#o%)e#o#p% m#p#q%)e#q#r$Jc#r~%)eKo%)r_Q1s%p7[%jW%sp%x#tOY%)eYZ!.|Z]%)e]^!.|^r%)ers$/osw%)ewx%*qx#O%)e#O#P%,q#P#o%)e#o#p$N_#p#q%)e#q#r$Jc#r~%)eKo%+O_Q1s%p7[%jW%sp%x#tOY%)eYZ!.|Z]%)e]^!.|^r%)ers$/osw%)ewx%(Xx#O%)e#O#P%+}#P#o%)e#o#p$MP#p#q%)e#q#r$Jc#r~%)eKo%,UXQ1s%p7[OY%)eYZ!.|Z]%)e]^!.|^#o%)e#o#p$Jc#p#q%)e#q#r$Jc#r~%)eKo%,xXQ1s%p7[OY%)eYZ!.|Z]%)e]^!.|^#o%)e#o#p$Jc#p#q%)e#q#r$Jc#r~%)eKo%-lXQ1s%p7[OY%)eYZ!.|Z]%)e]^!.|^#o%)e#o#p$Jc#p#q%)e#q#r$Jc#r~%)eMV%.`XQ1s%p7[OY$CyYZ!!SZ]$Cy]^!!S^#o$Cy#o#p$E}#p#q$Cy#q#r$E}#r~$CyMV%/SXQ1s%p7[OY$CyYZ!!SZ]$Cy]^!!S^#o$Cy#o#p$E}#p#q$Cy#q#r$E}#r~$CyMg%/vXQ1s%p7[OY#+oYZ$}Z]#+o]^$}^#o#+o#o#p%0c#p#q#+o#q#r%0c#r~#+o7Z%0t]Q1s%gS%jW%m`%sp%v!b%x#tOY%0cYZ!3fZ]%0c]^!3f^r%0crs$7Zsw%0cwx$GVx#O%0c#O#P%1m#P#o%0c#o#p%2R#p~%0c7Z%1rTQ1sOY%0cYZ!3fZ]%0c]^!3f^~%0c7Z%2[]Q1s%gS%jWOY$ kYZ;WZ]$ k]^;W^r$ krs$!gsw$ kwx$$Zx#O$ k#O#P$'q#P#o$ k#o#p%0c#p~$ kGz%3h]$}Q%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz%4tZ!s,W%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz%5z]$wQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{%7S_%q`%p7[%jW%e,X%sp%x#tOY%8RYZ!!SZ]%8R]^!!S^r%8Rrs%9csw%8Rwx&$}x#O%8R#O#P&(X#P#o%8R#o#p&(m#p#q%8R#q#r& u#r~%8RGk%8d_%p7[%gS%jW%e,X%sp%v!b%x#tOY%8RYZ!!SZ]%8R]^!!S^r%8Rrs%9csw%8Rwx%Nax#O%8R#O#P& a#P#o%8R#o#p&#{#p#q%8R#q#r& u#r~%8RDT%9n_%p7[%gS%e,X%v!bOY%:mYZ(yZ]%:m]^(y^r%:mrs%JPsw%:mwx%;yx#O%:m#O#P%M{#P#o%:m#o#p%ER#p#q%:m#q#r%=Z#r~%:mDT%:z_%p7[%gS%jW%e,X%v!bOY%:mYZ(yZ]%:m]^(y^r%:mrs%9csw%:mwx%;yx#O%:m#O#P%<u#P#o%:m#o#p%ER#p#q%:m#q#r%=Z#r~%:mDT%<SZ%p7[%jW%e,XOr(yrs)wsw(ywxAjx#O(y#O#PF^#P#o(y#o#p>v#p#q(y#q#r5T#r~(yDT%<zT%p7[O#o%:m#o#p%=Z#p#q%:m#q#r%=Z#r~%:m-w%=f]%gS%jW%e,X%v!bOY%=ZYZ5TZ]%=Z]^5T^r%=Zrs%>_sw%=Zwx%DXx#O%=Z#O#P%Iy#P#o%=Z#o#p%ER#p~%=Z-w%>h]%gS%e,X%v!bOY%=ZYZ5TZ]%=Z]^5T^r%=Zrs%?asw%=Zwx%DXx#O%=Z#O#P%Is#P#o%=Z#o#p%ER#p~%=Z-w%?j]%gS%e,X%v!bOY%=ZYZ5TZ]%=Z]^5T^r%=Zrs%@csw%=Zwx%DXx#O%=Z#O#P%D{#P#o%=Z#o#p%ER#p~%=Z-o%@lZ%gS%e,X%v!bOY%@cYZ.kZ]%@c]^.k^w%@cwx%A_x#O%@c#O#P%Ay#P#o%@c#o#p%BP#p~%@c-o%AdV%e,XOw.kwx/qx#O.k#O#P2c#P#o.k#o#p2i#p~.k-o%A|PO~%@c-o%BWZ%gS%e,XOY%ByYZ0xZ]%By]^0x^w%Bywx%Cmx#O%By#O#P%DR#P#o%By#o#p%@c#p~%By,]%CQX%gS%e,XOY%ByYZ0xZ]%By]^0x^w%Bywx%Cmx#O%By#O#P%DR#P~%By,]%CrT%e,XOw0xwx1px#O0x#O#P2V#P~0x,]%DUPO~%By-w%D`X%jW%e,XOr5Trs5ysw5Twx8Rx#O5T#O#P>p#P#o5T#o#p>v#p~5T-w%EOPO~%=Z-w%E[]%gS%jW%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%GPsw%FTwx%Hsx#O%FT#O#P%Im#P#o%FT#o#p%=Z#p~%FT,e%F^Z%gS%jW%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%GPsw%FTwx%Hsx#O%FT#O#P%Im#P~%FT,e%GWZ%gS%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%Gysw%FTwx%Hsx#O%FT#O#P%Ig#P~%FT,e%HQZ%gS%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%Bysw%FTwx%Hsx#O%FT#O#P%Ia#P~%FT,e%HzV%jW%e,XOr;Wrs;tsw;Wwx=fx#O;W#O#P>W#P~;W,e%IdPO~%FT,e%IjPO~%FT,e%IpPO~%FT-w%IvPO~%=Z-w%I|PO~%=ZDT%J[_%p7[%gS%e,X%v!bOY%:mYZ(yZ]%:m]^(y^r%:mrs%KZsw%:mwx%;yx#O%:m#O#P%Mg#P#o%:m#o#p%ER#p#q%:m#q#r%=Z#r~%:mC{%Kf]%p7[%gS%e,X%v!bOY%KZYZ+oZ]%KZ]^+o^w%KZwx%L_x#O%KZ#O#P%MR#P#o%KZ#o#p%BP#p#q%KZ#q#r%@c#r~%KZC{%LfX%p7[%e,XOw+owx-Vx#O+o#O#P3u#P#o+o#o#p2i#p#q+o#q#r.k#r~+oC{%MWT%p7[O#o%KZ#o#p%@c#p#q%KZ#q#r%@c#r~%KZDT%MlT%p7[O#o%:m#o#p%=Z#p#q%:m#q#r%=Z#r~%:mDT%NQT%p7[O#o%:m#o#p%=Z#p#q%:m#q#r%=Z#r~%:mGk%NnZ%p7[%jW%e,X%sp%x#tOr!!Srs)wsw!!Swx!-Qx#O!!S#O#P!2l#P#o!!S#o#p!+d#p#q!!S#q#r!#j#r~!!SGk& fT%p7[O#o%8R#o#p& u#p#q%8R#q#r& u#r~%8R1_&!U]%gS%jW%e,X%sp%v!b%x#tOY& uYZ!#jZ]& u]^!#j^r& urs%>_sw& uwx&!}x#O& u#O#P&#u#P#o& u#o#p&#{#p~& u1_&#YX%jW%e,X%sp%x#tOr!#jrs5ysw!#jwx!%Yx#O!#j#O#P!+^#P#o!#j#o#p!+d#p~!#j1_&#xPO~& u1_&$U]%gS%jW%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%GPsw%FTwx%Hsx#O%FT#O#P%Im#P#o%FT#o#p& u#p~%FTGk&%[Z%p7[%jW%e,X%sp%x#tOr!!Srs)wsw!!Swx&%}x#O!!S#O#P&'P#P#o!!S#o#p&'e#p#q!!S#q#r!#j#r~!!SGk&&^Z%h!f%p7[%jW%f,X%sp%x#tOr!.|rsCWsw!.|wx!.Ox#O!.|#O#P!1r#P#o!.|#o#p!)x#p#q!.|#q#r!&t#r~!.|<b&'UT%p7[O#o!!S#o#p!#j#p#q!!S#q#r!#j#r~!!S&U&'lX%gS%jWOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!#j#p~;WGk&(^T%p7[O#o%8R#o#p& u#p#q%8R#q#r& u#r~%8R1_&(v]%gS%jW%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%GPsw%FTwx%Hsx#O%FT#O#P%Im#P#o%FT#o#p& u#p~%FTG{&*SZf,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u&+YZ!OR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&,`_T,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Uxz$}z{&-_{!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&-r]_R%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&/O]$z,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u&0[ZwR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Mg&1b^${,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`!a&2^!a#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}B^&2qZ&S&j%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&3w_!dQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!O$}!O!P&4v!P!Q$}!Q![&7W![#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&5X]%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!O$}!O!P&6Q!P#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&6eZ!m,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&7kg!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q![&7W![!g$}!g!h&9S!h!l$}!l!m&=d!m#O$}#O#P!3Q#P#R$}#R#S&7W#S#X$}#X#Y&9S#Y#^$}#^#_&=d#_#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&9ea%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux{$}{|&:j|}$}}!O&:j!O!Q$}!Q![&;t![#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&:{]%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q![&;t![#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&<Xc!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q![&;t![!l$}!l!m&=d!m#O$}#O#P!3Q#P#R$}#R#S&;t#S#^$}#^#_&=d#_#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&=wZ!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{&>}_$|R%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!P$}!P!Q&?|!Q!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz&@a]%OQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Amu!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!O$}!O!P&DQ!P!Q$}!Q![&GW![!d$}!d!e&IY!e!g$}!g!h&9S!h!l$}!l!m&=d!m!q$}!q!r&LS!r!z$}!z!{&Nv!{#O$}#O#P!3Q#P#R$}#R#S&GW#S#U$}#U#V&IY#V#X$}#X#Y&9S#Y#^$}#^#_&=d#_#c$}#c#d&LS#d#l$}#l#m&Nv#m#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Dc]%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q![&E[![#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Eog!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q![&E[![!g$}!g!h&9S!h!l$}!l!m&=d!m#O$}#O#P!3Q#P#R$}#R#S&E[#S#X$}#X#Y&9S#Y#^$}#^#_&=d#_#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Gki!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!O$}!O!P&DQ!P!Q$}!Q![&GW![!g$}!g!h&9S!h!l$}!l!m&=d!m#O$}#O#P!3Q#P#R$}#R#S&GW#S#X$}#X#Y&9S#Y#^$}#^#_&=d#_#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Ik`%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!R&Jm!R!S&Jm!S#O$}#O#P!3Q#P#R$}#R#S&Jm#S#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&KQ`!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!R&Jm!R!S&Jm!S#O$}#O#P!3Q#P#R$}#R#S&Jm#S#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Le_%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!Y&Md!Y#O$}#O#P!3Q#P#R$}#R#S&Md#S#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy&Mw_!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!Y&Md!Y#O$}#O#P!3Q#P#R$}#R#S&Md#S#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy' Xc%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!['!d![!c$}!c!i'!d!i#O$}#O#P!3Q#P#R$}#R#S'!d#S#T$}#T#Z'!d#Z#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy'!wc!f,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!Q$}!Q!['!d![!c$}!c!i'!d!i#O$}#O#P!3Q#P#R$}#R#S'!d#S#T$}#T#Z'!d#Z#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Mg'$g]x1s%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`'%`!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u'%sZ%WR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{'&yZ#^,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{'(P_jR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!^$}!^!_')O!_!`!9P!`!a!9P!a#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz')c]$xQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{'*o]%V,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`!9P!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{'+{^jR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`!9P!`!a',w!a#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz'-[]$yQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}G{'.j]]Q#tP%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Mg'/xc%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs&Rsw$}wx! Ux!Q$}!Q!['/c![!c$}!c!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cMg'1jg%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs'3Rsw$}wx'6mx!Q$}!Q!['/c![!c$}!c!t'/c!t!u';a!u!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#f'/c#f#g';a#g#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cDe'3`_%p7[%gS%e,X%m`%v!bOY!<kYZ'PZ]!<k]^'P^r!<krs'4_sw!<kwx!>yx#O!<k#O#P'6X#P#o!<k#o#p#'w#p#q!<k#q#r#%s#r~!<kDe'4lZ%p7[%gS%e,X%m`%v!bOr'Prs'5_sw'Pwx(Px#O'P#O#PN[#P#o'P#o#pKQ#p#q'P#q#rGW#r~'PD]'5lX%p7[%gS%i,X%m`%v!bOwMOwx,ex#OMO#O#PMv#P#oMO#o#pJ`#p#qMO#q#rIj#r~MODe'6^T%p7[O#o!<k#o#p#%s#p#q!<k#q#r#%s#r~!<kGk'6z_%p7[%jW%e,X%sp%x#tOY%8RYZ!!SZ]%8R]^!!S^r%8Rrs%9csw%8Rwx'7yx#O%8R#O#P'9y#P#o%8R#o#p':_#p#q%8R#q#r& u#r~%8RGk'8WZ%p7[%jW%e,X%sp%x#tOr!!Srs)wsw!!Swx'8yx#O!!S#O#P!2W#P#o!!S#o#p!*j#p#q!!S#q#r!#j#r~!!SFT'9WZ%p7[%jW%f,X%sp%x#tOr!.|rsCWsw!.|wx!.Ox#O!.|#O#P!1r#P#o!.|#o#p!)x#p#q!.|#q#r!&t#r~!.|Gk':OT%p7[O#o%8R#o#p& u#p#q%8R#q#r& u#r~%8R1_':h]%gS%jW%e,XOY%FTYZ;WZ]%FT]^;W^r%FTrs%GPsw%FTwx%Hsx#O%FT#O#P%Im#P#o%FT#o#p& u#p~%FTMg';vc%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs'3Rsw$}wx'6mx!Q$}!Q!['/c![!c$}!c!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cMg'=hg%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs'?Psw$}wx'Awx!Q$}!Q!['/c![!c$}!c!t'/c!t!u'Du!u!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#f'/c#f#g'Du#g#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cDe'?^Z%p7[%gS%m`%v!b%r,XOr'Prs'@Psw'Pwx(Px#O'P#O#PNp#P#o'P#o#pKQ#p#q'P#q#rGW#r~'PDe'@[Z%p7[%gS%m`%v!bOr'Prs'@}sw'Pwx(Px#O'P#O#PN[#P#o'P#o#pKQ#p#q'P#q#rGW#r~'PD]'A[X%p7[%gS%w,X%m`%v!bOwMOwx,ex#OMO#O#PMv#P#oMO#o#pJ`#p#qMO#q#rIj#r~MOGk'BUZ%p7[%jW%sp%x#t%l,XOr!!Srs)wsw!!Swx'Bwx#O!!S#O#P!2l#P#o!!S#o#p!+d#p#q!!S#q#r!#j#r~!!SGk'CSZ%p7[%jW%sp%x#tOr!!Srs)wsw!!Swx'Cux#O!!S#O#P!2W#P#o!!S#o#p!*j#p#q!!S#q#r!#j#r~!!SFT'DSZ%p7[%jW%u,X%sp%x#tOr!.|rsCWsw!.|wx!.Ox#O!.|#O#P!1r#P#o!.|#o#p!)x#p#q!.|#q#r!&t#r~!.|Mg'E[c%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs'?Psw$}wx'Awx!Q$}!Q!['/c![!c$}!c!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cMg'F|k%p7[%gS%jW%d&j%m`%sp%v!b%x#t%Q,XOr$}rs'3Rsw$}wx'6mx!Q$}!Q!['/c![!c$}!c!h'/c!h!i'Du!i!t'/c!t!u';a!u!}'/c!}#O$}#O#P!3Q#P#R$}#R#S'/c#S#T$}#T#U'/c#U#V';a#V#Y'/c#Y#Z'Du#Z#o'/c#o#p!4h#p#q$}#q#r!3f#r$g$}$g~'/cG{'IUZ!V,X%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Mg'I|X%p7[OY$}YZ!5[Z]$}]^!5[^#o$}#o#p!3f#p#q$}#q#r!3f#r~$}<u'J|Z!WR%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gz'LS]$vQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}Gy'MUX%gS%jW!ZGmOr;Wrs;tsw;Wwx<zx#O;W#O#P>j#P#o;W#o#p!3f#p~;WGz'NU]$uQ%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux!_$}!_!`%4a!`#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}<u( `X![7_%gS%jW%m`%sp%v!b%x#tOr!3frsHOsw!3fwx!$dx#O!3f#O#P!4b#P#o!3f#o#p!4h#p~!3fGy(!`Z%P,V%p7[%gS%jW%m`%sp%v!b%x#tOr$}rs&Rsw$}wx! Ux#O$}#O#P!3Q#P#o$}#o#p!4h#p#q$}#q#r!3f#r~$}",tokenizers:[$O,gO,0,1,2,3,4,5,6,7,8,9,10,pO],topRules:{Script:[0,3]},specialized:[{term:186,get:s=>xO[s]||-1}],tokenPrec:6594}),yO=Gt.define({parser:wO.configure({props:[nr.add({Body:Qa()}),rr.add({"Body ArrayExpression DictionaryExpression":Ta}),qa({"async '*' '**' FormatConversion":x.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield":x.controlKeyword,"in not and or is del":x.operatorKeyword,"import from def class global nonlocal lambda":x.definitionKeyword,"with as print":x.keyword,self:x.self,Boolean:x.bool,None:x.null,VariableName:x.variableName,"CallExpression/VariableName":x.function(x.variableName),"FunctionDefinition/VariableName":x.function(x.definition(x.variableName)),"ClassDefinition/VariableName":x.definition(x.className),PropertyName:x.propertyName,"CallExpression/MemberExpression/ProperyName":x.function(x.propertyName),Comment:x.lineComment,Number:x.number,String:x.string,FormatString:x.special(x.string),UpdateOp:x.updateOperator,ArithOp:x.arithmeticOperator,BitOp:x.bitwiseOperator,CompareOp:x.compareOperator,AssignOp:x.definitionOperator,Ellipsis:x.punctuation,At:x.meta,"( )":x.paren,"[ ]":x.squareBracket,"{ }":x.brace,".":x.derefOperator,", ;":x.separator})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""']},commentTokens:{line:"#"},indentOnInput:/^\s*[\}\]\)]$/}});function sf(){return new sr(yO)}var nf="6e400001-b5a3-f393-e0a9-e50e24dcca9e",SO="6e400002-b5a3-f393-e0a9-e50e24dcca9e",bO="6e400003-b5a3-f393-e0a9-e50e24dcca9e",pt,Li,Kr,rf,of,Vi,lf=document.querySelector("#connectToBluetoothDevices"),af=document.querySelector("#requestBluetoothDevice"),eo=document.querySelector("#promptBond");async function kO(){try{console.log("Getting existing permitted Bluetooth devices...");let s=await navigator.bluetooth.getDevices();console.log("> Got "+s.length+" Bluetooth devices.");for(let e of s)PO(e)}catch(s){console.log("Argh! "+s)}}async function hf(s){pt=s,pt.addEventListener("gattserverdisconnected",vO),Li=pt.gatt,console.log("connected",Li);let e=await Li.getPrimaryServices();console.log(e),console.log("Getting Transfer Service..."),Vi=new tn(pt),Kr=await Li.getPrimaryService(nf),of=await Kr.getCharacteristic(bO),rf=await Kr.getCharacteristic(SO),console.log(of,rf),eo.disabled=!1,lf.disabled=!0,af.disabled=!0}async function PO(s){let e=new AbortController;s.addEventListener("advertisementreceived",async t=>{console.log('> Received advertisement from "'+s.name+'"...'),e.abort(),console.log('Connecting to GATT Server from "'+s.name+'"...');try{await s.gatt.connect(),console.log('> Bluetooth device "'+s.name+" connected."),await hf(s)}catch(i){console.log("Argh! "+i)}},{once:!0});try{console.log('Watching advertisements from "'+s.name+'"...'),await s.watchAdvertisements({signal:e.signal})}catch(t){console.log("Argh! "+t)}}var we=0;async function WO(){console.log("bond"),await Vi.bond();var s=await Vi.readFile("/code.py");Ni.setState(I.create({doc:s,extensions:[Nr,sf(),k.updateListener.of(QO)]})),we=Ni.state.doc.length,console.log("doc length",we),console.log("bond done")}async function vO(){console.log("disconnected"),await Li.connect()}async function TO(){try{console.log("Requesting any Bluetooth device..."),pt=await navigator.bluetooth.requestDevice({filters:[{services:[65211]}],optionalServices:[65211,nf]}),console.log("> Requested "+pt.name),await pt.gatt.connect(),hf(pt)}catch(s){console.log("Argh! "+s)}}var Ni,ni=null;async function cf(){if(console.log("sync starting at",we,"to",Ni.state.doc.length),!Vi){console.log("no client");return}let s=new TextEncoder,e=Ni.state.doc,t=e.sliceString(0,we),i=s.encode(t).byteLength,n=e.sliceString(we),r=s.encode(n);console.log(i,n);let o=we;we=e.length;try{console.log("write"),await Vi.writeFile("/code.py",i,r)}catch(l){we=Math.min(o,we),ni!=null&&clearTimeout(ni),ni=setTimeout(cf,2e3)}}async function QO(s){if(!!s.docChanged){var e=!1;s.changes.desc.iterGaps(function(t,i,n){e=!0,!(t!=0&&i!=0)&&(t==0&&i==0?we=Math.min(n,we):we=0)}),e||(we=0),ni!=null&&clearTimeout(ni),ni=setTimeout(cf,750)}}navigator.bluetooth?(lf.addEventListener("click",function(){kO()}),af.addEventListener("click",function(){TO()}),eo.addEventListener("click",function(){WO()}),eo.disabled=!0):console.log("bluetooth not supported on this browser");Ni=new k({state:I.create({doc:"Connect to load code.py",extensions:[Nr]}),parent:document.querySelector("#editor")});
//# sourceMappingURL=index.html.inline.0.js.map
</script>

  

</body></html>